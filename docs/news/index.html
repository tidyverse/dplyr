<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>All news • dplyr</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="../tidyverse.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- tidyverse -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container template-news">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">dplyr</a>
        <small class="tidyverse">part of the <a href="http://tidyverse.org">tidyverse</a></small>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../articles/dplyr.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/two-table.html">Two-table verbs</a>
    </li>
    <li>
      <a href="../articles/window-functions.html">Window functions</a>
    </li>
    <li>
      <a href="../articles/programming.html">Programming with dplyr</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
        <li>
  <a href="https://github.com/tidyverse/dplyr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">

  <div class="col-md-9">
    <div class="page-header">
      <h1>Change log <small>All releases</small></h1>
    </div>

    <div class="contents">
    <div id="dplyr-0-5-0-9000" class="section level1">
<h1 class="hasAnchor">
<a href="#dplyr-0-5-0-9000" class="anchor"></a>dplyr 0.5.0.9000</h1>
<div id="new-data-functions-and-features" class="section level2">
<h2 class="hasAnchor">
<a href="#new-data-functions-and-features" class="anchor"></a>New data, functions, and features</h2>
<ul>
<li><p>Five new datasets provide some interesting built-in datasets to demonstrate dplyr verbs (#2094):</p></li>
<li>
<code>starwars</code> dataset about starwars characters; has list columns</li>
<li>
<code>storms</code> has the trajectories of ~200 tropical storms</li>
<li><p><code>band_members</code>, <code>band_instruments</code> and <code>band_instruments2</code> has some simple data to demonstrate joins.</p></li>
<li><p>New <code><a href="../reference/tally.html">add_count()</a></code> and <code><a href="../reference/tally.html">add_tally()</a></code> for adding an <code>n</code> column within groups (#2078, @dgrtwo).</p></li>
<li><p><code><a href="../reference/arrange.html">arrange()</a></code> for grouped data frames gains a <code>.by_group</code> argument so you can choose to sort by groups if you want to (defaults to <code>FALSE</code>) (#2318)</p></li>
<li><p>New <code><a href="../reference/pull.html">pull()</a></code> generic for extracting a single column either by name (as a string) or a position (either from the left or the right). Thanks to @paulponcet for the idea (#2054).</p></li>
<li><p><code><a href="../reference/reexports.html">as_tibble()</a></code> is re-exported from tibble. This is the recommend way to create tibbles from existing data frames. <code><a href="../reference/tbl_df.html">tbl_df()</a></code> has been softly deprecated. <code><a href="../reference/reexports.html">tribble()</a></code> is now imported from tibble (#2336, @chrMongeau); this is now prefered to <code><a href="../reference/reexports.html">frame_data()</a></code>.</p></li>
</ul>
</div>
<div id="deprecated-and-defunct" class="section level2">
<h2 class="hasAnchor">
<a href="#deprecated-and-defunct" class="anchor"></a>Deprecated and defunct</h2>
<ul>
<li><p>dplyr no longer messages that you need dtplyr to work with data.table (#2489).</p></li>
<li><p>Long deprecated <code>regroup()</code> has been removed.</p></li>
<li><p>Deprecated <code><a href="../reference/failwith.html">failwith()</a></code>. I’m not even sure why it was here.</p></li>
</ul>
</div>
<div id="databases" class="section level2">
<h2 class="hasAnchor">
<a href="#databases" class="anchor"></a>Databases</h2>
<p>This version of dplyr includes some major changes to how database connections work. By and large, you should be able to continue using your existing dplyr database code without modification, but there are two big changes that you should be aware of:</p>
<ul>
<li><p>Almost all database related code has been moved out of dplyr and into a new package, <a href="http://github.com/hadley/dbplyr/">dbplyr</a>. This makes dplyr simpler, and will make it easier to release fixes for bugs that only affect databases. <code><a href="../reference/src_dbi.html">src_mysql()</a></code>, <code><a href="../reference/src_dbi.html">src_postgres()</a></code>, and <code><a href="../reference/src_dbi.html">src_sqlite()</a></code> will still live dplyr so your existing code continues to work.</p></li>
<li><p>It is no longer necessary to create a remote “src”. Instead you can work directly with the database connection returned by DBI. This reflects the maturity of the DBI ecosystem. Thanks largely to the work of Kirill Muller (funded by the R Consortium) DBI backends are now much more consistent, comprehensive, and easier to use. That means that there’s no longer a need for a layer in between you and DBI.</p></li>
</ul>
<p>You can continue to use <code><a href="../reference/src_dbi.html">src_mysql()</a></code>, <code><a href="../reference/src_dbi.html">src_postgres()</a></code>, and <code><a href="../reference/src_dbi.html">src_sqlite()</a></code>, but I recommend a new style that makes the connection to DBI more clear:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)

con &lt;-<span class="st"> </span>DBI::<span class="kw">dbConnect</span>(RSQLite::<span class="kw">SQLite</span>(), <span class="st">":memory:"</span>)
<span class="kw">dbWriteTable</span>(con, <span class="st">"mtcars"</span>, mtcars)

mtcars2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/tbl.html">tbl</a></span>(con, <span class="st">"mtcars"</span>)
mtcars2</code></pre></div>
<p>This is particularly useful if you want to perform non-SELECT queries as you can do whatever you want with <code>DBI::dbGetQuery()</code> and <code>DBI::dbExecute()</code>.</p>
<p>If you’ve implemented a database backend for dplyr, please read the <a href="https://github.com/hadley/dbplyr/blob/master/NEWS.md#backends">backend news</a> to see what’s changed from your perspective (not much). If you want to ensure your package works with both the current and previous version of dplyr, see <code><a href="../reference/check_dbplyr.html">wrap_dbplyr_obj()</a></code> for helpers.</p>
</div>
<div id="utf-8" class="section level2">
<h2 class="hasAnchor">
<a href="#utf-8" class="anchor"></a>UTF-8</h2>
<ul>
<li><p>Internally, column names are always represented as character vectors, and not as language symbols, to avoid encoding problems on Windows (#1950, #2387, #2388).</p></li>
<li><p>Error messages and explanations of data frame inequality are now encoded in UTF-8, also on Windows (#2441).</p></li>
<li><p>Joins now always reencode character columns to UTF-8 if necessary. This gives a nice speedup, because now pointer comparison can be used instead of string comparison, but relies on a proper encoding tag for all strings (#2514).</p></li>
<li><p>Fixed problems when joining factor or character encodings with a mix of native and UTF-8 encoded values (#1885, #2118, #2271, #2451).</p></li>
<li><p>Fix <code><a href="../reference/group_by.html">group_by()</a></code> for data frames that have UTF-8 encoded names (#2284, #2382).</p></li>
<li><p>New <code><a href="../reference/groups.html">group_vars()</a></code> generic that returns the grouping as character vector, to avoid the potentially lossy conversion to language symbols. The list returned by <code><a href="../reference/group_by_prepare.html">group_by_prepare()</a></code> now has a new <code>group_names</code> component (#1950, #2384).</p></li>
</ul>
</div>
<div id="colwise-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#colwise-functions" class="anchor"></a>Colwise functions</h2>
<ul>
<li><p><code><a href="../reference/select.html">rename()</a></code>, <code><a href="../reference/select.html">select()</a></code>, <code><a href="../reference/group_by.html">group_by()</a></code>, <code><a href="../reference/filter.html">filter()</a></code> and <code><a href="../reference/mutate.html">transmute()</a></code> now have scoped variants (verbs suffixed with <code>_if()</code>, <code>_at()</code> and <code>_all()</code>). Like <code><a href="../reference/summarise_all.html">mutate_all()</a></code>, <code><a href="../reference/summarise_all.html">summarise_if()</a></code>, etc, these variants apply an operation to a selection of variables.</p></li>
<li><p>The scoped verbs taking predicates (<code><a href="../reference/summarise_all.html">mutate_if()</a></code>, <code><a href="../reference/summarise_all.html">summarise_if()</a></code>, etc) now support S3 objects and lazy tables. S3 objects should implement methods for <code>length()</code>, <code>[[</code> and <code><a href="../reference/tbl_vars.html">tbl_vars()</a></code>. For lazy tables, the first 100 rows are collected and the predicate is applied on this subset of the data. This is robust for the common case of checking the type of a column (#2129).</p></li>
<li><p>Summarise and mutate colwise functions pass <code>...</code> on the the manipulation functions.</p></li>
<li><p>The performance of colwise verbs like <code><a href="../reference/summarise_all.html">mutate_all()</a></code> is now back to where it was in <code><a href="../reference/summarise_each.html">mutate_each()</a></code>.</p></li>
<li><p><code><a href="../reference/funs.html">funs()</a></code> has better handling of namespaced functions (#2089).</p></li>
<li><p>Fix issue with <code><a href="../reference/summarise_all.html">mutate_if()</a></code> and <code><a href="../reference/summarise_all.html">summarise_if()</a></code> when a predicate function returns a vector of <code>FALSE</code> (#1989, #2009, #2011, @lionel-).</p></li>
</ul>
</div>
<div id="tidyeval" class="section level2">
<h2 class="hasAnchor">
<a href="#tidyeval" class="anchor"></a>Tidyeval</h2>
<p>dplyr has a new approach to non-standard evaluation (NSE) called tidyeval. Tidyeval is described in detail in <code><a href="../articles/programming.html">vignette("programming")</a></code> but, in brief, gives you the ability to interpolate values in contexts where dplyr usually works with expressions:</p>
<pre class="{r}"><code>my_var &lt;- quo(homeworld)

starwars %&gt;%
  group_by(!!my_var) %&gt;%
  summarise_at(vars(height:mass), mean, na.rm = TRUE)</code></pre>
<p>This means that the underscored version of each main verb is no longer needed, and so these functions have been deprecated (but remain around for backward compatibility).</p>
<ul>
<li><p><code><a href="../reference/order_by.html">order_by()</a></code>, <code><a href="../reference/top_n.html">top_n()</a></code>, <code><a href="../reference/sample.html">sample_n()</a></code> and <code><a href="../reference/sample.html">sample_frac()</a></code> now use tidyeval to capture their arguments by expression. This makes it possible to use unquoting idioms (see <code><a href="../articles/programming.html">vignette("programming")</a></code>) and fixes scoping issues (#2297).</p></li>
<li><p>Most verbs taking dots now ignore the last argument if empty. This makes it easier to copy lines of code without having to worry about deleting trailing commas (#1039).</p></li>
<li>
<p>[API] The new <code>.data</code> and <code>.env</code> environments can be used inside all verbs that operate on data: <code>.data$column_name</code> accesses the column <code>column_name</code>, whereas <code>.env$var</code> accesses the external variable <code>var</code>. Columns or external variables named <code>.data</code> or <code>.env</code> are shadowed, use <code>.data$...</code> and/or <code>.env$...</code> to access them. (<code>.data</code> implements strict matching also for the <code>$</code> operator (#2591).)</p>
<p>The <code>column()</code> and <code>global()</code> functions have been removed. They were never documented officially. Use the new <code>.data</code> and <code>.env</code> environments instead.</p>
</li>
<li><p>Expressions in verbs are now interpreted correctly in many cases that failed before (e.g., use of <code>$</code>, <code><a href="../reference/case_when.html">case_when()</a></code>, nonstandard evaluation, …). These expressions are now evaluated in a specially constructed temporary environment that retrieves column data on demand with the help of the <code>bindrcpp</code> package (#2190). This temporary environment poses restrictions on assignments using <code>&lt;-</code> inside verbs. To prevent leaking of broken bindings, the temporary environment is cleared after the evaluation (#2435).</p></li>
</ul>
</div>
<div id="verbs" class="section level2">
<h2 class="hasAnchor">
<a href="#verbs" class="anchor"></a>Verbs</h2>
<div id="joins" class="section level3">
<h3 class="hasAnchor">
<a href="#joins" class="anchor"></a>Joins</h3>
<ul>
<li><p>[API] <code>xxx_join.tbl_df()</code> by default treats all <code>NA</code> values as different from each other (and from any other value), so that they never match. This corresponds to the behavior of joins for database sources, and of database joins in general. To match <code>NA</code> values, pass <code>na_matches = "na"</code> to the join verbs; this is only supported for data frames. The default can also be tweaked by calling <code>pkgconfig::set_config("dplyr::na_matches", "na")</code> (#2033).</p></li>
<li><p><code><a href="../reference/common_by.html">common_by()</a></code> gets a better error message for unexpected inputs (#2091)</p></li>
<li><p>Fix groups when joining grouped data frames with duplicate columns (#2330, #2334, @davidkretch).</p></li>
<li><p>One of the two join suffixes can now be an empty string, dplyr no longer hangs (#2228, #2445).</p></li>
</ul>
</div>
<div id="select" class="section level3">
<h3 class="hasAnchor">
<a href="#select" class="anchor"></a>Select</h3>
<ul>
<li><p>For selecting variables, the first selector decides if it’s an inclusive selection (i.e., the initial column list is empty), or an exclusive selection (i.e., the initial column list contains all columns). This means that <code><a href="../reference/select.html">select(mtcars, contains("am"), contains("FOO"), contains("vs"))</a></code> now returns again both <code>am</code> and <code>vs</code> columns like in dplyr 0.4.3 (#2275, #2289, @r2evans).</p></li>
<li><p>Select helpers now throw an error if called when no variables have been set (#2452)</p></li>
<li><p>Helper functions in <code><a href="../reference/select.html">select()</a></code> (and related verbs) are now evaluated in a context where column names do not exist (#2184).</p></li>
</ul>
</div>
<div id="other" class="section level3">
<h3 class="hasAnchor">
<a href="#other" class="anchor"></a>Other</h3>
<ul>
<li><p><code><a href="../reference/recode.html">recode()</a></code>, <code><a href="../reference/case_when.html">case_when()</a></code> and <code><a href="../reference/coalesce.html">coalesce()</a></code> now support splicing of arguments with rlang’s <code>!!!</code> operator.</p></li>
<li><p><code><a href="../reference/tally.html">count()</a></code> now preserves the grouping of its input (#2021).</p></li>
<li><p><code><a href="../reference/distinct.html">distinct()</a></code> no longer duplicates variables (#2001).</p></li>
<li><p>Empty <code><a href="../reference/distinct.html">distinct()</a></code> with a grouped data frame works the same way as an empty <code><a href="../reference/distinct.html">distinct()</a></code> on an ungrouped data frame, namely it uses all variables (#2476).</p></li>
<li><p><code><a href="../reference/copy_to.html">copy_to()</a></code> now returns it’s output invisibly (since you’re often just calling for the side-effect).</p></li>
<li><p><code><a href="../reference/filter.html">filter()</a></code> and <code><a href="../reference/lead-lag.html">lag()</a></code> throw informative error if used with ts objects (#2219)</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> recycles list columns of length 1 (#2171).</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> gives better error message when attempting to add a non-vector column (#2319), or attempting to remove a column with <code>NULL</code> (#2187, #2439).</p></li>
<li><p><code><a href="../reference/summarise.html">summarise()</a></code> now correctly evaluates newly created factors (#2217), and can create ordered factors (#2200).</p></li>
<li><p>Ungrouped <code><a href="../reference/summarise.html">summarise()</a></code> uses summary variables correctly (#2404, #2453).</p></li>
<li><p>Grouped <code><a href="../reference/summarise.html">summarise()</a></code> no longer converts character <code>NA</code> to empty strings (#1839).</p></li>
</ul>
</div>
</div>
<div id="combining-and-comparing" class="section level2">
<h2 class="hasAnchor">
<a href="#combining-and-comparing" class="anchor"></a>Combining and comparing</h2>
<ul>
<li><p><code><a href="../reference/all_equal.html">all_equal()</a></code> now reports multiple problems as a character vector (#1819, #2442).</p></li>
<li><p><code><a href="../reference/all_equal.html">all_equal()</a></code> checks that factor levels are equal (#2440, #2442).</p></li>
<li><p><code><a href="../reference/bind.html">bind_rows()</a></code> and <code><a href="../reference/bind.html">bind_cols()</a></code> give an error for database tables (#2373).</p></li>
<li><p><code><a href="../reference/bind.html">bind_rows()</a></code> works correctly with <code>NULL</code> arguments and an <code>.id</code> argument (#2056), and also for zero-column data frames (#2175).</p></li>
<li><p>Breaking change: <code><a href="../reference/bind.html">bind_rows()</a></code> and <code><a href="../reference/bind.html">combine()</a></code> are more strict when coercing. Logical values are no longer coerced to integer and numeric. Date, POSIXct and other integer or double-based classes are no longer coerced to integer or double as there is chance of attributes or information being lost (#2209, @zeehio).</p></li>
<li><p><code><a href="../reference/bind.html">bind_cols()</a></code> now calls <code>tibble::repair_names()</code> to ensure that all names are unique (#2248).</p></li>
<li><p><code><a href="../reference/bind.html">bind_cols()</a></code> handles empty argument list (#2048).</p></li>
<li><p><code><a href="../reference/bind.html">bind_cols()</a></code> better handles <code>NULL</code> inputs (#2303, #2443).</p></li>
<li><p><code><a href="../reference/bind.html">bind_rows()</a></code> explicitly rejects columns containing data frames (#2015, #2446).</p></li>
<li><p><code><a href="../reference/bind.html">bind_rows()</a></code> and <code><a href="../reference/bind.html">bind_cols()</a></code> now accept vectors. They are treated as rows by the former and columns by the latter. Rows require inner names like <code>c(col1 = 1, col2 = 2)</code>, while columns require outer names: <code>col1 = c(1, 2)</code>. Lists are still treated as data frames but can be spliced explicitly with <code>!!!</code>, e.g. <code><a href="../reference/bind.html">bind_rows(!!! x)</a></code> (#1676).</p></li>
<li><p>After a period of deprecation, <code><a href="../reference/bind.html">rbind_list()</a></code> and <code><a href="../reference/bind.html">rbind_all()</a></code> have been removed from the package. Please use <code><a href="../reference/bind.html">bind_rows()</a></code> instead.</p></li>
<li><p><code><a href="../reference/bind.html">combine()</a></code> accepts <code>NA</code> values (#2203, @zeehio)</p></li>
<li><p><code><a href="../reference/bind.html">combine()</a></code> and <code><a href="../reference/bind.html">bind_rows()</a></code> with character and factor types now always warn about the coercion to character (#2317, @zeehio)</p></li>
<li><p><code><a href="../reference/bind.html">combine()</a></code> and <code><a href="../reference/bind.html">bind_rows()</a></code> accept <code>difftime</code> objects.</p></li>
<li><p><code>mutate</code> coerces results from grouped dataframes accepting combinable data types (such as <code>integer</code> and <code>numeric</code>). (#1892, @zeehio)</p></li>
<li><p><code>tbl_df</code> gains <code>rbind()</code> and <code>cbind()</code> methods that call <code><a href="../reference/bind.html">bind_rows()</a></code> and <code><a href="../reference/bind.html">bind_cols()</a></code> respectively (#2138)</p></li>
</ul>
</div>
<div id="vector-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#vector-functions" class="anchor"></a>Vector functions</h2>
<ul>
<li><p><code>%in%</code> gets new hybrid handler (#126).</p></li>
<li><p><code><a href="../reference/between.html">between()</a></code> returns NA if <code>left</code> or <code>right</code> is <code>NA</code> (fixes #2562).</p></li>
<li><p><code><a href="../reference/case_when.html">case_when()</a></code> supports <code>NA</code> values (#2000, @tjmahr).</p></li>
<li><p><code><a href="../reference/nth.html">first()</a></code>, <code><a href="../reference/nth.html">last()</a></code>, and <code><a href="../reference/nth.html">nth()</a></code> have better default values for factor, Dates, POSIXct, and data frame inputs (#2029).</p></li>
<li><p>Fixed segmentation faults in hybrid evaluation of <code><a href="../reference/nth.html">first()</a></code>, <code><a href="../reference/nth.html">last()</a></code>, <code><a href="../reference/nth.html">nth()</a></code>, <code><a href="../reference/lead-lag.html">lead()</a></code>, and <code><a href="../reference/lead-lag.html">lag()</a></code>. These functions now always fall back to the R implementation if called with arguments that the hybrid evaluator cannot handle (#948, #1980).</p></li>
<li><p><code><a href="../reference/n_distinct.html">n_distinct()</a></code> gets larger hash tables given slightly better performance (#977).</p></li>
<li><p><code><a href="../reference/nth.html">nth()</a></code> and <code><a href="../reference/ranking.html">ntile()</a></code> are more careful about proper data types of their return values (#2306).</p></li>
<li><p><code><a href="../reference/ranking.html">ntile()</a></code> ignores <code>NA</code> when computing group membership (#2564).</p></li>
<li><p><code><a href="../reference/lead-lag.html">lag()</a></code> enforces integer <code>n</code> (#2162, @kevinushey).</p></li>
<li><p>hybrid <code>min()</code> and <code>max()</code> now always return a <code>numeric</code> and work correctly in edge cases (empty input, all <code>NA</code>, …) (#2305, #2436).</p></li>
<li><p><code><a href="../reference/ranking.html">min_rank("string")</a></code> no longer segfaults in hybrid evaluation (#2279, #2444).</p></li>
<li><p><code><a href="../reference/recode.html">recode()</a></code> can now recode a factor to other types (#2268)</p></li>
<li><p><code><a href="../reference/recode.html">recode()</a></code> gains <code>.dots</code> argument to support passing replacements as list (#2110, @jlegewie).</p></li>
</ul>
</div>
<div id="other-minor-changes-and-bug-fixes" class="section level2">
<h2 class="hasAnchor">
<a href="#other-minor-changes-and-bug-fixes" class="anchor"></a>Other minor changes and bug fixes</h2>
<ul>
<li><p>Many error messages are more helpful by referring to a column name or a position in the argument list (#2448).</p></li>
<li><p>New <code><a href="../reference/grouped_df.html">is_grouped_df()</a></code> alias to <code><a href="../reference/grouped_df.html">is.grouped_df()</a></code>.</p></li>
<li><p><code><a href="../reference/tbl_vars.html">tbl_vars()</a></code> now has a <code>group_vars</code> argument set to <code>TRUE</code> by default. If <code>FALSE</code>, group variables are not returned.</p></li>
<li><p>Fixed segmentation fault after calling <code><a href="../reference/select.html">rename()</a></code> on an invalid grouped data frame (#2031).</p></li>
<li><p><code><a href="../reference/select_vars.html">rename_vars()</a></code> gains a <code>strict</code> argument to control if an error is thrown when you try and rename a variable that doesn’t exist.</p></li>
<li><p>Fixed undefined behavior for <code><a href="../reference/slice.html">slice()</a></code> on a zero-column data frame (#2490).</p></li>
<li><p>Fixed very rare case of false match during join (#2515).</p></li>
<li><p>Restricted workaround for <code>match()</code> to R 3.3.0. (#1858).</p></li>
<li><p>dplyr now warns on load when the version of R or Rcpp during installation is different to the currently installed version (#2514).</p></li>
<li><p>Fixed improper reuse of attributes when creating a list column in <code><a href="../reference/summarise.html">summarise()</a></code> and perhaps <code><a href="../reference/mutate.html">mutate()</a></code> (#2231).</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> and <code><a href="../reference/summarise.html">summarise()</a></code> always strip the <code>names</code> attribute from new or updated columns, even for ungrouped operations (#1689).</p></li>
<li><p>Fixed rare error that could lead to a segmentation fault in <code><a href="../reference/all_equal.html">all_equal(ignore_col_order = FALSE)</a></code> (#2502).</p></li>
<li><p>The “dim” and “dimnames” attributes are always stripped when copying a vector (#1918, #2049).</p></li>
<li><p><code>grouped_df</code> is registered officially as an S3 class. This makes it easier to use with S4 (#2276, , @joranE).</p></li>
<li><p>Makeflags uses PKG_CPPFLAGS for defining preprocessor macros.</p></li>
<li><p>astyle formatting for C++ code, tested but not changed as part of the tests (#2086, #2103).</p></li>
<li><p>Update RStudio project settings to install tests (#1952).</p></li>
<li><p>Using <code>Rcpp::interfaces()</code> to register C callable interfaces, and registering all native exported functions via <code>R_registerRoutines()</code> and <code>useDynLib(.registration = TRUE)</code> (#2146).</p></li>
</ul>
</div>
</div>
    <div id="dplyr-0-5-0" class="section level1">
<h1 class="hasAnchor">
<a href="#dplyr-0-5-0" class="anchor"></a>dplyr 0.5.0</h1>
<div id="breaking-changes" class="section level2">
<h2 class="hasAnchor">
<a href="#breaking-changes" class="anchor"></a>Breaking changes</h2>
<div id="existing-functions" class="section level3">
<h3 class="hasAnchor">
<a href="#existing-functions" class="anchor"></a>Existing functions</h3>
<ul>
<li><p><code><a href="../reference/arrange.html">arrange()</a></code> once again ignores grouping (#1206).</p></li>
<li><p><code><a href="../reference/distinct.html">distinct()</a></code> now only keeps the distinct variables. If you want to return all variables (using the first row for non-distinct values) use <code>.keep_all = TRUE</code> (#1110). For SQL sources, <code>.keep_all = FALSE</code> is implemented using <code>GROUP BY</code>, and <code>.keep_all = TRUE</code> raises an error (#1937, #1942, @krlmlr). (The default behaviour of using all variables when none are specified remains - this note only applies if you select some variables).</p></li>
<li><p>The select helper functions <code><a href="../reference/select_helpers.html">starts_with()</a></code>, <code><a href="../reference/select_helpers.html">ends_with()</a></code> etc are now real exported functions. This means that you’ll need to import those functions if you’re using from a package where dplyr is not attached. i.e. <code>dplyr::select(mtcars, starts_with("m"))</code> used to work, but now you’ll need <code>dplyr::select(mtcars, dplyr::starts_with("m"))</code>.</p></li>
</ul>
</div>
<div id="deprecated-and-defunct-functions" class="section level3">
<h3 class="hasAnchor">
<a href="#deprecated-and-defunct-functions" class="anchor"></a>Deprecated and defunct functions</h3>
<ul>
<li><p>The long deprecated <code>chain()</code>, <code>chain_q()</code> and <code>%.%</code> have been removed. Please use <code>%&gt;%</code> instead.</p></li>
<li><p><code><a href="../reference/id.html">id()</a></code> has been deprecated. Please use <code><a href="../reference/group_indices.html">group_indices()</a></code> instead (#808).</p></li>
<li><p><code><a href="../reference/bind.html">rbind_all()</a></code> and <code><a href="../reference/bind.html">rbind_list()</a></code> are formally deprecated. Please use <code><a href="../reference/bind.html">bind_rows()</a></code> instead (#803).</p></li>
<li><p>Outdated benchmarking demos have been removed (#1487).</p></li>
<li><p>Code related to starting and signalling clusters has been moved out to <a href="http://github.com/hadley/multidplyr">multidplyr</a>.</p></li>
</ul>
</div>
</div>
<div id="new-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#new-functions" class="anchor"></a>New functions</h2>
<ul>
<li><p><code><a href="../reference/coalesce.html">coalesce()</a></code> finds the first non-missing value from a set of vectors. (#1666, thanks to @krlmlr for initial implementation).</p></li>
<li><p><code><a href="../reference/case_when.html">case_when()</a></code> is a general vectorised if + else if (#631).</p></li>
<li><p><code><a href="../reference/if_else.html">if_else()</a></code> is a vectorised if statement: it’s a stricter (type-safe), faster, and more predictable version of <code>ifelse()</code>. In SQL it is translated to a <code>CASE</code> statement.</p></li>
<li><p><code><a href="../reference/na_if.html">na_if()</a></code> makes it easy to replace a certain value with an <code>NA</code> (#1707). In SQL it is translated to <code>NULL_IF</code>.</p></li>
<li><p><code><a href="../reference/near.html">near(x, y)</a></code> is a helper for <code>abs(x - y) &lt; tol</code> (#1607).</p></li>
<li><p><code><a href="../reference/recode.html">recode()</a></code> is vectorised equivalent to <code>switch()</code> (#1710).</p></li>
<li><p><code><a href="../reference/setops.html">union_all()</a></code> method. Maps to <code>UNION ALL</code> for SQL sources, <code><a href="../reference/bind.html">bind_rows()</a></code> for data frames/tbl_dfs, and <code><a href="../reference/bind.html">combine()</a></code> for vectors (#1045).</p></li>
<li><p>A new family of functions replace <code><a href="../reference/summarise_each.html">summarise_each()</a></code> and <code><a href="../reference/summarise_each.html">mutate_each()</a></code> (which will thus be deprecated in a future release). <code><a href="../reference/summarise_all.html">summarise_all()</a></code> and <code><a href="../reference/summarise_all.html">mutate_all()</a></code> apply a function to all columns while <code><a href="../reference/summarise_all.html">summarise_at()</a></code> and <code><a href="../reference/summarise_all.html">mutate_at()</a></code> operate on a subset of columns. These columuns are selected with either a character vector of columns names, a numeric vector of column positions, or a column specification with <code><a href="../reference/select.html">select()</a></code> semantics generated by the new <code>columns()</code> helper. In addition, <code><a href="../reference/summarise_all.html">summarise_if()</a></code> and <code><a href="../reference/summarise_all.html">mutate_if()</a></code> take a predicate function or a logical vector (these verbs currently require local sources). All these functions can now take ordinary functions instead of a list of functions generated by <code><a href="../reference/funs.html">funs()</a></code> (though this is only useful for local sources). (#1845, @lionel-)</p></li>
<li><p><code><a href="../reference/select_all.html">select_if()</a></code> lets you select columns with a predicate function. Only compatible with local sources. (#497, #1569, @lionel-)</p></li>
</ul>
</div>
<div id="local-backends" class="section level2">
<h2 class="hasAnchor">
<a href="#local-backends" class="anchor"></a>Local backends</h2>
<div id="dtplyr" class="section level3">
<h3 class="hasAnchor">
<a href="#dtplyr" class="anchor"></a>dtplyr</h3>
<p>All data table related code has been separated out in to a new dtplyr package. This decouples the development of the data.table interface from the development of the dplyr package. If both data.table and dplyr are loaded, you’ll get a message reminding you to load dtplyr.</p>
</div>
<div id="tibble" class="section level3">
<h3 class="hasAnchor">
<a href="#tibble" class="anchor"></a>Tibble</h3>
<p>Functions related to the creation and coercion of <code>tbl_df</code>s, now live in their own package: <a href="http://blog.rstudio.org/2016/03/24/tibble-1-0-0/">tibble</a>. See <code><a href="../articles/tibble.html">vignette("tibble")</a></code> for more details.</p>
<ul>
<li><p><code>$</code> and <code>[[</code> methods that never do partial matching (#1504), and throw an error if the variable does not exist.</p></li>
<li><p><code><a href="../reference/all_equal.html">all_equal()</a></code> allows to compare data frames ignoring row and column order, and optionally ignoring minor differences in type (e.g. int vs. double) (#821). The test handles the case where the df has 0 columns (#1506). The test fails fails when convert is <code>FALSE</code> and types don’t match (#1484).</p></li>
<li><p><code><a href="../reference/all_equal.html">all_equal()</a></code> shows better error message when comparing raw values or when types are incompatible and <code>convert = TRUE</code> (#1820, @krlmlr).</p></li>
<li><p><code><a href="../reference/reexports.html">add_row()</a></code> makes it easy to add a new row to data frame (#1021)</p></li>
<li><p><code><a href="../reference/reexports.html">as_data_frame()</a></code> is now an S3 generic with methods for lists (the old <code><a href="../reference/reexports.html">as_data_frame()</a></code>), data frames (trivial), and matrices (with efficient C++ implementation) (#876). It no longer strips subclasses.</p></li>
<li><p>The internals of <code><a href="../reference/reexports.html">data_frame()</a></code> and <code><a href="../reference/reexports.html">as_data_frame()</a></code> have been aligned, so <code><a href="../reference/reexports.html">as_data_frame()</a></code> will now automatically recycle length-1 vectors. Both functions give more informative error messages if you attempting to create an invalid data frame. You can no longer create a data frame with duplicated names (#820). Both check for <code>POSIXlt</code> columns, and tell you to use <code>POSIXct</code> instead (#813).</p></li>
<li><p><code><a href="../reference/reexports.html">frame_data()</a></code> properly constructs rectangular tables (#1377, @kevinushey), and supports list-cols.</p></li>
<li><p><code><a href="../reference/reexports.html">glimpse()</a></code> is now a generic. The default method dispatches to <code>str()</code> (#1325). It now (invisibly) returns its first argument (#1570).</p></li>
<li><p><code><a href="../reference/reexports.html">lst()</a></code> and <code><a href="../reference/reexports.html">lst_()</a></code> which create lists in the same way that <code><a href="../reference/reexports.html">data_frame()</a></code> and <code><a href="../reference/reexports.html">data_frame_()</a></code> create data frames (#1290).</p></li>
<li><p><code>print.tbl_df()</code> is considerably faster if you have very wide data frames. It will now also only list the first 100 additional variables not already on screen - control this with the new <code>n_extra</code> parameter to <code>print()</code> (#1161). When printing a grouped data frame the number of groups is now printed with thousands separators (#1398). The type of list columns is correctly printed (#1379)</p></li>
<li><p>Package includes <code>setOldClass(c("tbl_df", "tbl", "data.frame"))</code> to help with S4 dispatch (#969).</p></li>
<li><p><code>tbl_df</code> automatically generates column names (#1606).</p></li>
</ul>
</div>
<div id="tbl_cube" class="section level3">
<h3 class="hasAnchor">
<a href="#tbl_cube" class="anchor"></a>tbl_cube</h3>
<ul>
<li><p>new <code><a href="../reference/as.table.tbl_cube.html">as_data_frame.tbl_cube()</a></code> (#1563, @krlmlr).</p></li>
<li><p><code>tbl_cube</code>s are now constructed correctly from data frames, duplicate dimension values are detected, missing dimension values are filled with <code>NA</code>. The construction from data frames now guesses the measure variables by default, and allows specification of dimension and/or measure variables (#1568, @krlmlr).</p></li>
<li><p>Swap order of <code>dim_names</code> and <code>met_name</code> arguments in <code>as.tbl_cube</code> (for <code>array</code>, <code>table</code> and <code>matrix</code>) for consistency with <code>tbl_cube</code> and <code>as.tbl_cube.data.frame</code>. Also, the <code>met_name</code> argument to <code>as.tbl_cube.table</code> now defaults to <code>"Freq"</code> for consistency with <code>as.data.frame.table</code> (@krlmlr, #1374).</p></li>
</ul>
</div>
</div>
<div id="remote-backends" class="section level2">
<h2 class="hasAnchor">
<a href="#remote-backends" class="anchor"></a>Remote backends</h2>
<ul>
<li><p><code><a href="../reference/reexports.html">as_data_frame()</a></code> on SQL sources now returns all rows (#1752, #1821, @krlmlr).</p></li>
<li><p><code><a href="../reference/compute.html">compute()</a></code> gets new parameters <code>indexes</code> and <code>unique_indexes</code> that make it easier to add indexes (#1499, @krlmlr).</p></li>
<li><p><code><a href="../reference/backend_dbplyr.html">db_explain()</a></code> gains a default method for DBIConnections (#1177).</p></li>
<li><p>The backend testing system has been improved. This lead to the removal of <code>temp_srcs()</code>. In the unlikely event that you were using this function, you can instead use <code>test_register_src()</code>, <code>test_load()</code>, and <code>test_frame()</code>.</p></li>
<li><p>You can now use <code><a href="../reference/join.html">right_join()</a></code> and <code><a href="../reference/join.html">full_join()</a></code> with remote tables (#1172).</p></li>
</ul>
<div id="sqlite" class="section level3">
<h3 class="hasAnchor">
<a href="#sqlite" class="anchor"></a>SQLite</h3>
<ul>
<li><p><code>src_memdb()</code> is a session-local in-memory SQLite database. <code>memdb_frame()</code> works like <code><a href="../reference/reexports.html">data_frame()</a></code>, but creates a new table in that database.</p></li>
<li><p><code><a href="../reference/src_dbi.html">src_sqlite()</a></code> now uses a stricter quoting character, <code>`</code>, instead of <code>"</code>. SQLite “helpfully” will convert <code>"x"</code> into a string if there is no identifier called x in the current scope (#1426).</p></li>
<li><p><code><a href="../reference/src_dbi.html">src_sqlite()</a></code> throws errors if you try and use it with window functions (#907).</p></li>
</ul>
</div>
<div id="sql-translation" class="section level3">
<h3 class="hasAnchor">
<a href="#sql-translation" class="anchor"></a>SQL translation</h3>
<ul>
<li><p><code>filter.tbl_sql()</code> now puts parens around each argument (#934).</p></li>
<li><p>Unary <code>-</code> is better translated (#1002).</p></li>
<li><p><code>escape.POSIXt()</code> method makes it easier to use date times. The date is rendered in ISO 8601 format in UTC, which should work in most databases (#857).</p></li>
<li><p><code>is.na()</code> gets a missing space (#1695).</p></li>
<li><p><code>if</code>, <code>is.na()</code>, and <code>is.null()</code> get extra parens to make precendence more clear (#1695).</p></li>
<li><p><code>pmin()</code> and <code>pmax()</code> are translated to <code>MIN()</code> and <code>MAX()</code> (#1711).</p></li>
<li>
<p>Window functions:</p>
<ul>
<li><p>Work on ungrouped data (#1061).</p></li>
<li><p>Warning if order is not set on cumulative window functions.</p></li>
<li><p>Multiple partitions or ordering variables in windowed functions no longer generate extra parentheses, so should work for more databases (#1060)</p></li>
</ul>
</li>
</ul>
</div>
<div id="internals" class="section level3">
<h3 class="hasAnchor">
<a href="#internals" class="anchor"></a>Internals</h3>
<p>This version includes an almost total rewrite of how dplyr verbs are translated into SQL. Previously, I used a rather ad-hoc approach, which tried to guess when a new subquery was needed. Unfortunately this approach was fraught with bugs, so in this version I’ve implemented a much richer internal data model. Now there is a three step process:</p>
<ol>
<li><p>When applied to a <code>tbl_lazy</code>, each dplyr verb captures its inputs and stores in a <code>op</code> (short for operation) object.</p></li>
<li><p><code>sql_build()</code> iterates through the operations building to build up an object that represents a SQL query. These objects are convenient for testing as they are lists, and are backend agnostics.</p></li>
<li><p><code>sql_render()</code> iterates through the queries and generates the SQL, using generics (like <code><a href="../reference/backend_dbplyr.html">sql_select()</a></code>) that can vary based on the backend.</p></li>
</ol>
<p>In the short-term, this increased abstraction is likely to lead to some minor performance decreases, but the chance of dplyr generating correct SQL is much much higher. In the long-term, these abstractions will make it possible to write a query optimiser/compiler in dplyr, which would make it possible to generate much more succinct queries.</p>
<p>If you have written a dplyr backend, you’ll need to make some minor changes to your package:</p>
<ul>
<li><p><code><a href="../reference/backend_dbplyr.html">sql_join()</a></code> has been considerably simplified - it is now only responsible for generating the join query, not for generating the intermediate selects that rename the variable. Similarly for <code><a href="../reference/backend_dbplyr.html">sql_semi_join()</a></code>. If you’ve provided new methods in your backend, you’ll need to rewrite.</p></li>
<li><p><code>select_query()</code> gains a distinct argument which is used for generating queries for <code><a href="../reference/distinct.html">distinct()</a></code>. It loses the <code>offset</code> argument which was never used (and hence never tested).</p></li>
<li><p><code>src_translate_env()</code> has been replaced by <code><a href="../reference/backend_dbplyr.html">sql_translate_env()</a></code> which should have methods for the connection object.</p></li>
</ul>
<p>There were two other tweaks to the exported API, but these are less likely to affect anyone.</p>
<ul>
<li><p><code>translate_sql()</code> and <code>partial_eval()</code> got a new API: now use connection + variable names, rather than a <code>tbl</code>. This makes testing considerably easier. <code>translate_sql_q()</code> has been renamed to <code>translate_sql_()</code>.</p></li>
<li><p>Also note that the sql generation generics now have a default method, instead methods for DBIConnection and NULL.</p></li>
</ul>
</div>
</div>
<div id="minor-improvements-and-bug-fixes" class="section level2">
<h2 class="hasAnchor">
<a href="#minor-improvements-and-bug-fixes" class="anchor"></a>Minor improvements and bug fixes</h2>
<div id="single-table-verbs" class="section level3">
<h3 class="hasAnchor">
<a href="#single-table-verbs" class="anchor"></a>Single table verbs</h3>
<ul>
<li><p>Avoiding segfaults in presence of <code>raw</code> columns (#1803, #1817, @krlmlr).</p></li>
<li><p><code><a href="../reference/arrange.html">arrange()</a></code> fails gracefully on list columns (#1489) and matrices (#1870, #1945, @krlmlr).</p></li>
<li><p><code><a href="../reference/tally.html">count()</a></code> now adds additional grouping variables, rather than overriding existing (#1703). <code><a href="../reference/tally.html">tally()</a></code> and <code><a href="../reference/tally.html">count()</a></code> can now count a variable called <code>n</code> (#1633). Weighted <code><a href="../reference/tally.html">count()</a></code>/<code><a href="../reference/tally.html">tally()</a></code> ignore <code>NA</code>s (#1145).</p></li>
<li><p>The progress bar in <code><a href="../reference/do.html">do()</a></code> is now updated at most 20 times per second, avoiding uneccessary redraws (#1734, @mkuhn)</p></li>
<li><p><code><a href="../reference/distinct.html">distinct()</a></code> doesn’t crash when given a 0-column data frame (#1437).</p></li>
<li><p><code><a href="../reference/filter.html">filter()</a></code> throws an error if you supply an named arguments. This is usually a type: <code><a href="../reference/filter.html">filter(df, x = 1)</a></code> instead of <code><a href="../reference/filter.html">filter(df, x == 1)</a></code> (#1529).</p></li>
<li><p><code><a href="../reference/summarise.html">summarise()</a></code> correctly coerces factors with different levels (#1678), handles min/max of already summarised variable (#1622), and supports data frames as columns (#1425).</p></li>
<li>
<p><code><a href="../reference/select.html">select()</a></code> now informs you that it adds missing grouping variables (#1511). It works even if the grouping variable has a non-syntactic name (#1138). Negating a failed match (e.g. <code><a href="../reference/select.html">select(mtcars, -contains("x"))</a></code>) returns all columns, instead of no columns (#1176)</p>
<p>The <code><a href="../reference/select.html">select()</a></code> helpers are now exported and have their own documentation (#1410). <code><a href="../reference/select_helpers.html">one_of()</a></code> gives a useful error message if variables names are not found in data frame (#1407).</p>
</li>
<li><p>The naming behaviour of <code><a href="../reference/summarise_each.html">summarise_each()</a></code> and <code><a href="../reference/summarise_each.html">mutate_each()</a></code> has been tweaked so that you can force inclusion of both the function and the variable name: <code><a href="../reference/summarise_each.html">summarise_each(mtcars, funs(mean = mean), everything())</a></code> (#442).</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> handles factors that are all <code>NA</code> (#1645), or have different levels in different groups (#1414). It disambiguates <code>NA</code> and <code>NaN</code> (#1448), and silently promotes groups that only contain <code>NA</code> (#1463). It deep copies data in list columns (#1643), and correctly fails on incompatible columns (#1641). <code><a href="../reference/mutate.html">mutate()</a></code> on a grouped data no longer droups grouping attributes (#1120). <code><a href="../reference/rowwise.html">rowwise()</a></code> mutate gives expected results (#1381).</p></li>
<li><p><code><a href="../reference/select_helpers.html">one_of()</a></code> tolerates unknown variables in <code>vars</code>, but warns (#1848, @jennybc).</p></li>
<li><p><code>print.grouped_df()</code> passes on <code>...</code> to <code>print()</code> (#1893).</p></li>
<li><p><code><a href="../reference/slice.html">slice()</a></code> correctly handles grouped attributes (#1405).</p></li>
<li><p><code><a href="../reference/group_by.html">ungroup()</a></code> generic gains <code>...</code> (#922).</p></li>
</ul>
</div>
<div id="dual-table-verbs" class="section level3">
<h3 class="hasAnchor">
<a href="#dual-table-verbs" class="anchor"></a>Dual table verbs</h3>
<ul>
<li><p><code><a href="../reference/bind.html">bind_cols()</a></code> matches the behaviour of <code><a href="../reference/bind.html">bind_rows()</a></code> and ignores <code>NULL</code> inputs (#1148). It also handles <code>POSIXct</code>s with integer base type (#1402).</p></li>
<li><p><code><a href="../reference/bind.html">bind_rows()</a></code> handles 0-length named lists (#1515), promotes factors to characters (#1538), and warns when binding factor and character (#1485). bind_rows()` is more flexible in the way it can accept data frames, lists, list of data frames, and list of lists (#1389).</p></li>
<li><p><code><a href="../reference/bind.html">bind_rows()</a></code> rejects <code>POSIXlt</code> columns (#1875, @krlmlr).</p></li>
<li><p>Both <code><a href="../reference/bind.html">bind_cols()</a></code> and <code><a href="../reference/bind.html">bind_rows()</a></code> infer classes and grouping information from the first data frame (#1692).</p></li>
<li><p><code>rbind()</code> and <code>cbind()</code> get <code><a href="../reference/grouped_df.html">grouped_df()</a></code> methods that make it harder to<br>
create corrupt data frames (#1385). You should still prefer <code><a href="../reference/bind.html">bind_rows()</a></code> and <code><a href="../reference/bind.html">bind_cols()</a></code>.</p></li>
<li><p>Joins now use correct class when joining on <code>POSIXct</code> columns (#1582, @joel23888), and consider time zones (#819). Joins handle a <code>by</code> that is empty (#1496), or has duplicates (#1192). Suffixes grow progressively to avoid creating repeated column names (#1460). Joins on string columns should be substantially faster (#1386). Extra attributes are ok if they are identical (#1636). Joins work correct when factor levels not equal (#1712, #1559), and anti and semi joins give correct result when by variable is a factor (#1571). A clear error message is given for joins where an explicit <code>by</code> contains unavailable columns (#1928, #1932, @krlmlr).</p></li>
<li><p><code><a href="../reference/join.html">inner_join()</a></code>, <code><a href="../reference/join.html">left_join()</a></code>, <code><a href="../reference/join.html">right_join()</a></code>, and <code><a href="../reference/join.html">full_join()</a></code> gain a <code>suffix</code> argument which allows you to control what suffix duplicated variable names recieve (#1296).</p></li>
<li><p>Set operations (<code><a href="../reference/setops.html">intersect()</a></code>, <code><a href="../reference/setops.html">union()</a></code> etc) respect coercion rules (#799). <code><a href="../reference/setops.html">setdiff()</a></code> handles factors with <code>NA</code> levels (#1526).</p></li>
<li><p>There were a number of fixes to enable joining of data frames that don’t have the same encoding of column names (#1513), including working around bug 16885 regarding <code>match()</code> in R 3.3.0 (#1806, #1810, @krlmlr).</p></li>
</ul>
</div>
<div id="vector-functions-1" class="section level3">
<h3 class="hasAnchor">
<a href="#vector-functions-1" class="anchor"></a>Vector functions</h3>
<ul>
<li><p><code><a href="../reference/bind.html">combine()</a></code> silently drops <code>NULL</code> inputs (#1596).</p></li>
<li><p>Hybrid <code><a href="../reference/cumall.html">cummean()</a></code> is more stable against floating point errors (#1387).</p></li>
<li><p>Hybrid <code><a href="../reference/lead-lag.html">lead()</a></code> and <code><a href="../reference/lead-lag.html">lag()</a></code> received a considerable overhaul. They are more careful about more complicated expressions (#1588), and falls back more readily to pure R evaluation (#1411). They behave correctly in <code><a href="../reference/summarise.html">summarise()</a></code> (#1434). and handle default values for string columns.</p></li>
<li><p>Hybrid <code>min()</code> and <code>max()</code> handle empty sets (#1481).</p></li>
<li><p><code><a href="../reference/n_distinct.html">n_distinct()</a></code> uses multiple arguments for data frames (#1084), falls back to R evaluation when needed (#1657), reverting decision made in (#567). Passing no arguments gives an error (#1957, #1959, @krlmlr).</p></li>
<li><p><code><a href="../reference/nth.html">nth()</a></code> now supports negative indices to select from end, e.g. <code><a href="../reference/nth.html">nth(x, -2)</a></code> selects the 2nd value from the end of <code>x</code> (#1584).</p></li>
<li><p><code><a href="../reference/top_n.html">top_n()</a></code> can now also select bottom <code>n</code> values by passing a negative value to <code>n</code> (#1008, #1352).</p></li>
<li><p>Hybrid evaluation leaves formulas untouched (#1447).</p></li>
</ul>
</div>
</div>
</div>
    <div id="dplyr-0-4-3" class="section level1">
<h1 class="hasAnchor">
<a href="#dplyr-0-4-3" class="anchor"></a>dplyr 0.4.3</h1>
<div id="improved-encoding-support" class="section level2">
<h2 class="hasAnchor">
<a href="#improved-encoding-support" class="anchor"></a>Improved encoding support</h2>
<p>Until now, dplyr’s support for non-UTF8 encodings has been rather shaky. This release brings a number of improvement to fix these problems: it’s probably not perfect, but should be a lot better than the previously version. This includes fixes to <code><a href="../reference/arrange.html">arrange()</a></code> (#1280), <code><a href="../reference/bind.html">bind_rows()</a></code> (#1265), <code><a href="../reference/distinct.html">distinct()</a></code> (#1179), and joins (#1315). <code>print.tbl_df()</code> also recieved a fix for strings with invalid encodings (#851).</p>
</div>
<div id="other-minor-improvements-and-bug-fixes" class="section level2">
<h2 class="hasAnchor">
<a href="#other-minor-improvements-and-bug-fixes" class="anchor"></a>Other minor improvements and bug fixes</h2>
<ul>
<li><p><code><a href="../reference/reexports.html">frame_data()</a></code> provides a means for constructing <code>data_frame</code>s using a simple row-wise language. (#1358, @kevinushey)</p></li>
<li><p><code>all.equal()</code> no longer runs all outputs together (#1130).</p></li>
<li><p><code><a href="../reference/reexports.html">as_data_frame()</a></code> gives better error message with NA column names (#1101).</p></li>
<li><p><code>[.tbl_df</code> is more careful about subsetting column names (#1245).</p></li>
<li><p><code><a href="../reference/arrange.html">arrange()</a></code> and <code><a href="../reference/mutate.html">mutate()</a></code> work on empty data frames (#1142).</p></li>
<li><p><code><a href="../reference/arrange.html">arrange()</a></code>, <code><a href="../reference/filter.html">filter()</a></code>, <code><a href="../reference/slice.html">slice()</a></code>, and <code><a href="../reference/summarise.html">summarise()</a></code> preserve data frame meta attributes (#1064).</p></li>
<li><p><code><a href="../reference/bind.html">bind_rows()</a></code> and <code><a href="../reference/bind.html">bind_cols()</a></code> accept lists (#1104): during initial data cleaning you no longer need to convert lists to data frames, but can instead feed them to <code><a href="../reference/bind.html">bind_rows()</a></code> directly.</p></li>
<li><p><code><a href="../reference/bind.html">bind_rows()</a></code> gains a <code>.id</code> argument. When supplied, it creates a new column that gives the name of each data frame (#1337, @lionel-).</p></li>
<li><p><code><a href="../reference/bind.html">bind_rows()</a></code> respects the <code>ordered</code> attribute of factors (#1112), and does better at comparing <code>POSIXct</code>s (#1125). The <code>tz</code> attribute is ignored when determining if two <code>POSIXct</code> vectors are comparable. If the <code>tz</code> of all inputs is the same, it’s used, otherwise its set to <code>UTC</code>.</p></li>
<li><p><code><a href="../reference/reexports.html">data_frame()</a></code> always produces a <code>tbl_df</code> (#1151, @kevinushey)</p></li>
<li><p><code><a href="../reference/filter.html">filter(x, TRUE, TRUE)</a></code> now just returns <code>x</code> (#1210), it doesn’t internally modify the first argument (#971), and it now works with rowwise data (#1099). It once again works with data tables (#906).</p></li>
<li><p><code><a href="../reference/reexports.html">glimpse()</a></code> also prints out the number of variables in addition to the number of observations (@ilarischeinin, #988).</p></li>
<li><p>Joins handles matrix columns better (#1230), and can join <code>Date</code> objects with heterogenous representations (some <code>Date</code>s are integers, while other are numeric). This also improves <code>all.equal()</code> (#1204).</p></li>
<li><p>Fixed <code><a href="../reference/ranking.html">percent_rank()</a></code> and <code><a href="../reference/ranking.html">cume_dist()</a></code> so that missing values no longer affect denominator (#1132).</p></li>
<li><p><code>print.tbl_df()</code> now displays the class for all variables, not just those that don’t fit on the screen (#1276). It also displays duplicated column names correctly (#1159).</p></li>
<li><p><code>print.grouped_df()</code> now tells you how many groups there are.</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> can set to <code>NULL</code> the first column (used to segfault, #1329) and it better protects intermediary results (avoiding random segfaults, #1231).</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> on grouped data handles the special case where for the first few groups, the result consists of a <code>logical</code> vector with only <code>NA</code>. This can happen when the condition of an <code>ifelse</code> is an all <code>NA</code> logical vector (#958).</p></li>
<li><p><code>mutate.rowwise_df()</code> handles factors (#886) and correctly handles 0-row inputs (#1300).</p></li>
<li><p><code><a href="../reference/n_distinct.html">n_distinct()</a></code> gains an <code>na_rm</code> argument (#1052).</p></li>
<li><p>The <code>Progress</code> bar used by <code><a href="../reference/do.html">do()</a></code> now respects global option <code>dplyr.show_progress</code> (default is TRUE) so you can turn it off globally (@jimhester #1264, #1226).</p></li>
<li><p><code><a href="../reference/summarise.html">summarise()</a></code> handles expressions that returning heterogenous outputs, e.g. <code>median()</code>, which that sometimes returns an integer, and other times a numeric (#893).</p></li>
<li><p><code><a href="../reference/slice.html">slice()</a></code> silently drops columns corresponding to an NA (#1235).</p></li>
<li><p><code>ungroup.rowwise_df()</code> gives a <code>tbl_df</code> (#936).</p></li>
<li><p>More explicit duplicated column name error message (#996).</p></li>
<li><p>When “,” is already being used as the decimal point (<code>getOption("OutDec")</code>), use “.” as the thousands separator when printing out formatted numbers (@ilarischeinin, #988).</p></li>
</ul>
</div>
<div id="databases-1" class="section level2">
<h2 class="hasAnchor">
<a href="#databases-1" class="anchor"></a>Databases</h2>
<ul>
<li><p><code>db_query_fields.SQLiteConnection</code> uses <code>build_sql</code> rather than <code>paste0</code> (#926, @NikNakk)</p></li>
<li><p>Improved handling of <code>log()</code> (#1330).</p></li>
<li><p><code><a href="../reference/n_distinct.html">n_distinct(x)</a></code> is translated to <code>COUNT(DISTINCT(x))</code> (@skparkes, #873).</p></li>
<li><p><code>print(n = Inf)</code> now works for remote sources (#1310).</p></li>
</ul>
</div>
<div id="hybrid-evaluation" class="section level2">
<h2 class="hasAnchor">
<a href="#hybrid-evaluation" class="anchor"></a>Hybrid evaluation</h2>
<ul>
<li><p>Hybrid evaluation does not take place for objects with a class (#1237).</p></li>
<li><p>Improved <code>$</code> handling (#1134).</p></li>
<li><p>Simplified code for <code><a href="../reference/lead-lag.html">lead()</a></code> and <code><a href="../reference/lead-lag.html">lag()</a></code> and make sure they work properly on factors (#955). Both repsect the <code>default</code> argument (#915).</p></li>
<li><p><code>mutate</code> can set to <code>NULL</code> the first column (used to segfault, #1329).</p></li>
<li><p><code>filter</code> on grouped data handles indices correctly (#880).</p></li>
<li><p><code>sum()</code> issues a warning about integer overflow (#1108).</p></li>
</ul>
</div>
</div>
    <div id="dplyr-0-4-2" class="section level1">
<h1 class="hasAnchor">
<a href="#dplyr-0-4-2" class="anchor"></a>dplyr 0.4.2</h1>
<p>This is a minor release containing fixes for a number of crashes and issues identified by R CMD CHECK. There is one new “feature”: dplyr no longer complains about unrecognised attributes, and instead just copies them over to the output.</p>
<ul>
<li><p><code><a href="../reference/lead-lag.html">lag()</a></code> and <code><a href="../reference/lead-lag.html">lead()</a></code> for grouped data were confused about indices and therefore produced wrong results (#925, #937). <code><a href="../reference/lead-lag.html">lag()</a></code> once again overrides <code><a href="../reference/lead-lag.html">lag()</a></code> instead of just the default method <code>lag.default()</code>. This is necesary due to changes in R CMD check. To use the lag function provided by another package, use <code>pkg::lag</code>.</p></li>
<li><p>Fixed a number of memory issues identified by valgrind.</p></li>
<li><p>Improved performance when working with large number of columns (#879).</p></li>
<li><p>Lists-cols that contain data frames now print a slightly nicer summary (#1147)</p></li>
<li><p>Set operations give more useful error message on incompatible data frames (#903).</p></li>
<li><p><code>all.equal()</code> gives the correct result when <code>ignore_row_order</code> is <code>TRUE</code> (#1065) and <code>all.equal()</code> correctly handles character missing values (#1095).</p></li>
<li><p><code><a href="../reference/bind.html">bind_cols()</a></code> always produces a <code>tbl_df</code> (#779).</p></li>
<li><p><code><a href="../reference/bind.html">bind_rows()</a></code> gains a test for a form of data frame corruption (#1074).</p></li>
<li><p><code><a href="../reference/bind.html">bind_rows()</a></code> and <code><a href="../reference/summarise.html">summarise()</a></code> now handles complex columns (#933).</p></li>
<li><p>Workaround for using the constructor of <code>DataFrame</code> on an unprotected object (#998)</p></li>
<li><p>Improved performance when working with large number of columns (#879).</p></li>
</ul>
</div>
    <div id="dplyr-0-4-1" class="section level1">
<h1 class="hasAnchor">
<a href="#dplyr-0-4-1" class="anchor"></a>dplyr 0.4.1</h1>
<ul>
<li>Don’t assume that RPostgreSQL is available.</li>
</ul>
</div>
    <div id="dplyr-0-4-0" class="section level1">
<h1 class="hasAnchor">
<a href="#dplyr-0-4-0" class="anchor"></a>dplyr 0.4.0</h1>
<div id="new-features" class="section level2">
<h2 class="hasAnchor">
<a href="#new-features" class="anchor"></a>New features</h2>
<ul>
<li><p><code><a href="../reference/add_rownames.html">add_rownames()</a></code> turns row names into an explicit variable (#639).</p></li>
<li><p><code><a href="../reference/reexports.html">as_data_frame()</a></code> efficiently coerces a list into a data frame (#749).</p></li>
<li><p><code><a href="../reference/bind.html">bind_rows()</a></code> and <code><a href="../reference/bind.html">bind_cols()</a></code> efficiently bind a list of data frames by row or column. <code><a href="../reference/bind.html">combine()</a></code> applies the same coercion rules to vectors (it works like <code>c()</code> or <code>unlist()</code> but is consistent with the <code><a href="../reference/bind.html">bind_rows()</a></code> rules).</p></li>
<li><p><code><a href="../reference/join.html">right_join()</a></code> (include all rows in <code>y</code>, and matching rows in <code>x</code>) and <code><a href="../reference/join.html">full_join()</a></code> (include all rows in <code>x</code> and <code>y</code>) complete the family of mutating joins (#96).</p></li>
<li><p><code><a href="../reference/group_indices.html">group_indices()</a></code> computes a unique integer id for each group (#771). It can be called on a grouped_df without any arguments or on a data frame with same arguments as <code><a href="../reference/group_by.html">group_by()</a></code>.</p></li>
</ul>
</div>
<div id="new-vignettes" class="section level2">
<h2 class="hasAnchor">
<a href="#new-vignettes" class="anchor"></a>New vignettes</h2>
<ul>
<li><p><code><a href="../articles/data_frames.html">vignette("data_frames")</a></code> describes dplyr functions that make it easier and faster to create and coerce data frames. It subsumes the old <code>memory</code> vignette.</p></li>
<li><p><code><a href="../articles/two-table.html">vignette("two-table")</a></code> describes how two-table verbs work in dplyr.</p></li>
</ul>
</div>
<div id="minor-improvements" class="section level2">
<h2 class="hasAnchor">
<a href="#minor-improvements" class="anchor"></a>Minor improvements</h2>
<ul>
<li><p><code><a href="../reference/reexports.html">data_frame()</a></code> (and <code><a href="../reference/reexports.html">as_data_frame()</a></code> &amp; <code><a href="../reference/tbl_df.html">tbl_df()</a></code>) now explicitly forbid columns that are data frames or matrices (#775). All columns must be either a 1d atomic vector or a 1d list.</p></li>
<li><p><code><a href="../reference/do.html">do()</a></code> uses lazyeval to correctly evaluate its arguments in the correct environment (#744), and new <code><a href="../reference/se-deprecated.html">do_()</a></code> is the SE equivalent of <code><a href="../reference/do.html">do()</a></code> (#718). You can modify grouped data in place: this is probably a bad idea but it’s sometimes convenient (#737). <code><a href="../reference/do.html">do()</a></code> on grouped data tables now passes in all columns (not all columns except grouping vars) (#735, thanks to @kismsu). <code><a href="../reference/do.html">do()</a></code> with database tables no longer potentially includes grouping variables twice (#673). Finally, <code><a href="../reference/do.html">do()</a></code> gives more consistent outputs when there are no rows or no groups (#625).</p></li>
<li><p><code><a href="../reference/nth.html">first()</a></code> and <code><a href="../reference/nth.html">last()</a></code> preserve factors, dates and times (#509).</p></li>
<li><p>Overhaul of single table verbs for data.table backend. They now all use a consistent (and simpler) code base. This ensures that (e.g.) <code><a href="../reference/n.html">n()</a></code> now works in all verbs (#579).</p></li>
<li><p>In <code>*_join()</code>, you can now name only those variables that are different between the two tables, e.g. <code><a href="../reference/join.html">inner_join(x, y, c("a", "b", "c" = "d"))</a></code> (#682). If non-join colums are the same, dplyr will add <code>.x</code> and <code>.y</code> suffixes to distinguish the source (#655).</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> handles complex vectors (#436) and forbids <code>POSIXlt</code> results (instead of crashing) (#670).</p></li>
<li><p><code><a href="../reference/select.html">select()</a></code> now implements a more sophisticated algorithm so if you’re doing multiples includes and excludes with and without names, you’re more likely to get what you expect (#644). You’ll also get a better error message if you supply an input that doesn’t resolve to an integer column position (#643).</p></li>
<li>
<p>Printing has recieved a number of small tweaks. All <code>print()</code> method methods invisibly return their input so you can interleave <code>print()</code> statements into a pipeline to see interim results. <code>print()</code> will column names of 0 row data frames (#652), and will never print more 20 rows (i.e. <code>options(dplyr.print_max)</code> is now 20), not 100 (#710). Row names are no never printed since no dplyr method is guaranteed to preserve them (#669).</p>
<p><code><a href="../reference/reexports.html">glimpse()</a></code> prints the number of observations (#692)</p>
<p><code><a href="../reference/reexports.html">type_sum()</a></code> gains a data frame method.</p>
</li>
<li><p><code><a href="../reference/summarise.html">summarise()</a></code> handles list output columns (#832)</p></li>
<li><p><code><a href="../reference/slice.html">slice()</a></code> works for data tables (#717). Documentation clarifies that slice can’t work with relational databases, and the examples show how to achieve the same results using <code><a href="../reference/filter.html">filter()</a></code> (#720).</p></li>
<li><p>dplyr now requires RSQLite &gt;= 1.0. This shouldn’t affect your code in any way (except that RSQLite now doesn’t need to be attached) but does simplify the internals (#622).</p></li>
<li>
<p>Functions that need to combine multiple results into a single column (e.g. <code><a href="../reference/join.html">join()</a></code>, <code><a href="../reference/bind.html">bind_rows()</a></code> and <code><a href="../reference/summarise.html">summarise()</a></code>) are more careful about coercion.</p>
<p>Joining factors with the same levels in the same order preserves the original levels (#675). Joining factors with non-identical levels generates a warning and coerces to character (#684). Joining a character to a factor (or vice versa) generates a warning and coerces to character. Avoid these warnings by ensuring your data is compatible before joining.</p>
<p><code><a href="../reference/bind.html">rbind_list()</a></code> will throw an error if you attempt to combine an integer and factor (#751). <code>rbind()</code>ing a column full of <code>NA</code>s is allowed and just collects the appropriate missing value for the column type being collected (#493).</p>
<p><code><a href="../reference/summarise.html">summarise()</a></code> is more careful about <code>NA</code>, e.g. the decision on the result type will be delayed until the first non NA value is returned (#599). It will complain about loss of precision coercions, which can happen for expressions that return integers for some groups and a doubles for others (#599).</p>
</li>
<li>
<p>A number of functions gained new or improved hybrid handlers: <code><a href="../reference/nth.html">first()</a></code>, <code><a href="../reference/nth.html">last()</a></code>, <code><a href="../reference/nth.html">nth()</a></code> (#626), <code><a href="../reference/lead-lag.html">lead()</a></code> &amp; <code><a href="../reference/lead-lag.html">lag()</a></code> (#683), <code>%in%</code> (#126). That means when you use these functions in a dplyr verb, we handle them in C++, rather than calling back to R, and hence improving performance.</p>
<p>Hybrid <code><a href="../reference/ranking.html">min_rank()</a></code> correctly handles <code>NaN</code> values (#726). Hybrid implementation of <code><a href="../reference/nth.html">nth()</a></code> falls back to R evaluation when <code>n</code> is not a length one integer or numeric, e.g. when it’s an expression (#734).</p>
<p>Hybrid <code><a href="../reference/ranking.html">dense_rank()</a></code>, <code><a href="../reference/ranking.html">min_rank()</a></code>, <code><a href="../reference/ranking.html">cume_dist()</a></code>, <code><a href="../reference/ranking.html">ntile()</a></code>, <code><a href="../reference/ranking.html">row_number()</a></code> and <code><a href="../reference/ranking.html">percent_rank()</a></code> now preserve NAs (#774)</p>
</li>
<li><p><code>filter</code> returns its input when it has no rows or no columns (#782).</p></li>
<li><p>Join functions keep attributes (e.g. time zone information) from the left argument for <code>POSIXct</code> and <code>Date</code> objects (#819), and only only warn once about each incompatibility (#798).</p></li>
</ul>
</div>
<div id="bug-fixes" class="section level2">
<h2 class="hasAnchor">
<a href="#bug-fixes" class="anchor"></a>Bug fixes</h2>
<ul>
<li><p><code>[.tbl_df</code> correctly computes row names for 0-column data frames, avoiding problems with xtable (#656). <code>[.grouped_df</code> will silently drop grouping if you don’t include the grouping columns (#733).</p></li>
<li><p><code><a href="../reference/reexports.html">data_frame()</a></code> now acts correctly if the first argument is a vector to be recycled. (#680 thanks @jimhester)</p></li>
<li><p><code>filter.data.table()</code> works if the table has a variable called “V1” (#615).</p></li>
<li><p><code>*_join()</code> keeps columns in original order (#684). Joining a factor to a character vector doesn’t segfault (#688). <code>*_join</code> functions can now deal with multiple encodings (#769), and correctly name results (#855).</p></li>
<li><p><code>*_join.data.table()</code> works when data.table isn’t attached (#786).</p></li>
<li><p><code><a href="../reference/group_by.html">group_by()</a></code> on a data table preserves original order of the rows (#623). <code><a href="../reference/group_by.html">group_by()</a></code> supports variables with more than 39 characters thanks to a fix in lazyeval (#705). It gives meaninful error message when a variable is not found in the data frame (#716).</p></li>
<li><p><code><a href="../reference/grouped_df.html">grouped_df()</a></code> requires <code>vars</code> to be a list of symbols (#665).</p></li>
<li><p><code>min(.,na.rm = TRUE)</code> works with <code>Date</code>s built on numeric vectors (#755)</p></li>
<li><p><code><a href="../reference/se-deprecated.html">rename_()</a></code> generic gets missing <code>.dots</code> argument (#708).</p></li>
<li><p><code><a href="../reference/ranking.html">row_number()</a></code>, <code><a href="../reference/ranking.html">min_rank()</a></code>, <code><a href="../reference/ranking.html">percent_rank()</a></code>, <code><a href="../reference/ranking.html">dense_rank()</a></code>, <code><a href="../reference/ranking.html">ntile()</a></code> and <code><a href="../reference/ranking.html">cume_dist()</a></code> handle data frames with 0 rows (#762). They all preserve missing values (#774). <code><a href="../reference/ranking.html">row_number()</a></code> doesn’t segfault when giving an external variable with the wrong number of variables (#781)</p></li>
<li><p><code>group_indices</code> handles the edge case when there are no variables (#867)</p></li>
</ul>
</div>
</div>
    <div id="dplyr-0-3-0-1" class="section level1">
<h1 class="hasAnchor">
<a href="#dplyr-0-3-0-1" class="anchor"></a>dplyr 0.3.0.1</h1>
<ul>
<li>Fixed problem with test script on Windows.</li>
</ul>
</div>
    <div id="dplyr-0-3" class="section level1">
<h1 class="hasAnchor">
<a href="#dplyr-0-3" class="anchor"></a>dplyr 0.3</h1>
<div id="new-functions-1" class="section level2">
<h2 class="hasAnchor">
<a href="#new-functions-1" class="anchor"></a>New functions</h2>
<ul>
<li><p><code><a href="../reference/between.html">between()</a></code> vector function efficiently determines if numeric values fall in a range, and is translated to special form for SQL (#503).</p></li>
<li><p><code><a href="../reference/tally.html">count()</a></code> makes it even easier to do (weighted) counts (#358).</p></li>
<li><p><code><a href="../reference/reexports.html">data_frame()</a></code> by @kevinushey is a nicer way of creating data frames. It never coerces column types (no more <code>stringsAsFactors = FALSE</code>!), never munges column names, and never adds row names. You can use previously defined columns to compute new columns (#376).</p></li>
<li><p><code><a href="../reference/distinct.html">distinct()</a></code> returns distinct (unique) rows of a tbl (#97). Supply additional variables to return the first row for each unique combination of variables.</p></li>
<li><p>Set operations, <code><a href="../reference/setops.html">intersect()</a></code>, <code><a href="../reference/setops.html">union()</a></code> and <code><a href="../reference/setops.html">setdiff()</a></code> now have methods for data frames, data tables and SQL database tables (#93). They pass their arguments down to the base functions, which will ensure they raise errors if you pass in two many arguments.</p></li>
<li><p>Joins (e.g. <code><a href="../reference/join.html">left_join()</a></code>, <code><a href="../reference/join.html">inner_join()</a></code>, <code><a href="../reference/join.html">semi_join()</a></code>, <code><a href="../reference/join.html">anti_join()</a></code>) now allow you to join on different variables in <code>x</code> and <code>y</code> tables by supplying a named vector to <code>by</code>. For example, <code>by = c("a" = "b")</code> joins <code>x.a</code> to <code>y.b</code>.</p></li>
<li><p><code><a href="../reference/group_size.html">n_groups()</a></code> function tells you how many groups in a tbl. It returns 1 for ungrouped data. (#477)</p></li>
<li><p><code><a href="../reference/mutate.html">transmute()</a></code> works like <code><a href="../reference/mutate.html">mutate()</a></code> but drops all variables that you didn’t explicitly refer to (#302).</p></li>
<li><p><code><a href="../reference/select.html">rename()</a></code> makes it easy to rename variables - it works similarly to <code><a href="../reference/select.html">select()</a></code> but it preserves columns that you didn’t otherwise touch.</p></li>
<li><p><code><a href="../reference/slice.html">slice()</a></code> allows you to selecting rows by position (#226). It includes positive integers, drops negative integers and you can use expression like <code><a href="../reference/n.html">n()</a></code>.</p></li>
</ul>
</div>
<div id="programming-with-dplyr-non-standard-evaluation" class="section level2">
<h2 class="hasAnchor">
<a href="#programming-with-dplyr-non-standard-evaluation" class="anchor"></a>Programming with dplyr (non-standard evaluation)</h2>
<ul>
<li><p>You can now program with dplyr - every function that does non-standard evaluation (NSE) has a standard evaluation (SE) version ending in <code>_</code>. This is powered by the new lazyeval package which provides all the tools needed to implement NSE consistently and correctly.</p></li>
<li><p>See <code><a href="../articles/nse.html">vignette("nse")</a></code> for full details.</p></li>
<li><p><code>regroup()</code> is deprecated. Please use the more flexible <code><a href="../reference/se-deprecated.html">group_by_()</a></code> instead.</p></li>
<li><p><code><a href="../reference/summarise_each.html">summarise_each_q()</a></code> and <code><a href="../reference/summarise_each.html">mutate_each_q()</a></code> are deprecated. Please use <code><a href="../reference/summarise_each.html">summarise_each_()</a></code> and <code><a href="../reference/summarise_each.html">mutate_each_()</a></code> instead.</p></li>
<li><p><code>funs_q</code> has been replaced with <code>funs_</code>.</p></li>
</ul>
</div>
<div id="removed-and-deprecated-features" class="section level2">
<h2 class="hasAnchor">
<a href="#removed-and-deprecated-features" class="anchor"></a>Removed and deprecated features</h2>
<ul>
<li><p><code>%.%</code> has been deprecated: please use <code>%&gt;%</code> instead. <code>chain()</code> is defunct. (#518)</p></li>
<li><p><code>filter.numeric()</code> removed. Need to figure out how to reimplement with new lazy eval system.</p></li>
<li><p>The <code>Progress</code> refclass is no longer exported to avoid conflicts with shiny. Instead use <code><a href="../reference/progress_estimated.html">progress_estimated()</a></code> (#535).</p></li>
<li><p><code>src_monetdb()</code> is now implemented in MonetDB.R, not dplyr.</p></li>
<li><p><code>show_sql()</code> and <code>explain_sql()</code> and matching global options <code>dplyr.show_sql</code> and <code>dplyr.explain_sql</code> have been removed. Instead use <code><a href="../reference/explain.html">show_query()</a></code> and <code><a href="../reference/explain.html">explain()</a></code>.</p></li>
</ul>
</div>
<div id="minor-improvements-and-bug-fixes-1" class="section level2">
<h2 class="hasAnchor">
<a href="#minor-improvements-and-bug-fixes-1" class="anchor"></a>Minor improvements and bug fixes</h2>
<ul>
<li><p>Main verbs now have individual documentation pages (#519).</p></li>
<li><p><code>%&gt;%</code> is simply re-exported from magrittr, instead of creating a local copy (#496, thanks to @jimhester)</p></li>
<li><p>Examples now use <code>nycflights13</code> instead of <code>hflights</code> because it the variables have better names and there are a few interlinked tables (#562). <code>Lahman</code> and <code>nycflights13</code> are (once again) suggested packages. This means many examples will not work unless you explicitly install them with <code>install.packages(c("Lahman", "nycflights13"))</code> (#508). dplyr now depends on Lahman 3.0.1. A number of examples have been updated to reflect modified field names (#586).</p></li>
<li><p><code><a href="../reference/do.html">do()</a></code> now displays the progress bar only when used in interactive prompts and not when knitting (#428, @jimhester).</p></li>
<li><p><code><a href="../reference/reexports.html">glimpse()</a></code> now prints a trailing new line (#590).</p></li>
<li><p><code><a href="../reference/group_by.html">group_by()</a></code> has more consistent behaviour when grouping by constants: it creates a new column with that value (#410). It renames grouping variables (#410). The first argument is now <code>.data</code> so you can create new groups with name x (#534).</p></li>
<li><p>Now instead of overriding <code><a href="../reference/lead-lag.html">lag()</a></code>, dplyr overrides <code>lag.default()</code>, which should avoid clobbering lag methods added by other packages. (#277).</p></li>
<li><p><code><a href="../reference/mutate.html">mutate(data, a = NULL)</a></code> removes the variable <code>a</code> from the returned dataset (#462).</p></li>
<li><p><code><a href="../reference/reexports.html">trunc_mat()</a></code> and hence <code>print.tbl_df()</code> and friends gets a <code>width</code> argument to control the deafult output width. Set <code>options(dplyr.width = Inf)</code> to always show all columns (#589).</p></li>
<li><p><code><a href="../reference/select.html">select()</a></code> gains <code><a href="../reference/select_helpers.html">one_of()</a></code> selector: this allows you to select variables provided by a character vector (#396). It fails immediately if you give an empty pattern to <code><a href="../reference/select_helpers.html">starts_with()</a></code>, <code><a href="../reference/select_helpers.html">ends_with()</a></code>, <code><a href="../reference/select_helpers.html">contains()</a></code> or <code><a href="../reference/select_helpers.html">matches()</a></code> (#481, @leondutoit). Fixed buglet in <code><a href="../reference/select.html">select()</a></code> so that you can now create variables called <code>val</code> (#564).</p></li>
<li><p>Switched from RC to R6.</p></li>
<li><p><code><a href="../reference/tally.html">tally()</a></code> and <code><a href="../reference/top_n.html">top_n()</a></code> work consistently: neither accidentally evaluates the the <code>wt</code> param. (#426, @mnel)</p></li>
<li><p><code>rename</code> handles grouped data (#640).</p></li>
</ul>
</div>
<div id="minor-improvements-and-bug-fixes-by-backend" class="section level2">
<h2 class="hasAnchor">
<a href="#minor-improvements-and-bug-fixes-by-backend" class="anchor"></a>Minor improvements and bug fixes by backend</h2>
<div id="databases-2" class="section level3">
<h3 class="hasAnchor">
<a href="#databases-2" class="anchor"></a>Databases</h3>
<ul>
<li><p>Correct SQL generation for <code>paste()</code> when used with the collapse parameter targeting a Postgres database. (@rbdixon, #1357)</p></li>
<li><p>The db backend system has been completely overhauled in order to make it possible to add backends in other packages, and to support a much wider range of databases. See <code><a href="../articles/new-sql-backend.html">vignette("new-sql-backend")</a></code> for instruction on how to create your own (#568).</p></li>
<li><p><code><a href="../reference/src_dbi.html">src_mysql()</a></code> gains a method for <code><a href="../reference/explain.html">explain()</a></code>.</p></li>
<li><p>When <code><a href="../reference/mutate.html">mutate()</a></code> creates a new variable that uses a window function, automatically wrap the result in a subquery (#484).</p></li>
<li><p>Correct SQL generation for <code><a href="../reference/nth.html">first()</a></code> and <code><a href="../reference/nth.html">last()</a></code> (#531).</p></li>
<li><p><code><a href="../reference/order_by.html">order_by()</a></code> now works in conjunction with window functions in databases that support them.</p></li>
</ul>
</div>
<div id="data-framestbl_df" class="section level3">
<h3 class="hasAnchor">
<a href="#data-framestbl_df" class="anchor"></a>Data frames/<code>tbl_df</code>
</h3>
<ul>
<li><p>All verbs now understand how to work with <code>difftime()</code> (#390) and <code>AsIs</code> (#453) objects. They all check that colnames are unique (#483), and are more robust when columns are not present (#348, #569, #600).</p></li>
<li>
<p>Hybrid evaluation bugs fixed:</p>
<ul>
<li><p>Call substitution stopped too early when a sub expression contained a <code>$</code> (#502).</p></li>
<li><p>Handle <code>::</code> and <code>:::</code> (#412).</p></li>
<li><p><code><a href="../reference/cumall.html">cumany()</a></code> and <code><a href="../reference/cumall.html">cumall()</a></code> properly handle <code>NA</code> (#408).</p></li>
<li><p><code><a href="../reference/nth.html">nth()</a></code> now correctly preserve the class when using dates, times and factors (#509).</p></li>
<li><p>no longer substitutes within <code><a href="../reference/order_by.html">order_by()</a></code> because <code><a href="../reference/order_by.html">order_by()</a></code> needs to do its own NSE (#169).</p></li>
</ul>
</li>
<li><p><code>[.tbl_df</code> always returns a tbl_df (i.e. <code>drop = FALSE</code> is the default) (#587, #610). <code>[.grouped_df</code> preserves important output attributes (#398).</p></li>
<li><p><code><a href="../reference/arrange.html">arrange()</a></code> keeps the grouping structure of grouped data (#491, #605), and preserves input classes (#563).</p></li>
<li><p><code><a href="../reference/select_helpers.html">contains()</a></code> accidentally matched regular expressions, now it passes <code>fixed = TRUE</code> to <code>grep()</code> (#608).</p></li>
<li><p><code><a href="../reference/filter.html">filter()</a></code> asserts all variables are white listed (#566).</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> makes a <code>rowwise_df</code> when given a <code>rowwise_df</code> (#463).</p></li>
<li><p><code><a href="../reference/bind.html">rbind_all()</a></code> creates <code>tbl_df</code> objects instead of raw <code>data.frame</code>s.</p></li>
<li><p>If <code><a href="../reference/select.html">select()</a></code> doesn’t match any variables, it returns a 0-column data frame, instead of the original (#498). It no longer fails when if some columns are not named (#492)</p></li>
<li><p><code><a href="../reference/sample.html">sample_n()</a></code> and <code><a href="../reference/sample.html">sample_frac()</a></code> methods for data.frames exported. (#405, @alyst)</p></li>
<li><p>A grouped data frame may have 0 groups (#486). Grouped df objects gain some basic validity checking, which should prevent some crashes related to corrupt <code>grouped_df</code> objects made by <code>rbind()</code> (#606).</p></li>
<li><p>More coherence when joining columns of compatible but different types, e.g. when joining a character vector and a factor (#455), or a numeric and integer (#450)</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> works for on zero-row grouped data frame, and with list columns (#555).</p></li>
<li><p><code>LazySubset</code> was confused about input data size (#452).</p></li>
<li><p>Internal <code><a href="../reference/n_distinct.html">n_distinct()</a></code> is stricter about it’s inputs: it requires one symbol which must be from the data frame (#567).</p></li>
<li><p><code>rbind_*()</code> handle data frames with 0 rows (#597). They fill character vector columns with <code>NA</code> instead of blanks (#595). They work with list columns (#463).</p></li>
<li><p>Improved handling of encoding for column names (#636).</p></li>
<li><p>Improved handling of hybrid evaluation re $ and @ (#645).</p></li>
</ul>
</div>
<div id="data-tables" class="section level3">
<h3 class="hasAnchor">
<a href="#data-tables" class="anchor"></a>Data tables</h3>
<ul>
<li><p>Fix major omission in <code>tbl_dt()</code> and <code>grouped_dt()</code> methods - I was accidentally doing a deep copy on every result :(</p></li>
<li><p><code><a href="../reference/summarise.html">summarise()</a></code> and <code><a href="../reference/group_by.html">group_by()</a></code> now retain over-allocation when working with data.tables (#475, @arunsrinivasan).</p></li>
<li><p>joining two data.tables now correctly dispatches to data table methods, and result is a data table (#470)</p></li>
</ul>
</div>
<div id="cubes" class="section level3">
<h3 class="hasAnchor">
<a href="#cubes" class="anchor"></a>Cubes</h3>
<ul>
<li>
<code>summarise.tbl_cube()</code> works with single grouping variable (#480).</li>
</ul>
</div>
</div>
</div>
    <div id="dplyr-0-2" class="section level1">
<h1 class="hasAnchor">
<a href="#dplyr-0-2" class="anchor"></a>dplyr 0.2</h1>
<div id="piping" class="section level2">
<h2 class="hasAnchor">
<a href="#piping" class="anchor"></a>Piping</h2>
<p>dplyr now imports <code>%&gt;%</code> from magrittr (#330). I recommend that you use this instead of <code>%.%</code> because it is easier to type (since you can hold down the shift key) and is more flexible. With you <code>%&gt;%</code>, you can control which argument on the RHS recieves the LHS by using the pronoun <code>.</code>. This makes <code>%&gt;%</code> more useful with base R functions because they don’t always take the data frame as the first argument. For example you could pipe <code>mtcars</code> to <code>xtabs()</code> with:</p>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">mtcars %&gt;%<span class="st"> </span><span class="kw">xtabs</span>( ~<span class="st"> </span>cyl +<span class="st"> </span>vs, <span class="dt">data =</span> .)</code></pre></div>
<p>Thanks to @smbache for the excellent magrittr package. dplyr only provides <code>%&gt;%</code> from magrittr, but it contains many other useful functions. To use them, load <code>magrittr</code> explicitly: <code>library(magrittr)</code>. For more details, see <code><a href="../articles/magrittr.html">vignette("magrittr")</a></code>.</p>
<p><code>%.%</code> will be deprecated in a future version of dplyr, but it won’t happen for a while. I’ve also deprecated <code>chain()</code> to encourage a single style of dplyr usage: please use <code>%&gt;%</code> instead.</p>
</div>
<div id="do" class="section level2">
<h2 class="hasAnchor">
<a href="#do" class="anchor"></a>Do</h2>
<p><code><a href="../reference/do.html">do()</a></code> has been completely overhauled. There are now two ways to use it, either with multiple named arguments or a single unnamed arguments. <code><a href="../reference/group_by.html">group_by()</a></code> + <code><a href="../reference/do.html">do()</a></code> is equivalent to <code>plyr::dlply</code>, except it always returns a data frame.</p>
<p>If you use named arguments, each argument becomes a list-variable in the output. A list-variable can contain any arbitrary R object so it’s particularly well suited for storing models.</p>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
models &lt;-<span class="st"> </span>mtcars %&gt;%<span class="st"> </span><span class="kw"><a href="../reference/group_by.html">group_by</a></span>(cyl) %&gt;%<span class="st"> </span><span class="kw"><a href="../reference/do.html">do</a></span>(<span class="dt">lm =</span> <span class="kw">lm</span>(mpg ~<span class="st"> </span>wt, <span class="dt">data =</span> .))
models %&gt;%<span class="st"> </span><span class="kw"><a href="../reference/summarise.html">summarise</a></span>(<span class="dt">rsq =</span> <span class="kw">summary</span>(lm)$r.squared)</code></pre></div>
<p>If you use an unnamed argument, the result should be a data frame. This allows you to apply arbitrary functions to each group.</p>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">mtcars %&gt;%<span class="st"> </span><span class="kw"><a href="../reference/group_by.html">group_by</a></span>(cyl) %&gt;%<span class="st"> </span><span class="kw"><a href="../reference/do.html">do</a></span>(<span class="kw">head</span>(., <span class="dv">1</span>))</code></pre></div>
<p>Note the use of the <code>.</code> pronoun to refer to the data in the current group.</p>
<p><code><a href="../reference/do.html">do()</a></code> also has an automatic progress bar. It appears if the computation takes longer than 5 seconds and lets you know (approximately) how much longer the job will take to complete.</p>
</div>
<div id="new-verbs" class="section level2">
<h2 class="hasAnchor">
<a href="#new-verbs" class="anchor"></a>New verbs</h2>
<p>dplyr 0.2 adds three new verbs:</p>
<ul>
<li><p><code><a href="../reference/reexports.html">glimpse()</a></code> makes it possible to see all the columns in a tbl, displaying as much data for each variable as can be fit on a single line.</p></li>
<li><p><code><a href="../reference/sample.html">sample_n()</a></code> randomly samples a fixed number of rows from a tbl; <code><a href="../reference/sample.html">sample_frac()</a></code> randomly samples a fixed fraction of rows. Only works for local data frames and data tables (#202).</p></li>
<li><p><code><a href="../reference/summarise_each.html">summarise_each()</a></code> and <code><a href="../reference/summarise_each.html">mutate_each()</a></code> make it easy to apply one or more functions to multiple columns in a tbl (#178).</p></li>
</ul>
</div>
<div id="minor-improvements-1" class="section level2">
<h2 class="hasAnchor">
<a href="#minor-improvements-1" class="anchor"></a>Minor improvements</h2>
<ul>
<li><p>If you load plyr after dplyr, you’ll get a message suggesting that you load plyr first (#347).</p></li>
<li><p><code><a href="../reference/as.tbl_cube.html">as.tbl_cube()</a></code> gains a method for matrices (#359, @paulstaab)</p></li>
<li><p><code><a href="../reference/compute.html">compute()</a></code> gains <code>temporary</code> argument so you can control whether the results are temporary or permanent (#382, @cpsievert)</p></li>
<li><p><code><a href="../reference/group_by.html">group_by()</a></code> now defaults to <code>add = FALSE</code> so that it sets the grouping variables rather than adding to the existing list. I think this is how most people expected <code>group_by</code> to work anyway, so it’s unlikely to cause problems (#385).</p></li>
<li><p>Support for <a href="http://www.monetdb.org">MonetDB</a> tables with <code>src_monetdb()</code> (#8, thanks to @hannesmuehleisen).</p></li>
<li>
<p>New vignettes:</p>
<ul>
<li><p><code>memory</code> vignette which discusses how dplyr minimises memory usage for local data frames (#198).</p></li>
<li><p><code>new-sql-backend</code> vignette which discusses how to add a new SQL backend/source to dplyr.</p></li>
</ul>
</li>
<li><p><code><a href="../reference/location.html">changes()</a></code> output more clearly distinguishes which columns were added or deleted.</p></li>
<li><p><code><a href="../reference/explain.html">explain()</a></code> is now generic.</p></li>
<li><p>dplyr is more careful when setting the keys of data tables, so it never accidentally modifies an object that it doesn’t own. It also avoids unnecessary key setting which negatively affected performance. (#193, #255).</p></li>
<li><p><code>print()</code> methods for <code>tbl_df</code>, <code>tbl_dt</code> and <code>tbl_sql</code> gain <code>n</code> argument to control the number of rows printed (#362). They also works better when you have columns containing lists of complex objects.</p></li>
<li><p><code><a href="../reference/ranking.html">row_number()</a></code> can be called without arguments, in which case it returns the same as <code>1:n()</code> (#303).</p></li>
<li><p><code>"comment"</code> attribute is allowed (white listed) as well as names (#346).</p></li>
<li><p>hybrid versions of <code>min</code>, <code>max</code>, <code>mean</code>, <code>var</code>, <code>sd</code> and <code>sum</code> handle the <code>na.rm</code> argument (#168). This should yield substantial performance improvements for those functions.</p></li>
<li><p>Special case for call to <code><a href="../reference/arrange.html">arrange()</a></code> on a grouped data frame with no arguments. (#369)</p></li>
</ul>
</div>
<div id="bug-fixes-1" class="section level2">
<h2 class="hasAnchor">
<a href="#bug-fixes-1" class="anchor"></a>Bug fixes</h2>
<ul>
<li><p>Code adapted to Rcpp &gt; 0.11.1</p></li>
<li><p>internal <code>DataDots</code> class protects against missing variables in verbs (#314), including the case where <code>...</code> is missing. (#338)</p></li>
<li><p><code>all.equal.data.frame</code> from base is no longer bypassed. we now have <code>all.equal.tbl_df</code> and <code>all.equal.tbl_dt</code> methods (#332).</p></li>
<li><p><code><a href="../reference/arrange.html">arrange()</a></code> correctly handles NA in numeric vectors (#331) and 0 row data frames (#289).</p></li>
<li><p><code>copy_to.src_mysql()</code> now works on windows (#323)</p></li>
<li><p><code>*_join()</code> doesn’t reorder column names (#324).</p></li>
<li><p><code><a href="../reference/bind.html">rbind_all()</a></code> is stricter and only accepts list of data frames (#288)</p></li>
<li><p><code>rbind_*</code> propagates time zone information for <code>POSIXct</code> columns (#298).</p></li>
<li><p><code>rbind_*</code> is less strict about type promotion. The numeric <code>Collecter</code> allows collection of integer and logical vectors. The integer <code>Collecter</code> also collects logical values (#321).</p></li>
<li><p>internal <code>sum</code> correctly handles integer (under/over)flow (#308).</p></li>
<li><p><code><a href="../reference/summarise.html">summarise()</a></code> checks consistency of outputs (#300) and drops <code>names</code> attribute of output columns (#357).</p></li>
<li><p>join functions throw error instead of crashing when there are no common variables between the data frames, and also give a better error message when only one data frame has a by variable (#371).</p></li>
<li><p><code><a href="../reference/top_n.html">top_n()</a></code> returns <code>n</code> rows instead of <code>n - 1</code> (@leondutoit, #367).</p></li>
<li><p>SQL translation always evaluates subsetting operators (<code>$</code>, <code>[</code>, <code>[[</code>) locally. (#318).</p></li>
<li><p><code><a href="../reference/select.html">select()</a></code> now renames variables in remote sql tbls (#317) and<br>
implicitly adds grouping variables (#170).</p></li>
<li><p>internal <code>grouped_df_impl</code> function errors if there are no variables to group by (#398).</p></li>
<li><p><code>n_distinct</code> did not treat NA correctly in the numeric case #384.</p></li>
<li><p>Some compiler warnings triggered by -Wall or -pedantic have been eliminated.</p></li>
<li><p><code>group_by</code> only creates one group for NA (#401).</p></li>
<li><p>Hybrid evaluator did not evaluate expression in correct environment (#403).</p></li>
</ul>
</div>
</div>
    <div id="dplyr-0-1-3" class="section level1">
<h1 class="hasAnchor">
<a href="#dplyr-0-1-3" class="anchor"></a>dplyr 0.1.3</h1>
<div id="bug-fixes-2" class="section level2">
<h2 class="hasAnchor">
<a href="#bug-fixes-2" class="anchor"></a>Bug fixes</h2>
<ul>
<li><p><code><a href="../reference/select.html">select()</a></code> actually renames columns in a data table (#284).</p></li>
<li><p><code><a href="../reference/bind.html">rbind_all()</a></code> and <code><a href="../reference/bind.html">rbind_list()</a></code> now handle missing values in factors (#279).</p></li>
<li><p>SQL joins now work better if names duplicated in both x and y tables (#310).</p></li>
<li><p>Builds against Rcpp 0.11.1</p></li>
<li><p><code><a href="../reference/select.html">select()</a></code> correctly works with the vars attribute (#309).</p></li>
<li><p>Internal code is stricter when deciding if a data frame is grouped (#308): this avoids a number of situations which previously causedd .</p></li>
<li><p>More data frame joins work with missing values in keys (#306).</p></li>
</ul>
</div>
</div>
    <div id="dplyr-0-1-2" class="section level1">
<h1 class="hasAnchor">
<a href="#dplyr-0-1-2" class="anchor"></a>dplyr 0.1.2</h1>
<div id="new-features-1" class="section level2">
<h2 class="hasAnchor">
<a href="#new-features-1" class="anchor"></a>New features</h2>
<ul>
<li><p><code><a href="../reference/select.html">select()</a></code> is substantially more powerful. You can use named arguments to rename existing variables, and new functions <code><a href="../reference/select_helpers.html">starts_with()</a></code>, <code><a href="../reference/select_helpers.html">ends_with()</a></code>, <code><a href="../reference/select_helpers.html">contains()</a></code>, <code><a href="../reference/select_helpers.html">matches()</a></code> and <code><a href="../reference/select_helpers.html">num_range()</a></code> to select variables based on their names. It now also makes a shallow copy, substantially reducing its memory impact (#158, #172, #192, #232).</p></li>
<li><p><code><a href="../reference/summarise.html">summarize()</a></code> added as alias for <code><a href="../reference/summarise.html">summarise()</a></code> for people from countries that don’t don’t spell things correctly ;) (#245)</p></li>
</ul>
</div>
<div id="bug-fixes-3" class="section level2">
<h2 class="hasAnchor">
<a href="#bug-fixes-3" class="anchor"></a>Bug fixes</h2>
<ul>
<li><p><code><a href="../reference/filter.html">filter()</a></code> now fails when given anything other than a logical vector, and correctly handles missing values (#249). <code>filter.numeric()</code> proxies <code>stats::filter()</code> so you can continue to use <code><a href="../reference/filter.html">filter()</a></code> function with numeric inputs (#264).</p></li>
<li><p><code><a href="../reference/summarise.html">summarise()</a></code> correctly uses newly created variables (#259).</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> correctly propagates attributes (#265) and <code>mutate.data.frame()</code> correctly mutates the same variable repeatedly (#243).</p></li>
<li><p><code><a href="../reference/lead-lag.html">lead()</a></code> and <code><a href="../reference/lead-lag.html">lag()</a></code> preserve attributes, so they now work with dates, times and factors (#166).</p></li>
<li><p><code><a href="../reference/n.html">n()</a></code> never accepts arguments (#223).</p></li>
<li><p><code><a href="../reference/ranking.html">row_number()</a></code> gives correct results (#227).</p></li>
<li><p><code><a href="../reference/bind.html">rbind_all()</a></code> silently ignores data frames with 0 rows or 0 columns (#274).</p></li>
<li><p><code><a href="../reference/group_by.html">group_by()</a></code> orders the result (#242). It also checks that columns are of supported types (#233, #276).</p></li>
<li><p>The hybrid evaluator did not handle some expressions correctly, for example in <code>if(n() &gt; 5) 1 else 2</code> the subexpression <code><a href="../reference/n.html">n()</a></code> was not substituted correctly. It also correctly processes <code>$</code> (#278).</p></li>
<li><p><code><a href="../reference/arrange.html">arrange()</a></code> checks that all columns are of supported types (#266). It also handles list columns (#282).</p></li>
<li><p>Working towards Solaris compatibility.</p></li>
<li><p>Benchmarking vignette temporarily disabled due to microbenchmark problems reported by BDR.</p></li>
</ul>
</div>
</div>
    <div id="dplyr-0-1-1" class="section level1">
<h1 class="hasAnchor">
<a href="#dplyr-0-1-1" class="anchor"></a>dplyr 0.1.1</h1>
<div id="improvements" class="section level2">
<h2 class="hasAnchor">
<a href="#improvements" class="anchor"></a>Improvements</h2>
<ul>
<li><p>new <code><a href="../reference/location.html">location()</a></code> and <code><a href="../reference/location.html">changes()</a></code> functions which provide more information about how data frames are stored in memory so that you can see what gets copied.</p></li>
<li><p>renamed <code>explain_tbl()</code> to <code><a href="../reference/explain.html">explain()</a></code> (#182).</p></li>
<li><p><code><a href="../reference/tally.html">tally()</a></code> gains <code>sort</code> argument to sort output so highest counts come first (#173).</p></li>
<li><p><code>ungroup.grouped_df()</code>, <code><a href="../reference/tbl_df.html">tbl_df()</a></code>, <code>as.data.frame.tbl_df()</code> now only make shallow copies of their inputs (#191).</p></li>
<li><p>The <code>benchmark-baseball</code> vignette now contains fairer (including grouping times) comparisons with <code>data.table</code>. (#222)</p></li>
</ul>
</div>
<div id="bug-fixes-4" class="section level2">
<h2 class="hasAnchor">
<a href="#bug-fixes-4" class="anchor"></a>Bug fixes</h2>
<ul>
<li><p><code><a href="../reference/filter.html">filter()</a></code> (#221) and <code><a href="../reference/summarise.html">summarise()</a></code> (#194) correctly propagate attributes.</p></li>
<li><p><code><a href="../reference/summarise.html">summarise()</a></code> throws an error when asked to summarise an unknown variable instead of crashing (#208).</p></li>
<li><p><code><a href="../reference/group_by.html">group_by()</a></code> handles factors with missing values (#183).</p></li>
<li><p><code><a href="../reference/filter.html">filter()</a></code> handles scalar results (#217) and better handles scoping, e.g. <code><a href="../reference/filter.html">filter(., variable)</a></code> where <code>variable</code> is defined in the function that calls <code>filter</code>. It also handles <code>T</code> and <code>F</code> as aliases to <code>TRUE</code> and <code>FALSE</code> if there are no <code>T</code> or <code>F</code> variables in the data or in the scope.</p></li>
<li><p><code>select.grouped_df</code> fails when the grouping variables are not included in the selected variables (#170)</p></li>
<li><p><code>all.equal.data.frame()</code> handles a corner case where the data frame has <code>NULL</code> names (#217)</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> gives informative error message on unsupported types (#179)</p></li>
<li><p>dplyr source package no longer includes pandas benchmark, reducing download size from 2.8 MB to 0.5 MB.</p></li>
</ul>
</div>
</div>
    </div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
        <li><a href="#dplyr-0-5-0-9000">0.5.0.9000</a></li>
        <li><a href="#dplyr-0-5-0">0.5.0</a></li>
        <li><a href="#dplyr-0-4-3">0.4.3</a></li>
        <li><a href="#dplyr-0-4-2">0.4.2</a></li>
        <li><a href="#dplyr-0-4-1">0.4.1</a></li>
        <li><a href="#dplyr-0-4-0">0.4.0</a></li>
        <li><a href="#dplyr-0-3-0-1">0.3.0.1</a></li>
        <li><a href="#dplyr-0-3">0.3</a></li>
        <li><a href="#dplyr-0-2">0.2</a></li>
        <li><a href="#dplyr-0-1-3">0.1.3</a></li>
        <li><a href="#dplyr-0-1-2">0.1.2</a></li>
        <li><a href="#dplyr-0-1-1">0.1.1</a></li>
      </ul>
    </div>
  </div>

</div>

      <footer>
      <div class="tidyverse">
  <p>dplyr is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="http://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>Developed by <a href='http://hadley.nz'>Hadley Wickham</a>, Romain Francois, <a href='https://www.rstudio.com'><img src='http://tidyverse.org/rstudio-logo.svg' height='24' /></a>.</p>
  <p>Site built by <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-67989-18', 'auto');
  ga('send', 'pageview');
</script>
      </footer>
   </div>

  </body>
</html>
