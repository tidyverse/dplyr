# Operate on a selection of variables

**\[superseded\]**

Scoped verbs (`_if`, `_at`, `_all`) have been superseded by the use of
[`pick()`](https://dplyr.tidyverse.org/dev/reference/pick.md) or
[`across()`](https://dplyr.tidyverse.org/dev/reference/across.md) in an
existing verb. See
[`vignette("colwise")`](https://dplyr.tidyverse.org/dev/articles/colwise.md)
for details.

The variants suffixed with `_if`, `_at` or `_all` apply an expression
(sometimes several) to all variables within a specified subset. This
subset can contain all variables (`_all` variants), a
[`vars()`](https://dplyr.tidyverse.org/dev/reference/vars.md) selection
(`_at` variants), or variables selected with a predicate (`_if`
variants).

The verbs with scoped variants are:

- [`mutate()`](https://dplyr.tidyverse.org/dev/reference/mutate.md),
  [`transmute()`](https://dplyr.tidyverse.org/dev/reference/transmute.md)
  and
  [`summarise()`](https://dplyr.tidyverse.org/dev/reference/summarise.md).
  See
  [`summarise_all()`](https://dplyr.tidyverse.org/dev/reference/summarise_all.md).

- [`filter()`](https://dplyr.tidyverse.org/dev/reference/filter.md). See
  [`filter_all()`](https://dplyr.tidyverse.org/dev/reference/filter_all.md).

- [`group_by()`](https://dplyr.tidyverse.org/dev/reference/group_by.md).
  See
  [`group_by_all()`](https://dplyr.tidyverse.org/dev/reference/group_by_all.md).

- [`rename()`](https://dplyr.tidyverse.org/dev/reference/rename.md) and
  [`select()`](https://dplyr.tidyverse.org/dev/reference/select.md). See
  [`select_all()`](https://dplyr.tidyverse.org/dev/reference/select_all.md).

- [`arrange()`](https://dplyr.tidyverse.org/dev/reference/arrange.md).
  See
  [`arrange_all()`](https://dplyr.tidyverse.org/dev/reference/arrange_all.md)

There are three kinds of scoped variants. They differ in the scope of
the variable selection on which operations are applied:

- Verbs suffixed with `_all()` apply an operation on all variables.

- Verbs suffixed with `_at()` apply an operation on a subset of
  variables specified with the quoting function
  [`vars()`](https://dplyr.tidyverse.org/dev/reference/vars.md). This
  quoting function accepts
  [`tidyselect::vars_select()`](https://tidyselect.r-lib.org/reference/vars_select.html)
  helpers like
  [`starts_with()`](https://tidyselect.r-lib.org/reference/starts_with.html).
  Instead of a
  [`vars()`](https://dplyr.tidyverse.org/dev/reference/vars.md)
  selection, you can also supply an
  [integerish](https://rlang.r-lib.org/reference/is_integerish.html)
  vector of column positions or a character vector of column names.

- Verbs suffixed with `_if()` apply an operation on the subset of
  variables for which a predicate function returns `TRUE`. Instead of a
  predicate function, you can also supply a logical vector.

## Arguments

- .tbl:

  A `tbl` object.

- .funs:

  A function `fun`, a quosure style lambda `~ fun(.)` or a list of
  either form.

- .vars:

  A list of columns generated by
  [`vars()`](https://dplyr.tidyverse.org/dev/reference/vars.md), a
  character vector of column names, a numeric vector of column
  positions, or `NULL`.

- .predicate:

  A predicate function to be applied to the columns or a logical vector.
  The variables for which `.predicate` is or returns `TRUE` are
  selected. This argument is passed to
  [`rlang::as_function()`](https://rlang.r-lib.org/reference/as_function.html)
  and thus supports quosure-style lambda functions and strings
  representing function names.

- ...:

  Additional arguments for the function calls in `.funs`. These are
  evaluated only once, with [tidy
  dots](https://rlang.r-lib.org/reference/dyn-dots.html) support.

## Grouping variables

Most of these operations also apply on the grouping variables when they
are part of the selection. This includes:

- [`arrange_all()`](https://dplyr.tidyverse.org/dev/reference/arrange_all.md),
  [`arrange_at()`](https://dplyr.tidyverse.org/dev/reference/arrange_all.md),
  and
  [`arrange_if()`](https://dplyr.tidyverse.org/dev/reference/arrange_all.md)

- [`distinct_all()`](https://dplyr.tidyverse.org/dev/reference/distinct_all.md),
  [`distinct_at()`](https://dplyr.tidyverse.org/dev/reference/distinct_all.md),
  and
  [`distinct_if()`](https://dplyr.tidyverse.org/dev/reference/distinct_all.md)

- [`filter_all()`](https://dplyr.tidyverse.org/dev/reference/filter_all.md),
  [`filter_at()`](https://dplyr.tidyverse.org/dev/reference/filter_all.md),
  and
  [`filter_if()`](https://dplyr.tidyverse.org/dev/reference/filter_all.md)

- [`group_by_all()`](https://dplyr.tidyverse.org/dev/reference/group_by_all.md),
  [`group_by_at()`](https://dplyr.tidyverse.org/dev/reference/group_by_all.md),
  and
  [`group_by_if()`](https://dplyr.tidyverse.org/dev/reference/group_by_all.md)

- [`select_all()`](https://dplyr.tidyverse.org/dev/reference/select_all.md),
  [`select_at()`](https://dplyr.tidyverse.org/dev/reference/select_all.md),
  and
  [`select_if()`](https://dplyr.tidyverse.org/dev/reference/select_all.md)

This is not the case for summarising and mutating variants where
operations are *not* applied on grouping variables. The behaviour
depends on whether the selection is **implicit** (`all` and `if`
selections) or **explicit** (`at` selections). Grouping variables
covered by explicit selections (with
[`summarise_at()`](https://dplyr.tidyverse.org/dev/reference/summarise_all.md),
[`mutate_at()`](https://dplyr.tidyverse.org/dev/reference/mutate_all.md),
and
[`transmute_at()`](https://dplyr.tidyverse.org/dev/reference/mutate_all.md))
are always an error. For implicit selections, the grouping variables are
always ignored. In this case, the level of verbosity depends on the kind
of operation:

- Summarising operations
  ([`summarise_all()`](https://dplyr.tidyverse.org/dev/reference/summarise_all.md)
  and
  [`summarise_if()`](https://dplyr.tidyverse.org/dev/reference/summarise_all.md))
  ignore grouping variables silently because it is obvious that
  operations are not applied on grouping variables.

- On the other hand it isn't as obvious in the case of mutating
  operations
  ([`mutate_all()`](https://dplyr.tidyverse.org/dev/reference/mutate_all.md),
  [`mutate_if()`](https://dplyr.tidyverse.org/dev/reference/mutate_all.md),
  [`transmute_all()`](https://dplyr.tidyverse.org/dev/reference/mutate_all.md),
  and
  [`transmute_if()`](https://dplyr.tidyverse.org/dev/reference/mutate_all.md)).
  For this reason, they issue a message indicating which grouping
  variables are ignored.
