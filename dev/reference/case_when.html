<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>A general vectorised if-else — case_when • dplyr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="A general vectorised if-else — case_when"><meta name="description" content='This function allows you to vectorise multiple if_else() statements. Each
case is evaluated sequentially and the first match for each element
determines the corresponding value in the output vector. If no cases match,
the .default is used as a final "else" statment.
case_when() is an R equivalent of the SQL "searched" CASE WHEN statement.'><meta property="og:description" content='This function allows you to vectorise multiple if_else() statements. Each
case is evaluated sequentially and the first match for each element
determines the corresponding value in the output vector. If no cases match,
the .default is used as a final "else" statment.
case_when() is an R equivalent of the SQL "searched" CASE WHEN statement.'><meta property="og:image" content="https://dplyr.tidyverse.org/logo.png"><meta name="robots" content="noindex"><script defer data-domain="dplyr.tidyverse.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dplyr</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.1.4.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/dplyr.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/grouping.html">Grouped data</a></li>
    <li><a class="dropdown-item" href="../articles/two-table.html">Two-table verbs</a></li>
    <li><a class="dropdown-item" href="../articles/base.html">dplyr &lt;-&gt; base R</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Automation</h6></li>
    <li><a class="dropdown-item" href="../articles/colwise.html">Column-wise operations</a></li>
    <li><a class="dropdown-item" href="../articles/rowwise.html">Row-wise operations</a></li>
    <li><a class="dropdown-item" href="../articles/programming.html">Programming with dplyr</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/tags/dplyr-1-1-0/">Version 1.1.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2020/06/dplyr-1-0-0/">Version 1.0.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2019/07/dplyr-0-8-3/">Version 0.8.3</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2019/06/dplyr-0-8-2/">Version 0.8.2</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2019/05/dplyr-0-8-1/">Version 0.8.1</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2019/02/dplyr-0-8-0/">Version 0.8.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2018/06/dplyr-0.7.5/">Version 0.7.5</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidyverse/dplyr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>A general vectorised if-else</h1>
      <small class="dont-index">Source: <a href="https://github.com/tidyverse/dplyr/blob/main/R/case-when.R" class="external-link"><code>R/case-when.R</code></a></small>
      <div class="d-none name"><code>case_when.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function allows you to vectorise multiple <code><a href="if_else.html">if_else()</a></code> statements. Each
case is evaluated sequentially and the first match for each element
determines the corresponding value in the output vector. If no cases match,
the <code>.default</code> is used as a final "else" statment.</p>
<p><code>case_when()</code> is an R equivalent of the SQL "searched" <code>CASE WHEN</code> statement.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">case_when</span><span class="op">(</span><span class="va">...</span>, .default <span class="op">=</span> <span class="cn">NULL</span>, .ptype <span class="op">=</span> <span class="cn">NULL</span>, .size <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>&lt;<code><a href="https://rlang.r-lib.org/reference/dyn-dots.html" class="external-link">dynamic-dots</a></code>&gt; A sequence of two-sided
formulas. The left hand side (LHS) determines which values match this case.
The right hand side (RHS) provides the replacement value.</p>
<p>The LHS inputs must evaluate to logical vectors.</p>
<p>The RHS inputs will be coerced to their common type.</p>
<p>All inputs will be recycled to their common size. That said, we encourage
all LHS inputs to be the same size. Recycling is mainly useful for RHS
inputs, where you might supply a size 1 input that will be recycled to the
size of the LHS inputs.</p>
<p><code>NULL</code> inputs are ignored.</p></dd>


<dt id="arg--default">.default<a class="anchor" aria-label="anchor" href="#arg--default"></a></dt>
<dd><p>The value used when all of the LHS inputs return either
<code>FALSE</code> or <code>NA</code>.</p>
<p><code>.default</code> must be size 1 or the same size as the common size computed
from <code>...</code>.</p>
<p><code>.default</code> participates in the computation of the common type with the RHS
inputs.</p>
<p><code>NA</code> values in the LHS conditions are treated like <code>FALSE</code>, meaning that
the result at those locations will be assigned the <code>.default</code> value. To
handle missing values in the conditions differently, you must explicitly
catch them with another condition before they fall through to the
<code>.default</code>. This typically involves some variation of <code>is.na(x) ~ value</code>
tailored to your usage of <code>case_when()</code>.</p>
<p>If <code>NULL</code>, the default, a missing value will be used.</p></dd>


<dt id="arg--ptype">.ptype<a class="anchor" aria-label="anchor" href="#arg--ptype"></a></dt>
<dd><p>An optional prototype declaring the desired output type. If
supplied, this overrides the common type of the RHS inputs.</p></dd>


<dt id="arg--size">.size<a class="anchor" aria-label="anchor" href="#arg--size"></a></dt>
<dd><p>An optional size declaring the desired output size. If supplied,
this overrides the common size computed from <code>...</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A vector with the same size as the common size computed from the
inputs in <code>...</code> and the same type as the common type of the RHS inputs
in <code>...</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="case_match.html">case_match()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">70</span></span></span>
<span class="r-in"><span><span class="fu">case_when</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">x</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%%</a></span> <span class="fl">35</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"fizz buzz"</span>,</span></span>
<span class="r-in"><span>  <span class="va">x</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%%</a></span> <span class="fl">5</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"fizz"</span>,</span></span>
<span class="r-in"><span>  <span class="va">x</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%%</a></span> <span class="fl">7</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"buzz"</span>,</span></span>
<span class="r-in"><span>  .default <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "1"         "2"         "3"         "4"         "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6] "6"         "buzz"      "8"         "9"         "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] "11"        "12"        "13"        "buzz"      "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [16] "16"        "17"        "18"        "19"        "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [21] "buzz"      "22"        "23"        "24"        "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [26] "26"        "27"        "buzz"      "29"        "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [31] "31"        "32"        "33"        "34"        "fizz buzz"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [36] "36"        "37"        "38"        "39"        "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [41] "41"        "buzz"      "43"        "44"        "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [46] "46"        "47"        "48"        "buzz"      "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [51] "51"        "52"        "53"        "54"        "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [56] "buzz"      "57"        "58"        "59"        "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [61] "61"        "62"        "buzz"      "64"        "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [66] "66"        "67"        "68"        "69"        "fizz buzz"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Like an if statement, the arguments are evaluated in order, so you must</span></span></span>
<span class="r-in"><span><span class="co"># proceed from the most specific to the most general. This won't work:</span></span></span>
<span class="r-in"><span><span class="fu">case_when</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">x</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%%</a></span>  <span class="fl">5</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"fizz"</span>,</span></span>
<span class="r-in"><span>  <span class="va">x</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%%</a></span>  <span class="fl">7</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"buzz"</span>,</span></span>
<span class="r-in"><span>  <span class="va">x</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%%</a></span> <span class="fl">35</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"fizz buzz"</span>,</span></span>
<span class="r-in"><span>  .default <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "1"    "2"    "3"    "4"    "fizz" "6"    "buzz" "8"    "9"    "fizz"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] "11"   "12"   "13"   "buzz" "fizz" "16"   "17"   "18"   "19"   "fizz"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [21] "buzz" "22"   "23"   "24"   "fizz" "26"   "27"   "buzz" "29"   "fizz"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [31] "31"   "32"   "33"   "34"   "fizz" "36"   "37"   "38"   "39"   "fizz"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [41] "41"   "buzz" "43"   "44"   "fizz" "46"   "47"   "48"   "buzz" "fizz"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [51] "51"   "52"   "53"   "54"   "fizz" "buzz" "57"   "58"   "59"   "fizz"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [61] "61"   "62"   "buzz" "64"   "fizz" "66"   "67"   "68"   "69"   "fizz"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># If none of the cases match and no `.default` is supplied, NA is used:</span></span></span>
<span class="r-in"><span><span class="fu">case_when</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">x</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%%</a></span> <span class="fl">35</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"fizz buzz"</span>,</span></span>
<span class="r-in"><span>  <span class="va">x</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%%</a></span> <span class="fl">5</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"fizz"</span>,</span></span>
<span class="r-in"><span>  <span class="va">x</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%%</a></span> <span class="fl">7</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"buzz"</span>,</span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] NA          NA          NA          NA          "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6] NA          "buzz"      NA          NA          "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] NA          NA          NA          "buzz"      "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [16] NA          NA          NA          NA          "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [21] "buzz"      NA          NA          NA          "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [26] NA          NA          "buzz"      NA          "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [31] NA          NA          NA          NA          "fizz buzz"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [36] NA          NA          NA          NA          "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [41] NA          "buzz"      NA          NA          "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [46] NA          NA          NA          "buzz"      "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [51] NA          NA          NA          NA          "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [56] "buzz"      NA          NA          NA          "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [61] NA          NA          "buzz"      NA          "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [66] NA          NA          NA          NA          "fizz buzz"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Note that `NA` values on the LHS are treated like `FALSE` and will be</span></span></span>
<span class="r-in"><span><span class="co"># assigned the `.default` value. You must handle them explicitly if you</span></span></span>
<span class="r-in"><span><span class="co"># want to use a different value. The exact way to handle missing values is</span></span></span>
<span class="r-in"><span><span class="co"># dependent on the set of LHS conditions you use.</span></span></span>
<span class="r-in"><span><span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA_real_</span></span></span>
<span class="r-in"><span><span class="fu">case_when</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">x</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%%</a></span> <span class="fl">35</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"fizz buzz"</span>,</span></span>
<span class="r-in"><span>  <span class="va">x</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%%</a></span> <span class="fl">5</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"fizz"</span>,</span></span>
<span class="r-in"><span>  <span class="va">x</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%%</a></span> <span class="fl">7</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"buzz"</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">~</span> <span class="st">"nope"</span>,</span></span>
<span class="r-in"><span>  .default <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "1"         "nope"      "nope"      "nope"      "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6] "6"         "buzz"      "8"         "9"         "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] "11"        "12"        "13"        "buzz"      "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [16] "16"        "17"        "18"        "19"        "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [21] "buzz"      "22"        "23"        "24"        "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [26] "26"        "27"        "buzz"      "29"        "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [31] "31"        "32"        "33"        "34"        "fizz buzz"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [36] "36"        "37"        "38"        "39"        "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [41] "41"        "buzz"      "43"        "44"        "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [46] "46"        "47"        "48"        "buzz"      "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [51] "51"        "52"        "53"        "54"        "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [56] "buzz"      "57"        "58"        "59"        "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [61] "61"        "62"        "buzz"      "64"        "fizz"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [66] "66"        "67"        "68"        "69"        "fizz buzz"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># `case_when()` evaluates all RHS expressions, and then constructs its</span></span></span>
<span class="r-in"><span><span class="co"># result by extracting the selected (via the LHS expressions) parts.</span></span></span>
<span class="r-in"><span><span class="co"># In particular `NaN`s are produced in this case:</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>, <span class="fl">2</span>, by <span class="op">=</span> <span class="fl">.5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">case_when</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">y</span> <span class="op">&gt;=</span> <span class="fl">0</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  .default <span class="op">=</span> <span class="va">y</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>NaNs produced</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] -2.0000000 -1.5000000 -1.0000000 -0.5000000  0.0000000  0.7071068</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [7]  1.0000000  1.2247449  1.4142136</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># `case_when()` is particularly useful inside `mutate()` when you want to</span></span></span>
<span class="r-in"><span><span class="co"># create a new variable that relies on a complex combination of existing</span></span></span>
<span class="r-in"><span><span class="co"># variables</span></span></span>
<span class="r-in"><span><span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="select.html">select</a></span><span class="op">(</span><span class="va">name</span><span class="op">:</span><span class="va">mass</span>, <span class="va">gender</span>, <span class="va">species</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="mutate.html">mutate</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    type <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="va">height</span> <span class="op">&gt;</span> <span class="fl">200</span> <span class="op">|</span> <span class="va">mass</span> <span class="op">&gt;</span> <span class="fl">200</span> <span class="op">~</span> <span class="st">"large"</span>,</span></span>
<span class="r-in"><span>      <span class="va">species</span> <span class="op">==</span> <span class="st">"Droid"</span> <span class="op">~</span> <span class="st">"robot"</span>,</span></span>
<span class="r-in"><span>      .default <span class="op">=</span> <span class="st">"other"</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 87 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    name               height  mass gender    species type </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> Luke Skywalker        172    77 masculine Human   other</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> C-3PO                 167    75 masculine Droid   robot</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> R2-D2                  96    32 masculine Droid   robot</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> Darth Vader           202   136 masculine Human   large</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> Leia Organa           150    49 feminine  Human   other</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> Owen Lars             178   120 masculine Human   other</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> Beru Whitesun Lars    165    75 feminine  Human   other</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> R5-D4                  97    32 masculine Droid   robot</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> Biggs Darklighter     183    84 masculine Human   other</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> Obi-Wan Kenobi        182    77 masculine Human   other</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 77 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># `case_when()` is not a tidy eval function. If you'd like to reuse</span></span></span>
<span class="r-in"><span><span class="co"># the same patterns, extract the `case_when()` call in a normal</span></span></span>
<span class="r-in"><span><span class="co"># function:</span></span></span>
<span class="r-in"><span><span class="va">case_character_type</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">height</span>, <span class="va">mass</span>, <span class="va">species</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu">case_when</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">height</span> <span class="op">&gt;</span> <span class="fl">200</span> <span class="op">|</span> <span class="va">mass</span> <span class="op">&gt;</span> <span class="fl">200</span> <span class="op">~</span> <span class="st">"large"</span>,</span></span>
<span class="r-in"><span>    <span class="va">species</span> <span class="op">==</span> <span class="st">"Droid"</span> <span class="op">~</span> <span class="st">"robot"</span>,</span></span>
<span class="r-in"><span>    .default <span class="op">=</span> <span class="st">"other"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">case_character_type</span><span class="op">(</span><span class="fl">150</span>, <span class="fl">250</span>, <span class="st">"Droid"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "large"</span>
<span class="r-in"><span><span class="fu">case_character_type</span><span class="op">(</span><span class="fl">150</span>, <span class="fl">150</span>, <span class="st">"Droid"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "robot"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Such functions can be used inside `mutate()` as well:</span></span></span>
<span class="r-in"><span><span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="mutate.html">mutate</a></span><span class="op">(</span>type <span class="op">=</span> <span class="fu">case_character_type</span><span class="op">(</span><span class="va">height</span>, <span class="va">mass</span>, <span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="pull.html">pull</a></span><span class="op">(</span><span class="va">type</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "other" "robot" "robot" "large" "other" "other" "other" "robot"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] "other" "other" "other" "other" "large" "other" "other" "large"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [17] "other" "other" "other" "other" "other" "robot" "other" "other"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [25] "other" "other" "other" "other" "other" "other" "other" "other"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [33] "other" "other" "other" "large" "large" "other" "other" "other"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [41] "other" "other" "other" "other" "other" "other" "other" "other"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [49] "other" "other" "other" "other" "other" "other" "other" "large"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [57] "other" "other" "other" "other" "other" "other" "other" "other"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [65] "other" "other" "other" "other" "other" "other" "large" "large"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [73] "other" "robot" "other" "other" "other" "large" "large" "other"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [81] "other" "large" "other" "other" "other" "robot" "other"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># `case_when()` ignores `NULL` inputs. This is useful when you'd</span></span></span>
<span class="r-in"><span><span class="co"># like to use a pattern only under certain conditions. Here we'll</span></span></span>
<span class="r-in"><span><span class="co"># take advantage of the fact that `if` returns `NULL` when there is</span></span></span>
<span class="r-in"><span><span class="co"># no `else` clause:</span></span></span>
<span class="r-in"><span><span class="va">case_character_type</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">height</span>, <span class="va">mass</span>, <span class="va">species</span>, <span class="va">robots</span> <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu">case_when</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">height</span> <span class="op">&gt;</span> <span class="fl">200</span> <span class="op">|</span> <span class="va">mass</span> <span class="op">&gt;</span> <span class="fl">200</span> <span class="op">~</span> <span class="st">"large"</span>,</span></span>
<span class="r-in"><span>    <span class="kw">if</span> <span class="op">(</span><span class="va">robots</span><span class="op">)</span> <span class="va">species</span> <span class="op">==</span> <span class="st">"Droid"</span> <span class="op">~</span> <span class="st">"robot"</span>,</span></span>
<span class="r-in"><span>    .default <span class="op">=</span> <span class="st">"other"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="mutate.html">mutate</a></span><span class="op">(</span>type <span class="op">=</span> <span class="fu">case_character_type</span><span class="op">(</span><span class="va">height</span>, <span class="va">mass</span>, <span class="va">species</span>, robots <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="pull.html">pull</a></span><span class="op">(</span><span class="va">type</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "other" "other" "other" "large" "other" "other" "other" "other"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] "other" "other" "other" "other" "large" "other" "other" "large"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [17] "other" "other" "other" "other" "other" "other" "other" "other"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [25] "other" "other" "other" "other" "other" "other" "other" "other"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [33] "other" "other" "other" "large" "large" "other" "other" "other"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [41] "other" "other" "other" "other" "other" "other" "other" "other"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [49] "other" "other" "other" "other" "other" "other" "other" "large"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [57] "other" "other" "other" "other" "other" "other" "other" "other"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [65] "other" "other" "other" "other" "other" "other" "large" "large"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [73] "other" "other" "other" "other" "other" "large" "large" "other"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [81] "other" "large" "other" "other" "other" "other" "other"</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://github.com/romainfrancois" class="external-link">Romain François</a>, <a href="https://github.com/lionel-" class="external-link">Lionel Henry</a>, <a href="https://krlmlr.info" class="external-link">Kirill Müller</a>, <a href="https://github.com/DavisVaughan" class="external-link">Davis Vaughan</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer></body></html>

