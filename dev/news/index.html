<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • dplyr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta property="og:image" content="https://dplyr.tidyverse.org/logo.png"><meta name="robots" content="noindex"><script defer data-domain="dplyr.tidyverse.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dplyr</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.1.4.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/dplyr.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/grouping.html">Grouped data</a></li>
    <li><a class="dropdown-item" href="../articles/two-table.html">Two-table verbs</a></li>
    <li><a class="dropdown-item" href="../articles/base.html">dplyr &lt;-&gt; base R</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Automation</h6></li>
    <li><a class="dropdown-item" href="../articles/colwise.html">Column-wise operations</a></li>
    <li><a class="dropdown-item" href="../articles/rowwise.html">Row-wise operations</a></li>
    <li><a class="dropdown-item" href="../articles/programming.html">Programming with dplyr</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/tags/dplyr-1-1-0/">Version 1.1.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2020/06/dplyr-1-0-0/">Version 1.0.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2019/07/dplyr-0-8-3/">Version 0.8.3</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2019/06/dplyr-0-8-2/">Version 0.8.2</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2019/05/dplyr-0-8-1/">Version 0.8.1</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2019/02/dplyr-0-8-0/">Version 0.8.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2018/06/dplyr-0.7.5/">Version 0.7.5</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidyverse/dplyr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Changelog</h1>
      <small>Source: <a href="https://github.com/tidyverse/dplyr/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="development version" id="dplyr-development-version">dplyr (development version)<a class="anchor" aria-label="anchor" href="#dplyr-development-version"></a></h2>
<ul><li><p><code><a href="../reference/case_when.html">case_when()</a></code> now throws a better error if one of the conditions is an array (<a href="https://github.com/tidyverse/dplyr/issues/6862" class="external-link">#6862</a>, <a href="https://github.com/ilovemane" class="external-link">@ilovemane</a>).</p></li>
<li><p><code><a href="../reference/between.html">between()</a></code> gains a new <code>ptype</code> argument, allowing users to specify the desired output type. This is particularly useful for ordered factors and other complex types where the default common type behavior might not be ideal (<a href="https://github.com/tidyverse/dplyr/issues/6906" class="external-link">#6906</a>, <a href="https://github.com/JamesHWade" class="external-link">@JamesHWade</a>).</p></li>
<li><p>Fixed an edge case when coercing data frames to matrices (<a href="https://github.com/tidyverse/dplyr/issues/7004" class="external-link">#7004</a>).</p></li>
<li><p>Fixed an issue where duckplyr’s ALTREP data frames were being materialized early due to internal usage of <code><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/7049" class="external-link">#7049</a>).</p></li>
<li><p>R &gt;=3.6.0 is now explicitly required (<a href="https://github.com/tidyverse/dplyr/issues/7026" class="external-link">#7026</a>).</p></li>
<li><p><code><a href="../reference/across.html">if_any()</a></code> and <code><a href="../reference/across.html">if_all()</a></code> are now fully consistent with <code><a href="https://rdrr.io/r/base/any.html" class="external-link">any()</a></code> and <code><a href="https://rdrr.io/r/base/all.html" class="external-link">all()</a></code>. In particular, when called with empty inputs <code><a href="../reference/across.html">if_any()</a></code> returns <code>FALSE</code> and <code><a href="../reference/across.html">if_all()</a></code> returns <code>TRUE</code> (<a href="https://github.com/tidyverse/dplyr/issues/7059" class="external-link">#7059</a>, <a href="https://github.com/jrwinget" class="external-link">@jrwinget</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.4" id="dplyr-114">dplyr 1.1.4<a class="anchor" aria-label="anchor" href="#dplyr-114"></a></h2><p class="text-muted">CRAN release: 2023-11-17</p>
<ul><li><p><code><a href="../reference/join_by.html">join_by()</a></code> now allows its helper functions to be namespaced with <code>dplyr::</code>, like <code>join_by(dplyr::between(x, lower, upper))</code> (<a href="https://github.com/tidyverse/dplyr/issues/6838" class="external-link">#6838</a>).</p></li>
<li><p><code><a href="../reference/mutate-joins.html">left_join()</a></code> and friends now return a specialized error message if they detect that your join would return more rows than dplyr can handle (<a href="https://github.com/tidyverse/dplyr/issues/6912" class="external-link">#6912</a>).</p></li>
<li><p><code>slice_*()</code> now throw the correct error if you forget to name <code>n</code> while also prefixing the call with <code>dplyr::</code> (<a href="https://github.com/tidyverse/dplyr/issues/6946" class="external-link">#6946</a>).</p></li>
<li><p><code><a href="../reference/dplyr_extending.html">dplyr_reconstruct()</a></code>’s default method has been rewritten to avoid materializing duckplyr queries too early (<a href="https://github.com/tidyverse/dplyr/issues/6947" class="external-link">#6947</a>).</p></li>
<li><p>Updated the <code>storms</code> data to include 2022 data (<a href="https://github.com/tidyverse/dplyr/issues/6937" class="external-link">#6937</a>, <a href="https://github.com/steveharoz" class="external-link">@steveharoz</a>).</p></li>
<li><p>Updated the <code>starwars</code> data to use a new API, because the old one is defunct. There are very minor changes to the data itself (<a href="https://github.com/tidyverse/dplyr/issues/6938" class="external-link">#6938</a>, <a href="https://github.com/steveharoz" class="external-link">@steveharoz</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.3" id="dplyr-113">dplyr 1.1.3<a class="anchor" aria-label="anchor" href="#dplyr-113"></a></h2><p class="text-muted">CRAN release: 2023-09-03</p>
<ul><li><p><code><a href="../reference/summarise_each.html">mutate_each()</a></code> and <code><a href="../reference/summarise_each.html">summarise_each()</a></code> now throw correct deprecation messages (<a href="https://github.com/tidyverse/dplyr/issues/6869" class="external-link">#6869</a>).</p></li>
<li><p><code><a href="../reference/setops.html">setequal()</a></code> now requires the input data frames to be compatible, similar to the other set methods like <code><a href="../reference/setops.html">setdiff()</a></code> or <code><a href="../reference/setops.html">intersect()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/6786" class="external-link">#6786</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.2" id="dplyr-112">dplyr 1.1.2<a class="anchor" aria-label="anchor" href="#dplyr-112"></a></h2><p class="text-muted">CRAN release: 2023-04-20</p>
<ul><li><p><code><a href="../reference/count.html">count()</a></code> better documents that it has a <code>.drop</code> argument (<a href="https://github.com/tidyverse/dplyr/issues/6820" class="external-link">#6820</a>).</p></li>
<li><p>Fixed tests to maintain compatibility with the next version of waldo (<a href="https://github.com/tidyverse/dplyr/issues/6823" class="external-link">#6823</a>).</p></li>
<li><p>Joins better handle key columns will all <code>NA</code>s (<a href="https://github.com/tidyverse/dplyr/issues/6804" class="external-link">#6804</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.1" id="dplyr-111">dplyr 1.1.1<a class="anchor" aria-label="anchor" href="#dplyr-111"></a></h2><p class="text-muted">CRAN release: 2023-03-22</p>
<ul><li>
<p>Mutating joins now warn about multiple matches much less often. At a high level, a warning was previously being thrown when a one-to-many or many-to-many relationship was detected between the keys of <code>x</code> and <code>y</code>, but is now only thrown for a many-to-many relationship, which is much rarer and much more dangerous than one-to-many because it can result in a Cartesian explosion in the number of rows returned from the join (<a href="https://github.com/tidyverse/dplyr/issues/6731" class="external-link">#6731</a>, <a href="https://github.com/tidyverse/dplyr/issues/6717" class="external-link">#6717</a>).</p>
<p>We’ve accomplished this in two steps:</p>
<ul><li><p><code>multiple</code> now defaults to <code>"all"</code>, and the options of <code>"error"</code> and <code>"warning"</code> are now deprecated in favor of using <code>relationship</code> (see below). We are using an accelerated deprecation process for these two options because they’ve only been available for a few weeks, and <code>relationship</code> is a clearly superior alternative.</p></li>
<li>
<p>The mutating joins gain a new <code>relationship</code> argument, allowing you to optionally enforce one of the following relationship constraints between the keys of <code>x</code> and <code>y</code>: <code>"one-to-one"</code>, <code>"one-to-many"</code>, <code>"many-to-one"</code>, or <code>"many-to-many"</code>.</p>
<p>For example, <code>"many-to-one"</code> enforces that each row in <code>x</code> can match at most 1 row in <code>y</code>. If a row in <code>x</code> matches &gt;1 rows in <code>y</code>, an error is thrown. This option serves as the replacement for <code>multiple = "error"</code>.</p>
<p>The default behavior of <code>relationship</code> doesn’t assume that there is any relationship between <code>x</code> and <code>y</code>. However, for equality joins it will check for the presence of a many-to-many relationship, and will warn if it detects one.</p>
</li>
</ul><p>This change unfortunately does mean that if you have set <code>multiple = "all"</code> to avoid a warning and you happened to be doing a many-to-many style join, then you will need to replace <code>multiple = "all"</code> with <code>relationship = "many-to-many"</code> to silence the new warning, but we believe this should be rare since many-to-many relationships are fairly uncommon.</p>
</li>
<li><p>Fixed a major performance regression in <code><a href="../reference/case_when.html">case_when()</a></code>. It is still a little slower than in dplyr 1.0.10, but we plan to improve this further in the future (<a href="https://github.com/tidyverse/dplyr/issues/6674" class="external-link">#6674</a>).</p></li>
<li><p>Fixed a performance regression related to <code><a href="../reference/nth.html">nth()</a></code>, <code><a href="../reference/nth.html">first()</a></code>, and <code><a href="../reference/nth.html">last()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/6682" class="external-link">#6682</a>).</p></li>
<li><p>Fixed an issue where expressions involving infix operators had an abnormally large amount of overhead (<a href="https://github.com/tidyverse/dplyr/issues/6681" class="external-link">#6681</a>).</p></li>
<li><p><code><a href="../reference/group_data.html">group_data()</a></code> on ungrouped data frames is faster (<a href="https://github.com/tidyverse/dplyr/issues/6736" class="external-link">#6736</a>).</p></li>
<li><p><code><a href="../reference/context.html">n()</a></code> is a little faster when there are many groups (<a href="https://github.com/tidyverse/dplyr/issues/6727" class="external-link">#6727</a>).</p></li>
<li><p><code><a href="../reference/pick.html">pick()</a></code> now returns a 1 row, 0 column tibble when <code>...</code> evaluates to an empty selection. This makes it more compatible with <a href="https://vctrs.r-lib.org/reference/theory-faq-recycling.html" class="external-link">tidyverse recycling rules</a> in some edge cases (<a href="https://github.com/tidyverse/dplyr/issues/6685" class="external-link">#6685</a>).</p></li>
<li><p><code><a href="../reference/if_else.html">if_else()</a></code> and <code><a href="../reference/case_when.html">case_when()</a></code> again accept logical conditions that have attributes (<a href="https://github.com/tidyverse/dplyr/issues/6678" class="external-link">#6678</a>).</p></li>
<li><p><code><a href="../reference/arrange.html">arrange()</a></code> can once again sort the <code>numeric_version</code> type from base R (<a href="https://github.com/tidyverse/dplyr/issues/6680" class="external-link">#6680</a>).</p></li>
<li><p><code><a href="../reference/slice.html">slice_sample()</a></code> now works when the input has a column named <code>replace</code>. <code><a href="../reference/slice.html">slice_min()</a></code> and <code><a href="../reference/slice.html">slice_max()</a></code> now work when the input has columns named <code>na_rm</code> or <code>with_ties</code> (<a href="https://github.com/tidyverse/dplyr/issues/6725" class="external-link">#6725</a>).</p></li>
<li><p><code><a href="../reference/nth.html">nth()</a></code> now errors informatively if <code>n</code> is <code>NA</code> (<a href="https://github.com/tidyverse/dplyr/issues/6682" class="external-link">#6682</a>).</p></li>
<li><p>Joins now throw a more informative error when <code>y</code> doesn’t have the same source as <code>x</code> (<a href="https://github.com/tidyverse/dplyr/issues/6798" class="external-link">#6798</a>).</p></li>
<li><p>All major dplyr verbs now throw an informative error message if the input data frame contains a column named <code>NA</code> or <code>""</code> (<a href="https://github.com/tidyverse/dplyr/issues/6758" class="external-link">#6758</a>).</p></li>
<li><p>Deprecation warnings thrown by <code><a href="../reference/filter.html">filter()</a></code> now mention the correct package where the problem originated from (<a href="https://github.com/tidyverse/dplyr/issues/6679" class="external-link">#6679</a>).</p></li>
<li><p>Fixed an issue where using <code>&lt;-</code> within a grouped <code><a href="../reference/mutate.html">mutate()</a></code> or <code><a href="../reference/summarise.html">summarise()</a></code> could cross contaminate other groups (<a href="https://github.com/tidyverse/dplyr/issues/6666" class="external-link">#6666</a>).</p></li>
<li><p>The compatibility vignette has been replaced with a more general vignette on using dplyr in packages, <code><a href="../articles/in-packages.html">vignette("in-packages")</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/6702" class="external-link">#6702</a>).</p></li>
<li><p>The developer documentation in <code><a href="../reference/dplyr_extending.html">?dplyr_extending</a></code> has been refreshed and brought up to date with all changes made in 1.1.0 (<a href="https://github.com/tidyverse/dplyr/issues/6695" class="external-link">#6695</a>).</p></li>
<li><p><code><a href="../reference/rename.html">rename_with()</a></code> now includes an example of using <code>paste0(recycle0 = TRUE)</code> to correctly handle empty selections (<a href="https://github.com/tidyverse/dplyr/issues/6688" class="external-link">#6688</a>).</p></li>
<li><p>R &gt;=3.5.0 is now explicitly required. This is in line with the tidyverse policy of supporting the <a href="https://www.tidyverse.org/blog/2019/04/r-version-support/" class="external-link">5 most recent versions of R</a>.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.0" id="dplyr-110">dplyr 1.1.0<a class="anchor" aria-label="anchor" href="#dplyr-110"></a></h2><p class="text-muted">CRAN release: 2023-01-29</p>
<div class="section level3">
<h3 id="new-features-1-1-0">New features<a class="anchor" aria-label="anchor" href="#new-features-1-1-0"></a></h3>
<ul><li>
<p><a href="https://dplyr.tidyverse.org/reference/dplyr_by.html"><code>.by</code>/<code>by</code></a> is an experimental alternative to <code><a href="../reference/group_by.html">group_by()</a></code> that supports per-operation grouping for <code><a href="../reference/mutate.html">mutate()</a></code>, <code><a href="../reference/summarise.html">summarise()</a></code>, <code><a href="../reference/filter.html">filter()</a></code>, and the <code><a href="../reference/slice.html">slice()</a></code> family (<a href="https://github.com/tidyverse/dplyr/issues/6528" class="external-link">#6528</a>).</p>
<p>Rather than:</p>
<pre><code><span><span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">species</span>, <span class="va">homeworld</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/summarise.html">summarise</a></span><span class="op">(</span>mean_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">height</span><span class="op">)</span><span class="op">)</span></span></code></pre>
<p>You can now write:</p>
<pre><code><span><span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    mean_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">height</span><span class="op">)</span>,</span>
<span>    .by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">species</span>, <span class="va">homeworld</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre>
<p>The most useful reason to do this is because <code>.by</code> only affects a single operation. In the example above, an ungrouped data frame went into the <code><a href="../reference/summarise.html">summarise()</a></code> call, so an ungrouped data frame will come out; with <code>.by</code>, you never need to remember to <code><a href="../reference/group_by.html">ungroup()</a></code> afterwards and you never need to use the <code>.groups</code> argument.</p>
<p>Additionally, using <code><a href="../reference/summarise.html">summarise()</a></code> with <code>.by</code> will never sort the results by the group key, unlike with <code><a href="../reference/group_by.html">group_by()</a></code>. Instead, the results are returned using the existing ordering of the groups from the original data. We feel this is more predictable, better maintains any ordering you might have already applied with a previous call to <code><a href="../reference/arrange.html">arrange()</a></code>, and provides a way to maintain the current ordering without having to resort to factors.</p>
<p>This feature was inspired by <a href="https://CRAN.R-project.org/package=data.table" class="external-link">data.table</a>, where the equivalent syntax looks like:</p>
<pre><code><span><span class="va">starwars</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span>mean_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">height</span><span class="op">)</span><span class="op">)</span>, by <span class="op">=</span> <span class="fu">.</span><span class="op">(</span><span class="va">species</span>, <span class="va">homeworld</span><span class="op">)</span><span class="op">]</span></span></code></pre>
<p><code><a href="../reference/with_groups.html">with_groups()</a></code> is superseded in favor of <code>.by</code> (<a href="https://github.com/tidyverse/dplyr/issues/6582" class="external-link">#6582</a>).</p>
</li>
<li>
<p><code><a href="../reference/reframe.html">reframe()</a></code> is a new experimental verb that creates a new data frame by applying functions to columns of an existing data frame. It is very similar to <code><a href="../reference/summarise.html">summarise()</a></code>, with two big differences:</p>
<ul><li><p><code><a href="../reference/reframe.html">reframe()</a></code> can return an arbitrary number of rows per group, while <code><a href="../reference/summarise.html">summarise()</a></code> reduces each group down to a single row.</p></li>
<li><p><code><a href="../reference/reframe.html">reframe()</a></code> always returns an ungrouped data frame, while <code><a href="../reference/summarise.html">summarise()</a></code> might return a grouped or rowwise data frame, depending on the scenario.</p></li>
</ul><p><code><a href="../reference/reframe.html">reframe()</a></code> has been added in response to valid concern from the community that allowing <code><a href="../reference/summarise.html">summarise()</a></code> to return any number of rows per group increases the chance for accidental bugs. We still feel that this is a powerful technique, and is a principled replacement for <code><a href="../reference/do.html">do()</a></code>, so we have moved these features to <code><a href="../reference/reframe.html">reframe()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/6382" class="external-link">#6382</a>).</p>
</li>
<li><p><code><a href="../reference/group_by.html">group_by()</a></code> now uses a new algorithm for computing groups. It is often faster than the previous approach (especially when there are many groups), and in most cases there should be no changes. The one exception is with character vectors, see the C locale news bullet below for more details (<a href="https://github.com/tidyverse/dplyr/issues/4406" class="external-link">#4406</a>, <a href="https://github.com/tidyverse/dplyr/issues/6297" class="external-link">#6297</a>).</p></li>
<li><p><code><a href="../reference/arrange.html">arrange()</a></code> now uses a faster algorithm for sorting character vectors, which is heavily inspired by data.table’s <code>forder()</code>. See the C locale news bullet below for more details (<a href="https://github.com/tidyverse/dplyr/issues/4962" class="external-link">#4962</a>).</p></li>
<li>
<p>Joins have been completely overhauled to enable more flexible join operations and provide more tools for quality control. Many of these changes are inspired by data.table’s join syntax (<a href="https://github.com/tidyverse/dplyr/issues/5914" class="external-link">#5914</a>, <a href="https://github.com/tidyverse/dplyr/issues/5661" class="external-link">#5661</a>, <a href="https://github.com/tidyverse/dplyr/issues/5413" class="external-link">#5413</a>, <a href="https://github.com/tidyverse/dplyr/issues/2240" class="external-link">#2240</a>).</p>
<ul><li><p>A <em>join specification</em> can now be created through <code><a href="../reference/join_by.html">join_by()</a></code>. This allows you to specify both the left and right hand side of a join using unquoted column names, such as <code>join_by(sale_date == commercial_date)</code>. Join specifications can be supplied to any <code>*_join()</code> function as the <code>by</code> argument.</p></li>
<li>
<p>Join specifications allow for new types of joins:</p>
<ul><li><p>Equality joins: The most common join, specified by <code>==</code>. For example, <code>join_by(sale_date == commercial_date)</code>.</p></li>
<li><p>Inequality joins: For joining on inequalities, i.e.<code>&gt;=</code>, <code>&gt;</code>, <code>&lt;</code>, and <code>&lt;=</code>. For example, use <code>join_by(sale_date &gt;= commercial_date)</code> to find every commercial that aired before a particular sale.</p></li>
<li><p>Rolling joins: For “rolling” the closest match forward or backwards when there isn’t an exact match, specified by using the rolling helper, <code><a href="../reference/join_by.html">closest()</a></code>. For example, <code>join_by(closest(sale_date &gt;= commercial_date))</code> to find only the most recent commercial that aired before a particular sale.</p></li>
<li><p>Overlap joins: For detecting overlaps between sets of columns, specified by using one of the overlap helpers: <code><a href="../reference/between.html">between()</a></code>, <code><a href="../reference/join_by.html">within()</a></code>, or <code><a href="../reference/join_by.html">overlaps()</a></code>. For example, use <code>join_by(between(commercial_date, sale_date_lower, sale_date))</code> to find commercials that aired before a particular sale, as long as they occurred after some lower bound, such as 40 days before the sale was made.</p></li>
</ul><p>Note that you cannot use arbitrary expressions in the join conditions, like <code>join_by(sale_date - 40 &gt;= commercial_date)</code>. Instead, use <code><a href="../reference/mutate.html">mutate()</a></code> to create a new column containing the result of <code>sale_date - 40</code> and refer to that by name in <code><a href="../reference/join_by.html">join_by()</a></code>.</p>
</li>
<li><p><code>multiple</code> is a new argument for controlling what happens when a row in <code>x</code> matches multiple rows in <code>y</code>. For equality joins and rolling joins, where this is usually surprising, this defaults to signalling a <code>"warning"</code>, but still returns all of the matches. For inequality joins, where multiple matches are usually expected, this defaults to returning <code>"all"</code> of the matches. You can also return only the <code>"first"</code> or <code>"last"</code> match, <code>"any"</code> of the matches, or you can <code>"error"</code>.</p></li>
<li><p><code>keep</code> now defaults to <code>NULL</code> rather than <code>FALSE</code>. <code>NULL</code> implies <code>keep = FALSE</code> for equality conditions, but <code>keep = TRUE</code> for inequality conditions, since you generally want to preserve both sides of an inequality join.</p></li>
<li><p><code>unmatched</code> is a new argument for controlling what happens when a row would be dropped because it doesn’t have a match. For backwards compatibility, the default is <code>"drop"</code>, but you can also choose to <code>"error"</code> if dropped rows would be surprising.</p></li>
</ul></li>
<li><p><code><a href="../reference/across.html">across()</a></code> gains an experimental <code>.unpack</code> argument to optionally unpack (as in, <code><a href="https://tidyr.tidyverse.org/reference/pack.html" class="external-link">tidyr::unpack()</a></code>) data frames returned by functions in <code>.fns</code> (<a href="https://github.com/tidyverse/dplyr/issues/6360" class="external-link">#6360</a>).</p></li>
<li><p><code><a href="../reference/consecutive_id.html">consecutive_id()</a></code> for creating groups based on contiguous runs of the same values, like <code><a href="https://rdatatable.gitlab.io/data.table/reference/rleid.html" class="external-link">data.table::rleid()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/1534" class="external-link">#1534</a>).</p></li>
<li><p><code><a href="../reference/case_match.html">case_match()</a></code> is a “vectorised switch” variant of <code><a href="../reference/case_when.html">case_when()</a></code> that matches on values rather than logical expressions. It is like a SQL “simple” <code>CASE WHEN</code> statement, whereas <code><a href="../reference/case_when.html">case_when()</a></code> is like a SQL “searched” <code>CASE WHEN</code> statement (<a href="https://github.com/tidyverse/dplyr/issues/6328" class="external-link">#6328</a>).</p></li>
<li><p><code><a href="../reference/cross_join.html">cross_join()</a></code> is a more explicit and slightly more correct replacement for using <code>by = character()</code> during a join (<a href="https://github.com/tidyverse/dplyr/issues/6604" class="external-link">#6604</a>).</p></li>
<li><p><code><a href="../reference/pick.html">pick()</a></code> makes it easy to access a subset of columns from the current group. <code><a href="../reference/pick.html">pick()</a></code> is intended as a replacement for <code>across(.fns = NULL)</code>, <code><a href="../reference/deprec-context.html">cur_data()</a></code>, and <code><a href="../reference/deprec-context.html">cur_data_all()</a></code>. We feel that <code><a href="../reference/pick.html">pick()</a></code> is a much more evocative name when you are just trying to select a subset of columns from your data (<a href="https://github.com/tidyverse/dplyr/issues/6204" class="external-link">#6204</a>).</p></li>
<li><p><code><a href="../reference/setops.html">symdiff()</a></code> computes the symmetric difference (<a href="https://github.com/tidyverse/dplyr/issues/4811" class="external-link">#4811</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="lifecycle-changes-1-1-0">Lifecycle changes<a class="anchor" aria-label="anchor" href="#lifecycle-changes-1-1-0"></a></h3>
<div class="section level4">
<h4 id="breaking-changes-1-1-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-1-1-0"></a></h4>
<ul><li><p><code><a href="../reference/arrange.html">arrange()</a></code> and <code><a href="../reference/group_by.html">group_by()</a></code> now use the C locale, not the system locale, when ordering or grouping character vectors. This brings <em>substantial</em> performance improvements, increases reproducibility across R sessions, makes dplyr more consistent with data.table, and we believe it should affect little existing code. If it does affect your code, you can use <code>options(dplyr.legacy_locale = TRUE)</code> to quickly revert to the previous behavior. However, in general, we instead recommend that you use the new <code>.locale</code> argument to precisely specify the desired locale. For a full explanation please read the associated <a href="https://github.com/tidyverse/tidyups/blob/main/006-dplyr-group-by-ordering.md" class="external-link">grouping</a> and <a href="https://github.com/tidyverse/tidyups/blob/main/003-dplyr-radix-ordering.md" class="external-link">ordering</a> tidyups.</p></li>
<li><p><code><a href="../reference/defunct.html">bench_tbls()</a></code>, <code><a href="../reference/defunct.html">compare_tbls()</a></code>, <code><a href="../reference/defunct.html">compare_tbls2()</a></code>, <code><a href="../reference/defunct.html">eval_tbls()</a></code>, <code><a href="../reference/defunct.html">eval_tbls2()</a></code>, <code><a href="../reference/defunct.html">location()</a></code> and <code><a href="../reference/defunct.html">changes()</a></code>, deprecated in 1.0.0, are now defunct (<a href="https://github.com/tidyverse/dplyr/issues/6387" class="external-link">#6387</a>).</p></li>
<li><p><code><a href="https://tibble.tidyverse.org/reference/deprecated.html" class="external-link">frame_data()</a></code>, <code><a href="https://tibble.tidyverse.org/reference/deprecated.html" class="external-link">data_frame_()</a></code>, <code><a href="https://tibble.tidyverse.org/reference/deprecated.html" class="external-link">lst_()</a></code> and <code><a href="https://pillar.r-lib.org/reference/tbl_sum.html" class="external-link">tbl_sum()</a></code> are no longer re-exported from tibble (<a href="https://github.com/tidyverse/dplyr/issues/6276" class="external-link">#6276</a>, <a href="https://github.com/tidyverse/dplyr/issues/6277" class="external-link">#6277</a>, <a href="https://github.com/tidyverse/dplyr/issues/6278" class="external-link">#6278</a>, <a href="https://github.com/tidyverse/dplyr/issues/6284" class="external-link">#6284</a>).</p></li>
<li><p><code><a href="../reference/defunct.html">select_vars()</a></code>, <code><a href="../reference/defunct.html">rename_vars()</a></code>, <code><a href="../reference/defunct.html">select_var()</a></code> and <code><a href="../reference/defunct.html">current_vars()</a></code>, deprecated in 0.8.4, are now defunct (<a href="https://github.com/tidyverse/dplyr/issues/6387" class="external-link">#6387</a>).</p></li>
</ul></div>
<div class="section level4">
<h4 id="newly-deprecated-1-1-0">Newly deprecated<a class="anchor" aria-label="anchor" href="#newly-deprecated-1-1-0"></a></h4>
<ul><li>
<p><code><a href="../reference/across.html">across()</a></code>, <code><a href="../reference/c_across.html">c_across()</a></code>, <code><a href="../reference/across.html">if_any()</a></code>, and <code><a href="../reference/across.html">if_all()</a></code> now require the <code>.cols</code> and <code>.fns</code> arguments. In general, we now recommend that you use <code><a href="../reference/pick.html">pick()</a></code> instead of an empty <code><a href="../reference/across.html">across()</a></code> call or <code><a href="../reference/across.html">across()</a></code> with no <code>.fns</code> (e.g. <code>across(c(x, y))</code>. (<a href="https://github.com/tidyverse/dplyr/issues/6523" class="external-link">#6523</a>).</p>
<ul><li><p>Relying on the previous default of <code>.cols = everything()</code> is deprecated. We have skipped the soft-deprecation stage in this case, because indirect usage of <code><a href="../reference/across.html">across()</a></code> and friends in this way is rare.</p></li>
<li><p>Relying on the previous default of <code>.fns = NULL</code> is not yet formally soft-deprecated, because there was no good alternative until now, but it is discouraged and will be soft-deprecated in the next minor release.</p></li>
</ul></li>
<li><p>Passing <code>...</code> to <code><a href="../reference/across.html">across()</a></code> is soft-deprecated because it’s ambiguous when those arguments are evaluated. Now, instead of (e.g.) <code>across(a:b, mean, na.rm = TRUE)</code> you should write <code>across(a:b, ~ mean(.x, na.rm = TRUE))</code> (<a href="https://github.com/tidyverse/dplyr/issues/6073" class="external-link">#6073</a>).</p></li>
<li><p><code><a href="../reference/all_equal.html">all_equal()</a></code> is deprecated. We’ve advised against it for some time, and we explicitly recommend you use <code><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal()</a></code>, manually reordering the rows and columns as needed (<a href="https://github.com/tidyverse/dplyr/issues/6324" class="external-link">#6324</a>).</p></li>
<li><p><code><a href="../reference/deprec-context.html">cur_data()</a></code> and <code><a href="../reference/deprec-context.html">cur_data_all()</a></code> are soft-deprecated in favour of <code><a href="../reference/pick.html">pick()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/6204" class="external-link">#6204</a>).</p></li>
<li><p>Using <code>by = character()</code> to perform a cross join is now soft-deprecated in favor of <code><a href="../reference/cross_join.html">cross_join()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/6604" class="external-link">#6604</a>).</p></li>
<li><p><code><a href="../reference/filter.html">filter()</a></code>ing with a 1-column matrix is deprecated (<a href="https://github.com/tidyverse/dplyr/issues/6091" class="external-link">#6091</a>).</p></li>
<li><p><code>progress_estimate()</code> is deprecated for all uses (<a href="https://github.com/tidyverse/dplyr/issues/6387" class="external-link">#6387</a>).</p></li>
<li><p>Using <code><a href="../reference/summarise.html">summarise()</a></code> to produce a 0 or &gt;1 row “summary” is deprecated in favor of the new <code><a href="../reference/reframe.html">reframe()</a></code>. See the NEWS bullet about <code><a href="../reference/reframe.html">reframe()</a></code> for more details (<a href="https://github.com/tidyverse/dplyr/issues/6382" class="external-link">#6382</a>).</p></li>
<li><p>All functions deprecated in 1.0.0 (released April 2020) and earlier now warn every time you use them (<a href="https://github.com/tidyverse/dplyr/issues/6387" class="external-link">#6387</a>). This includes <code><a href="../reference/combine.html">combine()</a></code>, <code><a href="../reference/src_local.html">src_local()</a></code>, <code><a href="../reference/src_dbi.html">src_mysql()</a></code>, <code><a href="../reference/src_dbi.html">src_postgres()</a></code>, <code><a href="../reference/src_dbi.html">src_sqlite()</a></code>, <code><a href="../reference/se-deprecated.html">rename_vars_()</a></code>, <code><a href="../reference/se-deprecated.html">select_vars_()</a></code>, <code><a href="../reference/summarise_each.html">summarise_each_()</a></code>, <code><a href="../reference/summarise_each.html">mutate_each_()</a></code>, <code><a href="../reference/tbl_df.html">as.tbl()</a></code>, <code><a href="../reference/tbl_df.html">tbl_df()</a></code>, and a handful of older arguments. They are likely to be made defunct in the next major version (but not before mid 2024).</p></li>
<li><p><code><a href="../reference/slice.html">slice()</a></code>ing with a 1-column matrix is deprecated.</p></li>
</ul></div>
<div class="section level4">
<h4 id="newly-superseded-1-1-0">Newly superseded<a class="anchor" aria-label="anchor" href="#newly-superseded-1-1-0"></a></h4>
<ul><li><p><code><a href="../reference/recode.html">recode()</a></code> is superseded in favour of <code><a href="../reference/case_match.html">case_match()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/6433" class="external-link">#6433</a>).</p></li>
<li><p><code><a href="../reference/recode.html">recode_factor()</a></code> is superseded. We don’t have a direct replacement for it yet, but we plan to add one to forcats. In the meantime you can often use <code>case_match(.ptype = factor(levels = ))</code> instead (<a href="https://github.com/tidyverse/dplyr/issues/6433" class="external-link">#6433</a>).</p></li>
<li><p><code><a href="../reference/transmute.html">transmute()</a></code> is superseded in favour of <code>mutate(.keep = "none")</code> (<a href="https://github.com/tidyverse/dplyr/issues/6414" class="external-link">#6414</a>).</p></li>
</ul></div>
<div class="section level4">
<h4 id="newly-stable-1-1-0">Newly stable<a class="anchor" aria-label="anchor" href="#newly-stable-1-1-0"></a></h4>
<ul><li><p>The <code>.keep</code>, <code>.before</code>, and <code>.after</code> arguments to <code><a href="../reference/mutate.html">mutate()</a></code> have moved from experimental to stable.</p></li>
<li><p>The <code>rows_*()</code> family of functions have moved from experimental to stable.</p></li>
</ul></div>
</div>
<div class="section level3">
<h3 id="vctrs-1-1-0">vctrs<a class="anchor" aria-label="anchor" href="#vctrs-1-1-0"></a></h3>
<p>Many of dplyr’s vector functions have been rewritten to make use of the vctrs package, bringing greater consistency and improved performance.</p>
<ul><li><p><code><a href="../reference/between.html">between()</a></code> can now work with all vector types, not just numeric and date-time. Additionally, <code>left</code> and <code>right</code> can now also be vectors (with the same length as <code>x</code>), and <code>x</code>, <code>left</code>, and <code>right</code> are cast to the common type before the comparison is made (<a href="https://github.com/tidyverse/dplyr/issues/6183" class="external-link">#6183</a>, <a href="https://github.com/tidyverse/dplyr/issues/6260" class="external-link">#6260</a>, <a href="https://github.com/tidyverse/dplyr/issues/6478" class="external-link">#6478</a>).</p></li>
<li>
<p><code><a href="../reference/case_when.html">case_when()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/5106" class="external-link">#5106</a>):</p>
<ul><li><p>Has a new <code>.default</code> argument that is intended to replace usage of <code>TRUE ~ default_value</code> as a more explicit and readable way to specify a default value. In the future, we will deprecate the unsafe recycling of the LHS inputs that allows <code>TRUE ~</code> to work, so we encourage you to switch to using <code>.default</code>.</p></li>
<li>
<p>No longer requires exact matching of the types of RHS values. For example, the following no longer requires you to use <code>NA_character_</code>.</p>
<pre><code><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"little"</span>, <span class="st">"unknown"</span>, <span class="st">"small"</span>, <span class="st">"missing"</span>, <span class="st">"large"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/case_when.html">case_when</a></span><span class="op">(</span></span>
<span>  <span class="va">x</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"little"</span>, <span class="st">"small"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"one"</span>,</span>
<span>  <span class="va">x</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"big"</span>, <span class="st">"large"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"two"</span>,</span>
<span>  <span class="va">x</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"missing"</span>, <span class="st">"unknown"</span><span class="op">)</span> <span class="op">~</span> <span class="cn">NA</span></span>
<span><span class="op">)</span></span></code></pre>
</li>
<li><p>Supports a larger variety of RHS value types. For example, you can use a data frame to create multiple columns at once.</p></li>
<li><p>Has new <code>.ptype</code> and <code>.size</code> arguments which allow you to enforce a particular output type and size.</p></li>
<li><p>Has a better error when types or lengths were incompatible (<a href="https://github.com/tidyverse/dplyr/issues/6261" class="external-link">#6261</a>, <a href="https://github.com/tidyverse/dplyr/issues/6206" class="external-link">#6206</a>).</p></li>
</ul></li>
<li>
<p><code><a href="../reference/coalesce.html">coalesce()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/6265" class="external-link">#6265</a>):</p>
<ul><li><p>Discards <code>NULL</code> inputs up front.</p></li>
<li><p>No longer iterates over the columns of data frame input. Instead, a row is now only coalesced if it is entirely missing, which is consistent with <code><a href="https://vctrs.r-lib.org/reference/missing.html" class="external-link">vctrs::vec_detect_missing()</a></code> and greatly simplifies the implementation.</p></li>
<li><p>Has new <code>.ptype</code> and <code>.size</code> arguments which allow you to enforce a particular output type and size.</p></li>
</ul></li>
<li>
<p><code><a href="../reference/nth.html">first()</a></code>, <code><a href="../reference/nth.html">last()</a></code>, and <code><a href="../reference/nth.html">nth()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/6331" class="external-link">#6331</a>):</p>
<ul><li><p>When used on a data frame, these functions now return a single row rather than a single column. This is more consistent with the vctrs principle that a data frame is generally treated as a vector of rows.</p></li>
<li><p>The <code>default</code> is no longer “guessed”, and will always automatically be set to a missing value appropriate for the type of <code>x</code>.</p></li>
<li><p>Error if <code>n</code> is not an integer. <code>nth(x, n = 2)</code> is fine, but <code>nth(x, n = 2.5)</code> is now an error.</p></li>
<li><p>No longer support indexing into scalar objects, like <code>&lt;lm&gt;</code> or scalar S4 objects (<a href="https://github.com/tidyverse/dplyr/issues/6670" class="external-link">#6670</a>).</p></li>
</ul><p>Additionally, they have all gained an <code>na_rm</code> argument since they are summary functions (<a href="https://github.com/tidyverse/dplyr/issues/6242" class="external-link">#6242</a>, with contributions from <a href="https://github.com/tnederlof" class="external-link">@tnederlof</a>).</p>
</li>
<li>
<p><code><a href="../reference/if_else.html">if_else()</a></code> gains most of the same benefits as <code><a href="../reference/case_when.html">case_when()</a></code>. In particular, <code><a href="../reference/if_else.html">if_else()</a></code> now takes the common type of <code>true</code>, <code>false</code>, and <code>missing</code> to determine the output type, meaning that you can now reliably use <code>NA</code>, rather than <code>NA_character_</code> and friends (<a href="https://github.com/tidyverse/dplyr/issues/6243" class="external-link">#6243</a>).</p>
<p><code><a href="../reference/if_else.html">if_else()</a></code> also no longer allows you to supply <code>NULL</code> for either <code>true</code> or <code>false</code>, which was an undocumented usage that we consider to be off-label, because <code>true</code> and <code>false</code> are intended to be (and documented to be) vector inputs (<a href="https://github.com/tidyverse/dplyr/issues/6730" class="external-link">#6730</a>).</p>
</li>
<li>
<p><code><a href="../reference/na_if.html">na_if()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/6329" class="external-link">#6329</a>) now casts <code>y</code> to the type of <code>x</code> before comparison, which makes it clearer that this function is type and size stable on <code>x</code>. In particular, this means that you can no longer do <code>na_if(&lt;tibble&gt;, 0)</code>, which previously accidentally allowed you to replace any instance of <code>0</code> across every column of the tibble with <code>NA</code>. <code><a href="../reference/na_if.html">na_if()</a></code> was never intended to work this way, and this is considered off-label usage.</p>
<p>You can also now replace <code>NaN</code> values in <code>x</code> with <code>na_if(x, NaN)</code>.</p>
</li>
<li><p><code><a href="../reference/lead-lag.html">lag()</a></code> and <code><a href="../reference/lead-lag.html">lead()</a></code> now cast <code>default</code> to the type of <code>x</code>, rather than taking the common type. This ensures that these functions are type stable on <code>x</code> (<a href="https://github.com/tidyverse/dplyr/issues/6330" class="external-link">#6330</a>).</p></li>
<li><p><code><a href="../reference/row_number.html">row_number()</a></code>, <code><a href="../reference/row_number.html">min_rank()</a></code>, <code><a href="../reference/row_number.html">dense_rank()</a></code>, <code><a href="../reference/ntile.html">ntile()</a></code>, <code><a href="../reference/percent_rank.html">cume_dist()</a></code>, and <code><a href="../reference/percent_rank.html">percent_rank()</a></code> are faster and work for more types. You can now rank by multiple columns by supplying a data frame (<a href="https://github.com/tidyverse/dplyr/issues/6428" class="external-link">#6428</a>).</p></li>
<li><p><code><a href="../reference/with_order.html">with_order()</a></code> now checks that the size of <code>order_by</code> is the same size as <code>x</code>, and now works correctly when <code>order_by</code> is a data frame (<a href="https://github.com/tidyverse/dplyr/issues/6334" class="external-link">#6334</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-and-bug-fixes-1-1-0">Minor improvements and bug fixes<a class="anchor" aria-label="anchor" href="#minor-improvements-and-bug-fixes-1-1-0"></a></h3>
<ul><li><p>Fixed an issue with latest rlang that caused internal tools (such as <code>mask$eval_all_summarise()</code>) to be mentioned in error messages (<a href="https://github.com/tidyverse/dplyr/issues/6308" class="external-link">#6308</a>).</p></li>
<li><p>Warnings are enriched with contextualised information in <code><a href="../reference/summarise.html">summarise()</a></code> and <code><a href="../reference/filter.html">filter()</a></code> just like they have been in <code><a href="../reference/mutate.html">mutate()</a></code> and <code><a href="../reference/arrange.html">arrange()</a></code>.</p></li>
<li><p>Joins now reference the correct column in <code>y</code> when a type error is thrown while joining on two columns with different names (<a href="https://github.com/tidyverse/dplyr/issues/6465" class="external-link">#6465</a>).</p></li>
<li><p>Joins on very wide tables are no longer bottlenecked by the application of <code>suffix</code> (<a href="https://github.com/tidyverse/dplyr/issues/6642" class="external-link">#6642</a>).</p></li>
<li><p><code>*_join()</code> now error if you supply them with additional arguments that aren’t used (<a href="https://github.com/tidyverse/dplyr/issues/6228" class="external-link">#6228</a>).</p></li>
<li><p><code><a href="../reference/across.html">across()</a></code> used without functions inside a rowwise-data frame no longer generates an invalid data frame (<a href="https://github.com/tidyverse/dplyr/issues/6264" class="external-link">#6264</a>).</p></li>
<li><p>Anonymous functions supplied with <code>function()</code> and <code>\()</code> are now inlined by <code><a href="../reference/across.html">across()</a></code> if possible, which slightly improves performance and makes possible further optimisations in the future.</p></li>
<li><p>Functions supplied to <code><a href="../reference/across.html">across()</a></code> are no longer masked by columns (<a href="https://github.com/tidyverse/dplyr/issues/6545" class="external-link">#6545</a>). For instance, <code>across(1:2, mean)</code> will now work as expected even if there is a column called <code>mean</code>.</p></li>
<li><p><code><a href="../reference/across.html">across()</a></code> will now error when supplied <code>...</code> without a <code>.fns</code> argument (<a href="https://github.com/tidyverse/dplyr/issues/6638" class="external-link">#6638</a>).</p></li>
<li><p><code><a href="../reference/arrange.html">arrange()</a></code> now correctly ignores <code>NULL</code> inputs (<a href="https://github.com/tidyverse/dplyr/issues/6193" class="external-link">#6193</a>).</p></li>
<li><p><code><a href="../reference/arrange.html">arrange()</a></code> now works correctly when <code><a href="../reference/across.html">across()</a></code> calls are used as the 2nd (or more) ordering expression (<a href="https://github.com/tidyverse/dplyr/issues/6495" class="external-link">#6495</a>).</p></li>
<li><p><code>arrange(df, mydesc::desc(x))</code> works correctly when mydesc re-exports <code><a href="../reference/desc.html">dplyr::desc()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/6231" class="external-link">#6231</a>).</p></li>
<li><p><code><a href="../reference/c_across.html">c_across()</a></code> now evaluates <code><a href="https://tidyselect.r-lib.org/reference/all_of.html" class="external-link">all_of()</a></code> correctly and no longer allows you to accidentally select grouping variables (<a href="https://github.com/tidyverse/dplyr/issues/6522" class="external-link">#6522</a>).</p></li>
<li><p><code><a href="../reference/c_across.html">c_across()</a></code> now throws a more informative error if you try to rename during column selection (<a href="https://github.com/tidyverse/dplyr/issues/6522" class="external-link">#6522</a>).</p></li>
<li><p>dplyr no longer provides <code><a href="../reference/count.html">count()</a></code> and <code><a href="../reference/count.html">tally()</a></code> methods for <code>tbl_sql</code>. These methods have been accidentally overriding the <code>tbl_lazy</code> methods that dbplyr provides, which has resulted in issues with the grouping structure of the output (<a href="https://github.com/tidyverse/dplyr/issues/6338" class="external-link">#6338</a>, tidyverse/dbplyr#940).</p></li>
<li><p><code><a href="../reference/context.html">cur_group()</a></code> now works correctly with zero row grouped data frames (<a href="https://github.com/tidyverse/dplyr/issues/6304" class="external-link">#6304</a>).</p></li>
<li><p><code><a href="../reference/desc.html">desc()</a></code> gives a useful error message if you give it a non-vector (<a href="https://github.com/tidyverse/dplyr/issues/6028" class="external-link">#6028</a>).</p></li>
<li><p><code><a href="../reference/distinct.html">distinct()</a></code> now retains attributes of bare data frames (<a href="https://github.com/tidyverse/dplyr/issues/6318" class="external-link">#6318</a>).</p></li>
<li><p><code><a href="../reference/distinct.html">distinct()</a></code> returns columns ordered the way you request, not the same as the input data (<a href="https://github.com/tidyverse/dplyr/issues/6156" class="external-link">#6156</a>).</p></li>
<li><p>Error messages in <code><a href="../reference/group_by.html">group_by()</a></code>, <code><a href="../reference/distinct.html">distinct()</a></code>, <code><a href="../reference/count.html">tally()</a></code>, and <code><a href="../reference/count.html">count()</a></code> are now more relevant (<a href="https://github.com/tidyverse/dplyr/issues/6139" class="external-link">#6139</a>).</p></li>
<li><p><code><a href="../reference/group_by_prepare.html">group_by_prepare()</a></code> loses the <code>caller_env</code> argument. It was rarely used and it is no longer needed (<a href="https://github.com/tidyverse/dplyr/issues/6444" class="external-link">#6444</a>).</p></li>
<li><p><code><a href="../reference/group_map.html">group_walk()</a></code> gains an explicit <code>.keep</code> argument (<a href="https://github.com/tidyverse/dplyr/issues/6530" class="external-link">#6530</a>).</p></li>
<li>
<p>Warnings emitted inside <code><a href="../reference/mutate.html">mutate()</a></code> and variants are now collected and stashed away. Run the new <code><a href="../reference/last_dplyr_warnings.html">last_dplyr_warnings()</a></code> function to see the warnings emitted within dplyr verbs during the last top-level command.</p>
<p>This fixes performance issues when thousands of warnings are emitted with rowwise and grouped data frames (<a href="https://github.com/tidyverse/dplyr/issues/6005" class="external-link">#6005</a>, <a href="https://github.com/tidyverse/dplyr/issues/6236" class="external-link">#6236</a>).</p>
</li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> behaves a little better with 0-row rowwise inputs (<a href="https://github.com/tidyverse/dplyr/issues/6303" class="external-link">#6303</a>).</p></li>
<li><p>A rowwise <code><a href="../reference/mutate.html">mutate()</a></code> now automatically unlists list-columns containing length 1 vectors (<a href="https://github.com/tidyverse/dplyr/issues/6302" class="external-link">#6302</a>).</p></li>
<li><p><code><a href="../reference/nest_join.html">nest_join()</a></code> has gained the <code>na_matches</code> argument that all other joins have.</p></li>
<li><p><code><a href="../reference/nest_join.html">nest_join()</a></code> now preserves the type of <code>y</code> (<a href="https://github.com/tidyverse/dplyr/issues/6295" class="external-link">#6295</a>).</p></li>
<li><p><code><a href="../reference/n_distinct.html">n_distinct()</a></code> now errors if you don’t give it any input (<a href="https://github.com/tidyverse/dplyr/issues/6535" class="external-link">#6535</a>).</p></li>
<li><p><code><a href="../reference/nth.html">nth()</a></code>, <code><a href="../reference/nth.html">first()</a></code>, <code><a href="../reference/nth.html">last()</a></code>, and <code><a href="../reference/with_order.html">with_order()</a></code> now sort character <code>order_by</code> vectors in the C locale. Using character vectors for <code>order_by</code> is rare, so we expect this to have little practical impact (<a href="https://github.com/tidyverse/dplyr/issues/6451" class="external-link">#6451</a>).</p></li>
<li><p><code><a href="../reference/ntile.html">ntile()</a></code> now requires <code>n</code> to be a single positive integer.</p></li>
<li><p><code><a href="../reference/relocate.html">relocate()</a></code> now works correctly with empty data frames and when <code>.before</code> or <code>.after</code> result in empty selections (<a href="https://github.com/tidyverse/dplyr/issues/6167" class="external-link">#6167</a>).</p></li>
<li><p><code><a href="../reference/relocate.html">relocate()</a></code> no longer drops attributes of bare data frames (<a href="https://github.com/tidyverse/dplyr/issues/6341" class="external-link">#6341</a>).</p></li>
<li><p><code><a href="../reference/relocate.html">relocate()</a></code> now retains the last name change when a single column is renamed multiple times while it is being moved. This better matches the behavior of <code><a href="../reference/rename.html">rename()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/6209" class="external-link">#6209</a>, with help from <a href="https://github.com/eutwt" class="external-link">@eutwt</a>).</p></li>
<li><p><code><a href="../reference/rename.html">rename()</a></code> now contains examples of using <code><a href="https://tidyselect.r-lib.org/reference/all_of.html" class="external-link">all_of()</a></code> and <code><a href="https://tidyselect.r-lib.org/reference/all_of.html" class="external-link">any_of()</a></code> to rename using a named character vector (<a href="https://github.com/tidyverse/dplyr/issues/6644" class="external-link">#6644</a>).</p></li>
<li><p><code><a href="../reference/rename.html">rename_with()</a></code> now disallows renaming in the <code>.cols</code> tidy-selection (<a href="https://github.com/tidyverse/dplyr/issues/6561" class="external-link">#6561</a>).</p></li>
<li><p><code><a href="../reference/rename.html">rename_with()</a></code> now checks that the result of <code>.fn</code> is the right type and size (<a href="https://github.com/tidyverse/dplyr/issues/6561" class="external-link">#6561</a>).</p></li>
<li><p><code><a href="../reference/rows.html">rows_insert()</a></code> now checks that <code>y</code> contains the <code>by</code> columns (<a href="https://github.com/tidyverse/dplyr/issues/6652" class="external-link">#6652</a>).</p></li>
<li><p><code><a href="../reference/setops.html">setequal()</a></code> ignores differences between freely coercible types (e.g. integer and double) (<a href="https://github.com/tidyverse/dplyr/issues/6114" class="external-link">#6114</a>) and ignores duplicated rows (<a href="https://github.com/tidyverse/dplyr/issues/6057" class="external-link">#6057</a>).</p></li>
<li><p><code><a href="../reference/slice.html">slice()</a></code> helpers again produce output equivalent to <code>slice(.data, 0)</code> when the <code>n</code> or <code>prop</code> argument is 0, fixing a bug introduced in the previous version (<a href="https://github.com/eutwt" class="external-link">@eutwt</a>, <a href="https://github.com/tidyverse/dplyr/issues/6184" class="external-link">#6184</a>).</p></li>
<li><p><code><a href="../reference/slice.html">slice()</a></code> with no inputs now returns 0 rows. This is mostly for theoretical consistency (<a href="https://github.com/tidyverse/dplyr/issues/6573" class="external-link">#6573</a>).</p></li>
<li><p><code><a href="../reference/slice.html">slice()</a></code> now errors if any expressions in <code>...</code> are named. This helps avoid accidentally misspelling an optional argument, such as <code>.by</code> (<a href="https://github.com/tidyverse/dplyr/issues/6554" class="external-link">#6554</a>).</p></li>
<li><p><code>slice_*()</code> now requires <code>n</code> to be an integer.</p></li>
<li><p><code>slice_*()</code> generics now perform argument validation. This should make methods more consistent and simpler to implement (<a href="https://github.com/tidyverse/dplyr/issues/6361" class="external-link">#6361</a>).</p></li>
<li><p><code><a href="../reference/slice.html">slice_min()</a></code> and <code><a href="../reference/slice.html">slice_max()</a></code> can <code>order_by</code> multiple variables if you supply them as a data.frame or tibble (<a href="https://github.com/tidyverse/dplyr/issues/6176" class="external-link">#6176</a>).</p></li>
<li><p><code><a href="../reference/slice.html">slice_min()</a></code> and <code><a href="../reference/slice.html">slice_max()</a></code> now consistently include missing values in the result if necessary (i.e. there aren’t enough non-missing values to reach the <code>n</code> or <code>prop</code> you have selected). If you don’t want missing values to be included at all, set <code>na_rm = TRUE</code> (<a href="https://github.com/tidyverse/dplyr/issues/6177" class="external-link">#6177</a>).</p></li>
<li><p><code><a href="../reference/slice.html">slice_sample()</a></code> now accepts negative <code>n</code> and <code>prop</code> values (<a href="https://github.com/tidyverse/dplyr/issues/6402" class="external-link">#6402</a>).</p></li>
<li><p><code><a href="../reference/slice.html">slice_sample()</a></code> returns a data frame or group with the same number of rows as the input when <code>replace = FALSE</code> and <code>n</code> is larger than the number of rows or <code>prop</code> is larger than 1. This reverts a change made in 1.0.8, returning to the behavior of 1.0.7 (<a href="https://github.com/tidyverse/dplyr/issues/6185" class="external-link">#6185</a>)</p></li>
<li><p><code><a href="../reference/slice.html">slice_sample()</a></code> now gives a more informative error when <code>replace = FALSE</code> and the number of rows requested in the sample exceeds the number of rows in the data (<a href="https://github.com/tidyverse/dplyr/issues/6271" class="external-link">#6271</a>).</p></li>
<li><p><code>storms</code> has been updated to include 2021 data and some missing storms that were omitted due to an error (<a href="https://github.com/steveharoz" class="external-link">@steveharoz</a>, <a href="https://github.com/tidyverse/dplyr/issues/6320" class="external-link">#6320</a>).</p></li>
<li><p><code><a href="../reference/summarise.html">summarise()</a></code> now correctly recycles named 0-column data frames (<a href="https://github.com/tidyverse/dplyr/issues/6509" class="external-link">#6509</a>).</p></li>
<li><p><code><a href="../reference/setops.html">union_all()</a></code>, like <code><a href="../reference/setops.html">union()</a></code>, now requires that data frames be compatible: i.e. they have the same columns, and the columns have compatible types.</p></li>
<li><p><code><a href="https://tidyselect.r-lib.org/reference/where.html" class="external-link">where()</a></code> is re-exported from tidyselect (<a href="https://github.com/tidyverse/dplyr/issues/6597" class="external-link">#6597</a>).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.10" id="dplyr-1010">dplyr 1.0.10<a class="anchor" aria-label="anchor" href="#dplyr-1010"></a></h2><p class="text-muted">CRAN release: 2022-09-01</p>
<p>Hot patch release to resolve R CMD check failures.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.9" id="dplyr-109">dplyr 1.0.9<a class="anchor" aria-label="anchor" href="#dplyr-109"></a></h2><p class="text-muted">CRAN release: 2022-04-28</p>
<ul><li><p>New <code><a href="../reference/rows.html">rows_append()</a></code> which works like <code><a href="../reference/rows.html">rows_insert()</a></code> but ignores keys and allows you to insert arbitrary rows with a guarantee that the type of <code>x</code> won’t change (<a href="https://github.com/tidyverse/dplyr/issues/6249" class="external-link">#6249</a>, thanks to <a href="https://github.com/krlmlr" class="external-link">@krlmlr</a> for the implementation and <a href="https://github.com/mgirlich" class="external-link">@mgirlich</a> for the idea).</p></li>
<li><p>The <code>rows_*()</code> functions no longer require that the key values in <code>x</code> uniquely identify each row. Additionally, <code><a href="../reference/rows.html">rows_insert()</a></code> and <code><a href="../reference/rows.html">rows_delete()</a></code> no longer require that the key values in <code>y</code> uniquely identify each row. Relaxing this restriction should make these functions more practically useful for data frames, and alternative backends can enforce this in other ways as needed (i.e. through primary keys) (<a href="https://github.com/tidyverse/dplyr/issues/5553" class="external-link">#5553</a>).</p></li>
<li><p><code><a href="../reference/rows.html">rows_insert()</a></code> gained a new <code>conflict</code> argument allowing you greater control over rows in <code>y</code> with keys that conflict with keys in <code>x</code>. A conflict arises if a key in <code>y</code> already exists in <code>x</code>. By default, a conflict results in an error, but you can now also <code>"ignore"</code> these <code>y</code> rows. This is very similar to the <code>ON CONFLICT DO NOTHING</code> command from SQL (<a href="https://github.com/tidyverse/dplyr/issues/5588" class="external-link">#5588</a>, with helpful additions from <a href="https://github.com/mgirlich" class="external-link">@mgirlich</a> and <a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>).</p></li>
<li><p><code><a href="../reference/rows.html">rows_update()</a></code>, <code><a href="../reference/rows.html">rows_patch()</a></code>, and <code><a href="../reference/rows.html">rows_delete()</a></code> gained a new <code>unmatched</code> argument allowing you greater control over rows in <code>y</code> with keys that are unmatched by the keys in <code>x</code>. By default, an unmatched key results in an error, but you can now also <code>"ignore"</code> these <code>y</code> rows (<a href="https://github.com/tidyverse/dplyr/issues/5984" class="external-link">#5984</a>, <a href="https://github.com/tidyverse/dplyr/issues/5699" class="external-link">#5699</a>).</p></li>
<li><p><code><a href="../reference/rows.html">rows_delete()</a></code> no longer requires that the columns of <code>y</code> be a strict subset of <code>x</code>. Only the columns specified through <code>by</code> will be utilized from <code>y</code>, all others will be dropped with a message.</p></li>
<li><p>The <code>rows_*()</code> functions now always retain the column types of <code>x</code>. This behavior was documented, but previously wasn’t being applied correctly (<a href="https://github.com/tidyverse/dplyr/issues/6240" class="external-link">#6240</a>).</p></li>
<li><p>The <code>rows_*()</code> functions now fail elegantly if <code>y</code> is a zero column data frame and <code>by</code> isn’t specified (<a href="https://github.com/tidyverse/dplyr/issues/6179" class="external-link">#6179</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.8" id="dplyr-108">dplyr 1.0.8<a class="anchor" aria-label="anchor" href="#dplyr-108"></a></h2><p class="text-muted">CRAN release: 2022-02-08</p>
<ul><li><p>Better display of error messages thanks to rlang 1.0.0.</p></li>
<li><p><code>mutate(.keep = "none")</code> is no longer identical to <code><a href="../reference/transmute.html">transmute()</a></code>. <code><a href="../reference/transmute.html">transmute()</a></code> has not been changed, and completely ignores the column ordering of the existing data, instead relying on the ordering of expressions supplied through <code>...</code>. <code>mutate(.keep = "none")</code> has been changed to ensure that pre-existing columns are never moved, which aligns more closely with the other <code>.keep</code> options (<a href="https://github.com/tidyverse/dplyr/issues/6086" class="external-link">#6086</a>).</p></li>
<li><p><code><a href="../reference/filter.html">filter()</a></code> forbids matrix results (<a href="https://github.com/tidyverse/dplyr/issues/5973" class="external-link">#5973</a>) and warns about data frame results, especially data frames created from <code><a href="../reference/across.html">across()</a></code> with a hint to use <code><a href="../reference/across.html">if_any()</a></code> or <code><a href="../reference/across.html">if_all()</a></code>.</p></li>
<li><p><code><a href="../reference/slice.html">slice()</a></code> helpers (<code><a href="../reference/slice.html">slice_head()</a></code>, <code><a href="../reference/slice.html">slice_tail()</a></code>, <code><a href="../reference/slice.html">slice_min()</a></code>, <code><a href="../reference/slice.html">slice_max()</a></code>) now accept negative values for <code>n</code> and <code>prop</code> (<a href="https://github.com/tidyverse/dplyr/issues/5961" class="external-link">#5961</a>).</p></li>
<li><p><code><a href="../reference/slice.html">slice()</a></code> now indicates which group produces an error (<a href="https://github.com/tidyverse/dplyr/issues/5931" class="external-link">#5931</a>).</p></li>
<li><p><code><a href="../reference/deprec-context.html">cur_data()</a></code> and <code><a href="../reference/deprec-context.html">cur_data_all()</a></code> don’t simplify list columns in rowwise data frames (<a href="https://github.com/tidyverse/dplyr/issues/5901" class="external-link">#5901</a>).</p></li>
<li><p>dplyr now uses <code><a href="https://rlang.r-lib.org/reference/is_installed.html" class="external-link">rlang::check_installed()</a></code> to prompt you whether to install required packages that are missing.</p></li>
<li><p><code>storms</code> data updated to 2020 (<a href="https://github.com/steveharoz" class="external-link">@steveharoz</a>, <a href="https://github.com/tidyverse/dplyr/issues/5899" class="external-link">#5899</a>).</p></li>
<li><p><code><a href="../reference/coalesce.html">coalesce()</a></code> accepts 1-D arrays (<a href="https://github.com/tidyverse/dplyr/issues/5557" class="external-link">#5557</a>).</p></li>
<li><p>The deprecated <code><a href="https://tibble.tidyverse.org/reference/trunc_mat.html" class="external-link">trunc_mat()</a></code> is no longer reexported from dplyr (<a href="https://github.com/tidyverse/dplyr/issues/6141" class="external-link">#6141</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.7" id="dplyr-107">dplyr 1.0.7<a class="anchor" aria-label="anchor" href="#dplyr-107"></a></h2><p class="text-muted">CRAN release: 2021-06-18</p>
<ul><li><p><code><a href="../reference/across.html">across()</a></code> uses the formula environment when inlining them (<a href="https://github.com/tidyverse/dplyr/issues/5886" class="external-link">#5886</a>).</p></li>
<li><p><code>summarise.rowwise_df()</code> is quiet when the result is ungrouped (<a href="https://github.com/tidyverse/dplyr/issues/5875" class="external-link">#5875</a>).</p></li>
<li><p><code><a href="../reference/c_across.html">c_across()</a></code> and <code><a href="../reference/across.html">across()</a></code> key deparsing not confused by long calls (<a href="https://github.com/tidyverse/dplyr/issues/5883" class="external-link">#5883</a>).</p></li>
<li><p><code><a href="../reference/across.html">across()</a></code> handles named selections (<a href="https://github.com/tidyverse/dplyr/issues/5207" class="external-link">#5207</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.6" id="dplyr-106">dplyr 1.0.6<a class="anchor" aria-label="anchor" href="#dplyr-106"></a></h2><p class="text-muted">CRAN release: 2021-05-05</p>
<ul><li><p><code><a href="../reference/count.html">add_count()</a></code> is now generic (<a href="https://github.com/tidyverse/dplyr/issues/5837" class="external-link">#5837</a>).</p></li>
<li><p><code><a href="../reference/across.html">if_any()</a></code> and <code><a href="../reference/across.html">if_all()</a></code> abort when a predicate is mistakingly used as <code>.cols=</code> (<a href="https://github.com/tidyverse/dplyr/issues/5732" class="external-link">#5732</a>).</p></li>
<li><p>Multiple calls to <code><a href="../reference/across.html">if_any()</a></code> and/or <code><a href="../reference/across.html">if_all()</a></code> in the same expression are now properly disambiguated (<a href="https://github.com/tidyverse/dplyr/issues/5782" class="external-link">#5782</a>).</p></li>
<li><p><code><a href="../reference/filter.html">filter()</a></code> now inlines <code><a href="../reference/across.html">if_any()</a></code> and <code><a href="../reference/across.html">if_all()</a></code> expressions. This greatly improves performance with grouped data frames.</p></li>
<li><p>Fixed behaviour of <code>...</code> in top-level <code><a href="../reference/across.html">across()</a></code> calls (<a href="https://github.com/tidyverse/dplyr/issues/5813" class="external-link">#5813</a>, <a href="https://github.com/tidyverse/dplyr/issues/5832" class="external-link">#5832</a>).</p></li>
<li><p><code><a href="../reference/across.html">across()</a></code> now inlines lambda-formulas. This is slightly more performant and will allow more optimisations in the future.</p></li>
<li><p>Fixed issue in <code><a href="../reference/bind_rows.html">bind_rows()</a></code> causing lists to be incorrectly transformed as data frames (<a href="https://github.com/tidyverse/dplyr/issues/5417" class="external-link">#5417</a>, <a href="https://github.com/tidyverse/dplyr/issues/5749" class="external-link">#5749</a>).</p></li>
<li><p><code><a href="../reference/select.html">select()</a></code> no longer creates duplicate variables when renaming a variable to the same name as a grouping variable (<a href="https://github.com/tidyverse/dplyr/issues/5841" class="external-link">#5841</a>).</p></li>
<li><p><code>dplyr_col_select()</code> keeps attributes for bare data frames (<a href="https://github.com/tidyverse/dplyr/issues/5294" class="external-link">#5294</a>, <a href="https://github.com/tidyverse/dplyr/issues/5831" class="external-link">#5831</a>).</p></li>
<li><p>Fixed quosure handling in <code><a href="../reference/group_by.html">dplyr::group_by()</a></code> that caused issues with extra arguments (tidyverse/lubridate#959).</p></li>
<li><p>Removed the <code>name</code> argument from the <code><a href="../reference/compute.html">compute()</a></code> generic (<a href="https://github.com/ianmcook" class="external-link">@ianmcook</a>, <a href="https://github.com/tidyverse/dplyr/issues/5783" class="external-link">#5783</a>).</p></li>
<li><p>row-wise data frames of 0 rows and list columns are supported again (<a href="https://github.com/tidyverse/dplyr/issues/5804" class="external-link">#5804</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.5" id="dplyr-105">dplyr 1.0.5<a class="anchor" aria-label="anchor" href="#dplyr-105"></a></h2><p class="text-muted">CRAN release: 2021-03-05</p>
<ul><li><p>Fixed edge case of <code><a href="../reference/slice.html">slice_sample()</a></code> when <code>weight_by=</code> is used and there 0 rows (<a href="https://github.com/tidyverse/dplyr/issues/5729" class="external-link">#5729</a>).</p></li>
<li><p><code><a href="../reference/across.html">across()</a></code> can again use columns in functions defined inline (<a href="https://github.com/tidyverse/dplyr/issues/5734" class="external-link">#5734</a>).</p></li>
<li><p>Using testthat 3rd edition.</p></li>
<li><p>Fixed bugs introduced in <code><a href="../reference/across.html">across()</a></code> in previous version (<a href="https://github.com/tidyverse/dplyr/issues/5765" class="external-link">#5765</a>).</p></li>
<li><p><code><a href="../reference/group_by.html">group_by()</a></code> keeps attributes unrelated to the grouping (<a href="https://github.com/tidyverse/dplyr/issues/5760" class="external-link">#5760</a>).</p></li>
<li><p>The <code>.cols=</code> argument of <code><a href="../reference/across.html">if_any()</a></code> and <code><a href="../reference/across.html">if_all()</a></code> defaults to <code><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything()</a></code>.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.4" id="dplyr-104">dplyr 1.0.4<a class="anchor" aria-label="anchor" href="#dplyr-104"></a></h2><p class="text-muted">CRAN release: 2021-02-02</p>
<ul><li><p>Improved performance for <code><a href="../reference/across.html">across()</a></code>. This makes <code>summarise(across())</code> and <code>mutate(across())</code> perform as well as the superseded colwise equivalents (<a href="https://github.com/tidyverse/dplyr/issues/5697" class="external-link">#5697</a>).</p></li>
<li><p>New functions <code><a href="../reference/across.html">if_any()</a></code> and <code><a href="../reference/across.html">if_all()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/4770" class="external-link">#4770</a>, <a href="https://github.com/tidyverse/dplyr/issues/5713" class="external-link">#5713</a>).</p></li>
<li><p><code><a href="../reference/summarise.html">summarise()</a></code> silently ignores NULL results (<a href="https://github.com/tidyverse/dplyr/issues/5708" class="external-link">#5708</a>).</p></li>
<li><p>Fixed a performance regression in <code><a href="../reference/mutate.html">mutate()</a></code> when warnings occur once per group (<a href="https://github.com/tidyverse/dplyr/issues/5675" class="external-link">#5675</a>). We no longer instrument warnings with debugging information when <code><a href="../reference/mutate.html">mutate()</a></code> is called within <code><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings()</a></code>.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.3" id="dplyr-103">dplyr 1.0.3<a class="anchor" aria-label="anchor" href="#dplyr-103"></a></h2><p class="text-muted">CRAN release: 2021-01-15</p>
<ul><li><p><code><a href="../reference/summarise.html">summarise()</a></code> no longer informs when the result is ungrouped (<a href="https://github.com/tidyverse/dplyr/issues/5633" class="external-link">#5633</a>).</p></li>
<li><p><code>group_by(.drop = FALSE)</code> preserves ordered factors (<a href="https://github.com/brianrice2" class="external-link">@brianrice2</a>, <a href="https://github.com/tidyverse/dplyr/issues/5545" class="external-link">#5545</a>).</p></li>
<li><p><code><a href="../reference/count.html">count()</a></code> and <code><a href="../reference/count.html">tally()</a></code> are now generic.</p></li>
<li><p>Removed default fallbacks to lazyeval methods; this will yield better error messages when you call a dplyr function with the wrong input, and is part of our long term plan to remove the deprecated lazyeval interface.</p></li>
<li><p><code><a href="../reference/mutate-joins.html">inner_join()</a></code> gains a <code>keep</code> parameter for consistency with the other mutating joins (<a href="https://github.com/patrickbarks" class="external-link">@patrickbarks</a>, <a href="https://github.com/tidyverse/dplyr/issues/5581" class="external-link">#5581</a>).</p></li>
<li><p>Improved performance with many columns, with a dynamic data mask using active bindings and lazy chops (<a href="https://github.com/tidyverse/dplyr/issues/5017" class="external-link">#5017</a>).</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> and friends preserves row names in data frames once more (<a href="https://github.com/tidyverse/dplyr/issues/5418" class="external-link">#5418</a>).</p></li>
<li><p><code><a href="../reference/group_by.html">group_by()</a></code> uses the ungrouped data for the implicit mutate step (<a href="https://github.com/tidyverse/dplyr/issues/5598" class="external-link">#5598</a>). You might have to define an <code><a href="../reference/group_by.html">ungroup()</a></code> method for custom classes. For example, see <a href="https://github.com/hadley/cubelyr/pull/3" class="external-link uri">https://github.com/hadley/cubelyr/pull/3</a>.</p></li>
<li><p><code><a href="../reference/relocate.html">relocate()</a></code> can rename columns it relocates (<a href="https://github.com/tidyverse/dplyr/issues/5569" class="external-link">#5569</a>).</p></li>
<li><p><code><a href="../reference/distinct.html">distinct()</a></code> and <code><a href="../reference/group_by.html">group_by()</a></code> have better error messages when the mutate step fails (<a href="https://github.com/tidyverse/dplyr/issues/5060" class="external-link">#5060</a>).</p></li>
<li><p>Clarify that <code><a href="../reference/between.html">between()</a></code> is not vectorised (<a href="https://github.com/tidyverse/dplyr/issues/5493" class="external-link">#5493</a>).</p></li>
<li><p>Fixed <code><a href="../reference/across.html">across()</a></code> issue where data frame columns would could not be referred to with <code><a href="https://tidyselect.r-lib.org/reference/all_of.html" class="external-link">all_of()</a></code> in the nested case (<code><a href="../reference/mutate.html">mutate()</a></code> within <code><a href="../reference/mutate.html">mutate()</a></code>) (<a href="https://github.com/tidyverse/dplyr/issues/5498" class="external-link">#5498</a>).</p></li>
<li><p><code><a href="../reference/across.html">across()</a></code> handles data frames with 0 columns (<a href="https://github.com/tidyverse/dplyr/issues/5523" class="external-link">#5523</a>).</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> always keeps grouping variables, unconditional to <code>.keep=</code> (<a href="https://github.com/tidyverse/dplyr/issues/5582" class="external-link">#5582</a>).</p></li>
<li><p>dplyr now depends on R 3.3.0</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.2" id="dplyr-102">dplyr 1.0.2<a class="anchor" aria-label="anchor" href="#dplyr-102"></a></h2><p class="text-muted">CRAN release: 2020-08-18</p>
<ul><li><p>Fixed <code><a href="../reference/across.html">across()</a></code> issue where data frame columns would mask objects referred to from <code><a href="https://tidyselect.r-lib.org/reference/all_of.html" class="external-link">all_of()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/5460" class="external-link">#5460</a>).</p></li>
<li><p><code><a href="../reference/bind_cols.html">bind_cols()</a></code> gains a <code>.name_repair</code> argument, passed to <code><a href="https://vctrs.r-lib.org/reference/vec_bind.html" class="external-link">vctrs::vec_cbind()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/5451" class="external-link">#5451</a>)</p></li>
<li><p><code>summarise(.groups = "rowwise")</code> makes a rowwise data frame even if the input data is not grouped (<a href="https://github.com/tidyverse/dplyr/issues/5422" class="external-link">#5422</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.1" id="dplyr-101">dplyr 1.0.1<a class="anchor" aria-label="anchor" href="#dplyr-101"></a></h2><p class="text-muted">CRAN release: 2020-07-31</p>
<ul><li><p>New function <code><a href="../reference/deprec-context.html">cur_data_all()</a></code> similar to <code><a href="../reference/deprec-context.html">cur_data()</a></code> but includes the grouping variables (<a href="https://github.com/tidyverse/dplyr/issues/5342" class="external-link">#5342</a>).</p></li>
<li>
<p><code><a href="../reference/count.html">count()</a></code> and <code><a href="../reference/count.html">tally()</a></code> no longer automatically weights by column <code>n</code> if present (<a href="https://github.com/tidyverse/dplyr/issues/5298" class="external-link">#5298</a>). dplyr 1.0.0 introduced this behaviour because of Hadley’s faulty memory. Historically <code><a href="../reference/count.html">tally()</a></code> automatically weighted and <code><a href="../reference/count.html">count()</a></code> did not, but this behaviour was accidentally changed in 0.8.2 (<a href="https://github.com/tidyverse/dplyr/issues/4408" class="external-link">#4408</a>) so that neither automatically weighted by <code>n</code>. Since 0.8.2 is almost a year old, and the automatically weighting behaviour was a little confusing anyway, we’ve removed it from both <code><a href="../reference/count.html">count()</a></code> and <code><a href="../reference/count.html">tally()</a></code>.</p>
<p>Use of <code>wt = n()</code> is now deprecated; now just omit the <code>wt</code> argument.</p>
</li>
<li><p><code><a href="../reference/coalesce.html">coalesce()</a></code> now supports data frames correctly (<a href="https://github.com/tidyverse/dplyr/issues/5326" class="external-link">#5326</a>).</p></li>
<li><p><code><a href="../reference/cumall.html">cummean()</a></code> no longer has off-by-one indexing problem (<a href="https://github.com/cropgen" class="external-link">@cropgen</a>, <a href="https://github.com/tidyverse/dplyr/issues/5287" class="external-link">#5287</a>).</p></li>
<li><p>The call stack is preserved on error. This makes it possible to <code><a href="https://rdrr.io/r/utils/recover.html" class="external-link">recover()</a></code> into problematic code called from dplyr verbs (<a href="https://github.com/tidyverse/dplyr/issues/5308" class="external-link">#5308</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.0" id="dplyr-100">dplyr 1.0.0<a class="anchor" aria-label="anchor" href="#dplyr-100"></a></h2><p class="text-muted">CRAN release: 2020-05-29</p>
<div class="section level3">
<h3 id="breaking-changes-1-0-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-1-0-0"></a></h3>
<ul><li><p><code><a href="../reference/bind_cols.html">bind_cols()</a></code> no longer converts to a tibble, returns a data frame if the input is a data frame.</p></li>
<li>
<p><code><a href="../reference/bind_rows.html">bind_rows()</a></code>, <code>*_join()</code>, <code><a href="../reference/summarise.html">summarise()</a></code> and <code><a href="../reference/mutate.html">mutate()</a></code> use vctrs coercion rules. There are two main user facing changes:</p>
<ul><li><p>Combining factor and character vectors silently creates a character vector; previously it created a character vector with a warning.</p></li>
<li><p>Combining multiple factors creates a factor with combined levels; previously it created a character vector with a warning.</p></li>
</ul></li>
<li><p><code><a href="../reference/bind_rows.html">bind_rows()</a></code> and other functions use vctrs name repair, see <code><a href="https://vctrs.r-lib.org/reference/vec_as_names.html" class="external-link">?vctrs::vec_as_names</a></code>.</p></li>
<li>
<p><code>all.equal.tbl_df()</code> removed.</p>
<ul><li><p>Data frames, tibbles and grouped data frames are no longer considered equal, even if the data is the same.</p></li>
<li><p>Equality checks for data frames no longer ignore row order or groupings.</p></li>
<li><p><code>expect_equal()</code> uses <code><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal()</a></code> internally. When comparing data frames, tests that used to pass may now fail.</p></li>
</ul></li>
<li><p><code><a href="../reference/distinct.html">distinct()</a></code> keeps the original column order.</p></li>
<li><p><code><a href="../reference/distinct.html">distinct()</a></code> on missing columns now raises an error, it has been a compatibility warning for a long time.</p></li>
<li><p><code><a href="../reference/group_map.html">group_modify()</a></code> puts the grouping variable to the front.</p></li>
<li>
<p><code><a href="../reference/context.html">n()</a></code> and <code><a href="../reference/row_number.html">row_number()</a></code> can no longer be called directly when dplyr is not loaded, and this now generates an error: <code>dplyr::mutate(mtcars, x = n())</code>.</p>
<p>Fix by prefixing with <code>dplyr::</code> as in <code>dplyr::mutate(mtcars, x = dplyr::n())</code></p>
</li>
<li><p>The old data format for <code>grouped_df</code> is no longer supported. This may affect you if you have serialized grouped data frames to disk, e.g. with <code><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">saveRDS()</a></code> or when using knitr caching.</p></li>
<li><p><code><a href="../reference/lead-lag.html">lead()</a></code> and <code><a href="../reference/lead-lag.html">lag()</a></code> are stricter about their inputs.</p></li>
<li>
<p>Extending data frames requires that the extra class or classes are added first, not last. Having the extra class at the end causes some vctrs operations to fail with a message like:</p>
<pre><code>Input must be a vector, not a `&lt;data.frame/...&gt;` object</code></pre>
</li>
<li><p><code><a href="../reference/mutate-joins.html">right_join()</a></code> no longer sorts the rows of the resulting tibble according to the order of the RHS <code>by</code> argument in tibble <code>y</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-1-0-0">New features<a class="anchor" aria-label="anchor" href="#new-features-1-0-0"></a></h3>
<ul><li><p>The <code>cur_</code> functions (<code><a href="../reference/deprec-context.html">cur_data()</a></code>, <code><a href="../reference/context.html">cur_group()</a></code>, <code><a href="../reference/context.html">cur_group_id()</a></code>, <code><a href="../reference/context.html">cur_group_rows()</a></code>) provide a full set of options to you access information about the “current” group in dplyr verbs. They are inspired by data.table’s <code>.SD</code>, <code>.GRP</code>, <code>.BY</code>, and <code>.I</code>.</p></li>
<li><p>The <code>rows_</code> functions (<code><a href="../reference/rows.html">rows_insert()</a></code>, <code><a href="../reference/rows.html">rows_update()</a></code>, <code><a href="../reference/rows.html">rows_upsert()</a></code>, <code><a href="../reference/rows.html">rows_patch()</a></code>, <code><a href="../reference/rows.html">rows_delete()</a></code>) provide a new API to insert and delete rows from a second data frame or table. Support for updating mutable backends is planned (<a href="https://github.com/tidyverse/dplyr/issues/4654" class="external-link">#4654</a>).</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> and <code><a href="../reference/summarise.html">summarise()</a></code> create multiple columns from a single expression if you return a data frame (<a href="https://github.com/tidyverse/dplyr/issues/2326" class="external-link">#2326</a>).</p></li>
<li><p><code><a href="../reference/select.html">select()</a></code> and <code><a href="../reference/rename.html">rename()</a></code> use the latest version of the tidyselect interface. Practically, this means that you can now combine selections using Boolean logic (i.e. <code>!</code>, <code>&amp;</code> and <code>|</code>), and use predicate functions with <code><a href="https://tidyselect.r-lib.org/reference/where.html" class="external-link">where()</a></code> (e.g. <code>where(is.character)</code>) to select variables by type (<a href="https://github.com/tidyverse/dplyr/issues/4680" class="external-link">#4680</a>). It also makes it possible to use <code><a href="../reference/select.html">select()</a></code> and <code><a href="../reference/rename.html">rename()</a></code> to repair data frames with duplicated names (<a href="https://github.com/tidyverse/dplyr/issues/4615" class="external-link">#4615</a>) and prevents you from accidentally introducing duplicate names (<a href="https://github.com/tidyverse/dplyr/issues/4643" class="external-link">#4643</a>). This also means that dplyr now re-exports <code><a href="https://tidyselect.r-lib.org/reference/all_of.html" class="external-link">any_of()</a></code> and <code><a href="https://tidyselect.r-lib.org/reference/all_of.html" class="external-link">all_of()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/5036" class="external-link">#5036</a>).</p></li>
<li>
<p><code><a href="../reference/slice.html">slice()</a></code> gains a new set of helpers:</p>
<ul><li><p><code><a href="../reference/slice.html">slice_head()</a></code> and <code><a href="../reference/slice.html">slice_tail()</a></code> select the first and last rows, like <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">head()</a></code> and <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail()</a></code>, but return <code>n</code> rows <em>per group</em>.</p></li>
<li><p><code><a href="../reference/slice.html">slice_sample()</a></code> randomly selects rows, taking over from <code><a href="../reference/sample_n.html">sample_frac()</a></code> and <code><a href="../reference/sample_n.html">sample_n()</a></code>.</p></li>
<li><p><code><a href="../reference/slice.html">slice_min()</a></code> and <code><a href="../reference/slice.html">slice_max()</a></code> select the rows with the minimum or maximum values of a variable, taking over from the confusing <code><a href="../reference/top_n.html">top_n()</a></code>.</p></li>
</ul></li>
<li><p><code><a href="../reference/summarise.html">summarise()</a></code> can create summaries of greater than length 1 if you use a summary function that returns multiple values.</p></li>
<li><p><code><a href="../reference/summarise.html">summarise()</a></code> gains a <code>.groups=</code> argument to control the grouping structure.</p></li>
<li><p>New <code><a href="../reference/relocate.html">relocate()</a></code> verb makes it easy to move columns around within a data frame (<a href="https://github.com/tidyverse/dplyr/issues/4598" class="external-link">#4598</a>).</p></li>
<li><p>New <code><a href="../reference/rename.html">rename_with()</a></code> is designed specifically for the purpose of renaming selected columns with a function (<a href="https://github.com/tidyverse/dplyr/issues/4771" class="external-link">#4771</a>).</p></li>
<li><p><code><a href="../reference/group_by.html">ungroup()</a></code> can now selectively remove grouping variables (<a href="https://github.com/tidyverse/dplyr/issues/3760" class="external-link">#3760</a>).</p></li>
<li><p><code><a href="../reference/pull.html">pull()</a></code> can now return named vectors by specifying an additional column name (<a href="https://github.com/ilarischeinin" class="external-link">@ilarischeinin</a>, <a href="https://github.com/tidyverse/dplyr/issues/4102" class="external-link">#4102</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="experimental-features-1-0-0">Experimental features<a class="anchor" aria-label="anchor" href="#experimental-features-1-0-0"></a></h3>
<ul><li><p><code><a href="../reference/mutate.html">mutate()</a></code> (for data frames only), gains experimental new arguments <code>.before</code> and <code>.after</code> that allow you to control where the new columns are placed (<a href="https://github.com/tidyverse/dplyr/issues/2047" class="external-link">#2047</a>).</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> (for data frames only), gains an experimental new argument called <code>.keep</code> that allows you to control which variables are kept from the input <code>.data</code>. <code>.keep = "all"</code> is the default; it keeps all variables. <code>.keep = "none"</code> retains no input variables (except for grouping keys), so behaves like <code><a href="../reference/transmute.html">transmute()</a></code>. <code>.keep = "unused"</code> keeps only variables not used to make new columns. <code>.keep = "used"</code> keeps only the input variables used to create new columns; it’s useful for double checking your work (<a href="https://github.com/tidyverse/dplyr/issues/3721" class="external-link">#3721</a>).</p></li>
<li><p>New, experimental, <code><a href="../reference/with_groups.html">with_groups()</a></code> makes it easy to temporarily group or ungroup (<a href="https://github.com/tidyverse/dplyr/issues/4711" class="external-link">#4711</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="across-1-0-0">across()<a class="anchor" aria-label="anchor" href="#across-1-0-0"></a></h3>
<ul><li><p>New function <code><a href="../reference/across.html">across()</a></code> that can be used inside <code><a href="../reference/summarise.html">summarise()</a></code>, <code><a href="../reference/mutate.html">mutate()</a></code>, and other verbs to apply a function (or a set of functions) to a selection of columns. See <code><a href="../articles/colwise.html">vignette("colwise")</a></code> for more details.</p></li>
<li><p>New function <code><a href="../reference/c_across.html">c_across()</a></code> that can be used inside <code><a href="../reference/summarise.html">summarise()</a></code> and <code><a href="../reference/mutate.html">mutate()</a></code> in row-wise data frames to easily (e.g.) compute a row-wise mean of all numeric variables. See <code><a href="../articles/rowwise.html">vignette("rowwise")</a></code> for more details.</p></li>
</ul></div>
<div class="section level3">
<h3 id="rowwise-1-0-0">rowwise()<a class="anchor" aria-label="anchor" href="#rowwise-1-0-0"></a></h3>
<ul><li><p><code><a href="../reference/rowwise.html">rowwise()</a></code> is no longer questioning; we now understand that it’s an important tool when you don’t have vectorised code. It now also allows you to specify additional variables that should be preserved in the output when summarising (<a href="https://github.com/tidyverse/dplyr/issues/4723" class="external-link">#4723</a>). The rowwise-ness is preserved by all operations; you need to explicit drop it with <code><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble()</a></code> or <code><a href="../reference/group_by.html">group_by()</a></code>.</p></li>
<li><p>New, experimental, <code><a href="../reference/nest_by.html">nest_by()</a></code>. It has the same interface as <code><a href="../reference/group_by.html">group_by()</a></code>, but returns a rowwise data frame of grouping keys, supplemental with a list-column of data frames containing the rest of the data.</p></li>
</ul></div>
<div class="section level3">
<h3 id="vctrs-1-0-0">vctrs<a class="anchor" aria-label="anchor" href="#vctrs-1-0-0"></a></h3>
<ul><li><p>The implementation of all dplyr verbs have been changed to use primitives provided by the vctrs package. This makes it easier to add support for new types of vector, radically simplifies the implementation, and makes all dplyr verbs more consistent.</p></li>
<li><p>The place where you are mostly likely to be impacted by the coercion changes is when working with factors in joins or grouped mutates: now when combining factors with different levels, dplyr creates a new factor with the union of the levels. This matches base R more closely, and while perhaps strictly less correct, is much more convenient.</p></li>
<li><p>dplyr dropped its two heaviest dependencies: Rcpp and BH. This should make it considerably easier and faster to build from source.</p></li>
<li><p>The implementation of all verbs has been carefully thought through. This mostly makes implementation simpler but should hopefully increase consistency, and also makes it easier to adapt to dplyr to new data structures in the new future. Pragmatically, the biggest difference for most people will be that each verb documents its return value in terms of rows, columns, groups, and data frame attributes.</p></li>
<li><p>Row names are now preserved when working with data frames.</p></li>
</ul></div>
<div class="section level3">
<h3 id="grouping-1-0-0">Grouping<a class="anchor" aria-label="anchor" href="#grouping-1-0-0"></a></h3>
<ul><li><p><code><a href="../reference/group_by.html">group_by()</a></code> uses hashing from the <code>vctrs</code> package.</p></li>
<li><p>Grouped data frames now have <code>names&lt;-</code>, <code>[[&lt;-</code>, <code>[&lt;-</code> and <code>$&lt;-</code> methods that re-generate the underlying grouping. Note that modifying grouping variables in multiple steps (i.e. <code>df$grp1 &lt;- 1; df$grp2 &lt;- 1</code>) will be inefficient since the data frame will be regrouped after each modification.</p></li>
<li><p><code>[.grouped_df</code> now regroups to respect any grouping columns that have been removed (<a href="https://github.com/tidyverse/dplyr/issues/4708" class="external-link">#4708</a>).</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> and <code><a href="../reference/summarise.html">summarise()</a></code> can now modify grouping variables (<a href="https://github.com/tidyverse/dplyr/issues/4709" class="external-link">#4709</a>).</p></li>
<li><p><code><a href="../reference/group_map.html">group_modify()</a></code> works with additional arguments (<a href="https://github.com/billdenney" class="external-link">@billdenney</a> and <a href="https://github.com/cderv" class="external-link">@cderv</a>, <a href="https://github.com/tidyverse/dplyr/issues/4509" class="external-link">#4509</a>)</p></li>
<li><p><code><a href="../reference/group_by.html">group_by()</a></code> does not create an arbitrary NA group when grouping by factors with <code>drop = TRUE</code> (<a href="https://github.com/tidyverse/dplyr/issues/4460" class="external-link">#4460</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="lifecycle-changes-1-0-0">Lifecycle changes<a class="anchor" aria-label="anchor" href="#lifecycle-changes-1-0-0"></a></h3>
<ul><li>All deprecations now use the <a href="https://lifecycle.r-lib.org" class="external-link">lifecycle</a>, that means by default you’ll only see a deprecation warning once per session, and you can control with <code>options(lifecycle_verbosity = x)</code> where <code>x</code> is one of NULL, “quiet”, “warning”, and “error”.</li>
</ul><div class="section level4">
<h4 id="removed-1-0-0">Removed<a class="anchor" aria-label="anchor" href="#removed-1-0-0"></a></h4>
<ul><li><p><code><a href="../reference/defunct.html">id()</a></code>, deprecated in dplyr 0.5.0, is now defunct.</p></li>
<li><p><code><a href="../reference/defunct.html">failwith()</a></code>, deprecated in dplyr 0.7.0, is now defunct.</p></li>
<li><p><code>tbl_cube()</code> and <code>nasa</code> have been pulled out into a separate cubelyr package (<a href="https://github.com/tidyverse/dplyr/issues/4429" class="external-link">#4429</a>).</p></li>
<li><p><code>rbind_all()</code> and <code>rbind_list()</code> have been removed (<a href="https://github.com/bjungbogati" class="external-link">@bjungbogati</a>, <a href="https://github.com/tidyverse/dplyr/issues/4430" class="external-link">#4430</a>).</p></li>
<li><p><code>dr_dplyr()</code> has been removed as it is no longer needed (<a href="https://github.com/tidyverse/dplyr/issues/4433" class="external-link">#4433</a>, <a href="https://github.com/smwindecker" class="external-link">@smwindecker</a>).</p></li>
</ul></div>
<div class="section level4">
<h4 id="deprecated-1-0-0">Deprecated<a class="anchor" aria-label="anchor" href="#deprecated-1-0-0"></a></h4>
<ul><li><p>Use of pkgconfig for setting <code>na_matches</code> argument to join functions is now deprecated (<a href="https://github.com/tidyverse/dplyr/issues/4914" class="external-link">#4914</a>). This was rarely used, and I’m now confident that the default is correct for R.</p></li>
<li><p>In <code><a href="../reference/count.html">add_count()</a></code>, the <code>drop</code> argument has been deprecated because it didn’t actually affect the output.</p></li>
<li><p><code><a href="../reference/add_rownames.html">add_rownames()</a></code>: please use <code><a href="https://tibble.tidyverse.org/reference/rownames.html" class="external-link">tibble::rownames_to_column()</a></code> instead.</p></li>
<li><p><code><a href="../reference/tbl_df.html">as.tbl()</a></code> and <code><a href="../reference/tbl_df.html">tbl_df()</a></code>: please use <code><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble()</a></code> instead.</p></li>
<li><p><code><a href="../reference/defunct.html">bench_tbls()</a></code>, <code><a href="../reference/defunct.html">compare_tbls()</a></code>, <code><a href="../reference/defunct.html">compare_tbls2()</a></code>, <code><a href="../reference/defunct.html">eval_tbls()</a></code> and <code><a href="../reference/defunct.html">eval_tbls2()</a></code> are now deprecated. That were only used in a handful of packages, and we now believe that you’re better off performing comparisons more directly (<a href="https://github.com/tidyverse/dplyr/issues/4675" class="external-link">#4675</a>).</p></li>
<li><p><code><a href="../reference/combine.html">combine()</a></code>: please use <code><a href="https://vctrs.r-lib.org/reference/vec_c.html" class="external-link">vctrs::vec_c()</a></code> instead.</p></li>
<li><p><code><a href="../reference/funs.html">funs()</a></code>: please use <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> instead.</p></li>
<li><p><code>group_by(add = )</code>: please use <code>.add</code> instead.</p></li>
<li><p><code>group_by(.dots = )</code>/<code>group_by_prepare(.dots = )</code>: please use <code>!!!</code> instead (<a href="https://github.com/tidyverse/dplyr/issues/4734" class="external-link">#4734</a>).</p></li>
<li><p>The use of zero-arg <code><a href="../reference/group_data.html">group_indices()</a></code> to retrieve the group id for the “current” group is deprecated; instead use <code><a href="../reference/context.html">cur_group_id()</a></code>.</p></li>
<li><p>Passing arguments to <code><a href="../reference/group_data.html">group_keys()</a></code> or <code><a href="../reference/group_data.html">group_indices()</a></code> to change the grouping has been deprecated, instead do grouping first yourself.</p></li>
<li><p><code><a href="../reference/defunct.html">location()</a></code> and <code><a href="../reference/defunct.html">changes()</a></code>: please use <code><a href="https://lobstr.r-lib.org/reference/ref.html" class="external-link">lobstr::ref()</a></code> instead.</p></li>
<li><p><code><a href="../reference/progress_estimated.html">progress_estimated()</a></code> is soft deprecated; it’s not the responsibility of dplyr to provide progress bars (<a href="https://github.com/tidyverse/dplyr/issues/4935" class="external-link">#4935</a>).</p></li>
<li><p><code><a href="../reference/src_local.html">src_local()</a></code> has been deprecated; it was part of an approach to testing dplyr backends that didn’t pan out.</p></li>
<li><p><code><a href="../reference/src_dbi.html">src_mysql()</a></code>, <code><a href="../reference/src_dbi.html">src_postgres()</a></code>, and <code><a href="../reference/src_dbi.html">src_sqlite()</a></code> has been deprecated. We’ve recommended against them for some time. Instead please use the approach described at <a href="https://dbplyr.tidyverse.org/" class="external-link uri">https://dbplyr.tidyverse.org/</a>.</p></li>
<li><p><code><a href="../reference/defunct.html">select_vars()</a></code>, <code><a href="../reference/defunct.html">rename_vars()</a></code>, <code><a href="../reference/defunct.html">select_var()</a></code>, <code><a href="../reference/defunct.html">current_vars()</a></code> are now deprecated (<a href="https://github.com/perezp44" class="external-link">@perezp44</a>, <a href="https://github.com/tidyverse/dplyr/issues/4432" class="external-link">#4432</a>)</p></li>
</ul></div>
<div class="section level4">
<h4 id="superseded-1-0-0">Superseded<a class="anchor" aria-label="anchor" href="#superseded-1-0-0"></a></h4>
<ul><li>
<p>The scoped helpers (all functions ending in <code>_if</code>, <code>_at</code>, or <code>_all</code>) have been superseded by <code><a href="../reference/across.html">across()</a></code>. This dramatically reduces the API surface for dplyr, while at the same providing providing a more flexible and less error-prone interface (<a href="https://github.com/tidyverse/dplyr/issues/4769" class="external-link">#4769</a>).</p>
<p><code>rename_*()</code> and <code>select_*()</code> have been superseded by <code><a href="../reference/rename.html">rename_with()</a></code>.</p>
</li>
<li><p><code><a href="../reference/do.html">do()</a></code> is superseded in favour of <code><a href="../reference/summarise.html">summarise()</a></code>.</p></li>
<li><p><code><a href="../reference/sample_n.html">sample_n()</a></code> and <code><a href="../reference/sample_n.html">sample_frac()</a></code> have been superseded by <code><a href="../reference/slice.html">slice_sample()</a></code>. See <code><a href="../reference/sample_n.html">?sample_n</a></code> for details about why, and for examples converting from old to new usage.</p></li>
<li><p><code><a href="../reference/top_n.html">top_n()</a></code> has been superseded by<code><a href="../reference/slice.html">slice_min()</a></code>/<code><a href="../reference/slice.html">slice_max()</a></code>. See <code><a href="../reference/top_n.html">?top_n</a></code> for details about why, and how to convert old to new usage (<a href="https://github.com/tidyverse/dplyr/issues/4494" class="external-link">#4494</a>).</p></li>
</ul></div>
<div class="section level4">
<h4 id="questioning-1-0-0">Questioning<a class="anchor" aria-label="anchor" href="#questioning-1-0-0"></a></h4>
<ul><li>
<code><a href="../reference/all_equal.html">all_equal()</a></code> is questioning; it solves a problem that no longer seems important.</li>
</ul></div>
<div class="section level4">
<h4 id="stable-1-0-0">Stable<a class="anchor" aria-label="anchor" href="#stable-1-0-0"></a></h4>
<ul><li>
<code><a href="../reference/rowwise.html">rowwise()</a></code> is no longer questioning.</li>
</ul></div>
</div>
<div class="section level3">
<h3 id="documentation-improvements-1-0-0">Documentation improvements<a class="anchor" aria-label="anchor" href="#documentation-improvements-1-0-0"></a></h3>
<ul><li><p>New <code><a href="../articles/base.html">vignette("base")</a></code> which describes how dplyr verbs relate to the base R equivalents (<a href="https://github.com/sastoudt" class="external-link">@sastoudt</a>, <a href="https://github.com/tidyverse/dplyr/issues/4755" class="external-link">#4755</a>)</p></li>
<li><p>New <code><a href="../articles/grouping.html">vignette("grouping")</a></code> gives more details about how dplyr verbs change when applied to grouped data frames (<a href="https://github.com/tidyverse/dplyr/issues/4779" class="external-link">#4779</a>, <a href="https://github.com/MikeKSmith" class="external-link">@MikeKSmith</a>).</p></li>
<li><p><code><a href="../articles/programming.html">vignette("programming")</a></code> has been completely rewritten to reflect our latest vocabulary, the most recent rlang features, and our current recommendations. It should now be substantially easier to program with dplyr.</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-and-bug-fixes-1-0-0">Minor improvements and bug fixes<a class="anchor" aria-label="anchor" href="#minor-improvements-and-bug-fixes-1-0-0"></a></h3>
<ul><li><p>dplyr now has a rudimentary, experimental, and stop-gap, extension mechanism documented in <code><a href="../reference/dplyr_extending.html">?dplyr_extending</a></code></p></li>
<li><p>dplyr no longer provides a <code>all.equal.tbl_df()</code> method. It never should have done so in the first place because it owns neither the generic nor the class. It also provided a problematic implementation because, by default, it ignored the order of the rows and the columns which is usually important. This is likely to cause new test failures in downstream packages; but on the whole we believe those failures to either reflect unexpected behaviour or tests that need to be strengthened (<a href="https://github.com/tidyverse/dplyr/issues/2751" class="external-link">#2751</a>).</p></li>
<li><p><code><a href="../reference/coalesce.html">coalesce()</a></code> now uses vctrs recycling and common type coercion rules (<a href="https://github.com/tidyverse/dplyr/issues/5186" class="external-link">#5186</a>).</p></li>
<li><p><code><a href="../reference/count.html">count()</a></code> and <code><a href="../reference/count.html">add_count()</a></code> do a better job of preserving input class and attributes (<a href="https://github.com/tidyverse/dplyr/issues/4086" class="external-link">#4086</a>).</p></li>
<li><p><code><a href="../reference/distinct.html">distinct()</a></code> errors if you request it use variables that don’t exist (this was previously a warning) (<a href="https://github.com/tidyverse/dplyr/issues/4656" class="external-link">#4656</a>).</p></li>
<li><p><code><a href="../reference/filter.html">filter()</a></code>, <code><a href="../reference/mutate.html">mutate()</a></code> and <code><a href="../reference/summarise.html">summarise()</a></code> get better error messages.</p></li>
<li><p><code><a href="../reference/filter.html">filter()</a></code> handles data frame results when all columns are logical vectors by reducing them with <code>&amp;</code> (<a href="https://github.com/tidyverse/dplyr/issues/4678" class="external-link">#4678</a>). In particular this means <code><a href="../reference/across.html">across()</a></code> can be used in <code><a href="../reference/filter.html">filter()</a></code>.</p></li>
<li><p><code><a href="../reference/mutate-joins.html">left_join()</a></code>, <code><a href="../reference/mutate-joins.html">right_join()</a></code>, and <code><a href="../reference/mutate-joins.html">full_join()</a></code> gain a <code>keep</code> argument so that you can optionally choose to keep both sets of join keys (<a href="https://github.com/tidyverse/dplyr/issues/4589" class="external-link">#4589</a>). This is useful when you want to figure out which rows were missing from either side.</p></li>
<li><p>Join functions can now perform a cross-join by specifying <code>by = character()</code> (<a href="https://github.com/tidyverse/dplyr/issues/4206" class="external-link">#4206</a>.)</p></li>
<li><p><code><a href="../reference/group_data.html">groups()</a></code> now returns <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> for ungrouped data; previously it returned <code>NULL</code> which was type-unstable (when there are groups it returns a list of symbols).</p></li>
<li><p>The first argument of <code><a href="../reference/group_map.html">group_map()</a></code>, <code><a href="../reference/group_map.html">group_modify()</a></code> and <code><a href="../reference/group_map.html">group_walk()</a></code> has been changed to <code>.data</code> for consistency with other generics.</p></li>
<li><p><code>group_keys.rowwise_df()</code> gives a 0 column data frame with <code><a href="../reference/context.html">n()</a></code> rows.</p></li>
<li><p><code><a href="../reference/group_map.html">group_map()</a></code> is now a generic (<a href="https://github.com/tidyverse/dplyr/issues/4576" class="external-link">#4576</a>).</p></li>
<li><p><code>group_by(..., .add = TRUE)</code> replaces <code>group_by(..., add = TRUE)</code>, with a deprecation message. The old argument name was a mistake because it prevents you from creating a new grouping var called <code>add</code> and it violates our naming conventions (<a href="https://github.com/tidyverse/dplyr/issues/4137" class="external-link">#4137</a>).</p></li>
<li><p><code><a href="../reference/setops.html">intersect()</a></code>, <code><a href="../reference/setops.html">union()</a></code>, <code><a href="../reference/setops.html">setdiff()</a></code> and <code><a href="../reference/setops.html">setequal()</a></code> generics are now imported from the generics package. This reduces a conflict with lubridate.</p></li>
<li><p><code><a href="../reference/order_by.html">order_by()</a></code> gives an informative hint if you accidentally call it instead of <code><a href="../reference/arrange.html">arrange()</a></code> <a href="https://github.com/tidyverse/dplyr/issues/3357" class="external-link">#3357</a>.</p></li>
<li><p><code><a href="../reference/count.html">tally()</a></code> and <code><a href="../reference/count.html">count()</a></code> now message if the default output <code>name</code> (n), already exists in the data frame. To quiet the message, you’ll need to supply an explicit <code>name</code> (<a href="https://github.com/tidyverse/dplyr/issues/4284" class="external-link">#4284</a>). You can override the default weighting to using a constant by setting <code>wt = 1</code>.</p></li>
<li><p><code>starwars</code> dataset now does a better job of separating biological sex from gender identity. The previous <code>gender</code> column has been renamed to <code>sex</code>, since it actually describes the individual’s biological sex. A new <code>gender</code> column encodes the actual gender identity using other information about the Star Wars universe (<a href="https://github.com/MeganBeckett" class="external-link">@MeganBeckett</a>, <a href="https://github.com/tidyverse/dplyr/issues/4456" class="external-link">#4456</a>).</p></li>
<li><p><code><a href="../reference/src_tbls.html">src_tbls()</a></code> accepts <code>...</code> arguments (<a href="https://github.com/tidyverse/dplyr/issues/4485" class="external-link">#4485</a>, <a href="https://github.com/ianmcook" class="external-link">@ianmcook</a>). This could be a breaking change for some dplyr backend packages that implement <code><a href="../reference/src_tbls.html">src_tbls()</a></code>.</p></li>
<li><p>Better performance for extracting slices of factors and ordered factors (<a href="https://github.com/tidyverse/dplyr/issues/4501" class="external-link">#4501</a>).</p></li>
<li><p><code><a href="../reference/select_all.html">rename_at()</a></code> and <code><a href="../reference/select_all.html">rename_all()</a></code> call the function with a simple character vector, not a <code>dplyr_sel_vars</code> (<a href="https://github.com/tidyverse/dplyr/issues/4459" class="external-link">#4459</a>).</p></li>
<li><p><code><a href="../reference/ntile.html">ntile()</a></code> is now more consistent with database implementations if the buckets have irregular size (<a href="https://github.com/tidyverse/dplyr/issues/4495" class="external-link">#4495</a>).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.8.5" id="dplyr-085-2020-03-07">dplyr 0.8.5 (2020-03-07)<a class="anchor" aria-label="anchor" href="#dplyr-085-2020-03-07"></a></h2><p class="text-muted">CRAN release: 2020-03-07</p>
<ul><li>Maintenance release for compatibility with R-devel.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.8.4" id="dplyr-084-2020-01-30">dplyr 0.8.4 (2020-01-30)<a class="anchor" aria-label="anchor" href="#dplyr-084-2020-01-30"></a></h2><p class="text-muted">CRAN release: 2020-01-31</p>
<ul><li>Adapt tests to changes in dependent packages.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.8.3" id="dplyr-083-2019-07-04">dplyr 0.8.3 (2019-07-04)<a class="anchor" aria-label="anchor" href="#dplyr-083-2019-07-04"></a></h2><p class="text-muted">CRAN release: 2019-07-04</p>
<ul><li>Fixed performance regression introduced in version 0.8.2 (<a href="https://github.com/tidyverse/dplyr/issues/4458" class="external-link">#4458</a>).</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.8.2" id="dplyr-082-2019-06-28">dplyr 0.8.2 (2019-06-28)<a class="anchor" aria-label="anchor" href="#dplyr-082-2019-06-28"></a></h2><p class="text-muted">CRAN release: 2019-06-29</p>
<div class="section level3">
<h3 id="new-functions-0-8-2">New functions<a class="anchor" aria-label="anchor" href="#new-functions-0-8-2"></a></h3>
<ul><li>
<code>top_frac(data, proportion)</code> is a shorthand for <code>top_n(data, proportion * n())</code> (<a href="https://github.com/tidyverse/dplyr/issues/4017" class="external-link">#4017</a>).</li>
</ul></div>
<div class="section level3">
<h3 id="colwise-changes-0-8-2">colwise changes<a class="anchor" aria-label="anchor" href="#colwise-changes-0-8-2"></a></h3>
<ul><li><p>Using quosures in colwise verbs is deprecated (<a href="https://github.com/tidyverse/dplyr/issues/4330" class="external-link">#4330</a>).</p></li>
<li><p>Updated <code><a href="../reference/distinct_all.html">distinct_if()</a></code>, <code><a href="../reference/distinct_all.html">distinct_at()</a></code> and <code><a href="../reference/distinct_all.html">distinct_all()</a></code> to include <code>.keep_all</code> argument (<a href="https://github.com/beansrowning" class="external-link">@beansrowning</a>, <a href="https://github.com/tidyverse/dplyr/issues/4343" class="external-link">#4343</a>).</p></li>
<li><p><code><a href="../reference/select_all.html">rename_at()</a></code> handles empty selection (<a href="https://github.com/tidyverse/dplyr/issues/4324" class="external-link">#4324</a>).</p></li>
<li><p><code>*_if()</code> functions correctly handle columns with special names (<a href="https://github.com/tidyverse/dplyr/issues/4380" class="external-link">#4380</a>).</p></li>
<li><p>colwise functions support constants in formulas (<a href="https://github.com/tidyverse/dplyr/issues/4374" class="external-link">#4374</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="hybrid-evaluation-changes-0-8-2">Hybrid evaluation changes<a class="anchor" aria-label="anchor" href="#hybrid-evaluation-changes-0-8-2"></a></h3>
<ul><li><p>hybrid rank functions correctly handle NA (<a href="https://github.com/tidyverse/dplyr/issues/4427" class="external-link">#4427</a>).</p></li>
<li><p><code><a href="../reference/nth.html">first()</a></code>, <code><a href="../reference/nth.html">last()</a></code> and <code><a href="../reference/nth.html">nth()</a></code> hybrid version handles factors (<a href="https://github.com/tidyverse/dplyr/issues/4295" class="external-link">#4295</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-changes-0-8-2">Minor changes<a class="anchor" aria-label="anchor" href="#minor-changes-0-8-2"></a></h3>
<ul><li><p><code><a href="../reference/top_n.html">top_n()</a></code> quotes its <code>n</code> argument, <code>n</code> no longer needs to be constant for all groups (<a href="https://github.com/tidyverse/dplyr/issues/4017" class="external-link">#4017</a>).</p></li>
<li><p><code><a href="../reference/tbl_vars.html">tbl_vars()</a></code> keeps information on grouping columns by returning a <code>dplyr_sel_vars</code> object (<a href="https://github.com/tidyverse/dplyr/issues/4106" class="external-link">#4106</a>).</p></li>
<li><p><code><a href="../reference/group_split.html">group_split()</a></code> always sets the <code>ptype</code> attribute, which make it more robust in the case where there are 0 groups.</p></li>
<li><p><code><a href="../reference/group_map.html">group_map()</a></code> and <code><a href="../reference/group_map.html">group_modify()</a></code> work in the 0 group edge case (<a href="https://github.com/tidyverse/dplyr/issues/4421" class="external-link">#4421</a>)</p></li>
<li><p><code><a href="https://rdrr.io/r/utils/select.list.html" class="external-link">select.list()</a></code> method added so that <code><a href="../reference/select.html">select()</a></code> does not dispatch on lists (<a href="https://github.com/tidyverse/dplyr/issues/4279" class="external-link">#4279</a>).</p></li>
<li><p><code><a href="https://tibble.tidyverse.org/reference/view.html" class="external-link">view()</a></code> is reexported from tibble (<a href="https://github.com/tidyverse/dplyr/issues/4423" class="external-link">#4423</a>).</p></li>
<li><p><code><a href="../reference/group_by.html">group_by()</a></code> puts NA groups last in character vectors (<a href="https://github.com/tidyverse/dplyr/issues/4227" class="external-link">#4227</a>).</p></li>
<li><p><code><a href="../reference/arrange.html">arrange()</a></code> handles integer64 objects (<a href="https://github.com/tidyverse/dplyr/issues/4366" class="external-link">#4366</a>).</p></li>
<li><p><code><a href="../reference/summarise.html">summarise()</a></code> correctly resolves summarised list columns (<a href="https://github.com/tidyverse/dplyr/issues/4349" class="external-link">#4349</a>).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.8.1" id="dplyr-081-2019-05-14">dplyr 0.8.1 (2019-05-14)<a class="anchor" aria-label="anchor" href="#dplyr-081-2019-05-14"></a></h2><p class="text-muted">CRAN release: 2019-05-14</p>
<div class="section level3">
<h3 id="breaking-changes-0-8-1">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-8-1"></a></h3>
<ul><li>
<code><a href="../reference/group_map.html">group_modify()</a></code> is the new name of the function previously known as <code><a href="../reference/group_map.html">group_map()</a></code>
</li>
</ul></div>
<div class="section level3">
<h3 id="new-functions-0-8-1">New functions<a class="anchor" aria-label="anchor" href="#new-functions-0-8-1"></a></h3>
<ul><li><p><code><a href="../reference/group_map.html">group_map()</a></code> now only calls the function on each group and return a list.</p></li>
<li><p><code><a href="../reference/group_by_drop_default.html">group_by_drop_default()</a></code>, previously known as <code>dplyr:::group_drops()</code> is exported (<a href="https://github.com/tidyverse/dplyr/issues/4245" class="external-link">#4245</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-changes-0-8-1">Minor changes<a class="anchor" aria-label="anchor" href="#minor-changes-0-8-1"></a></h3>
<ul><li><p>Lists of formulas passed to colwise verbs are now automatically named.</p></li>
<li><p><code><a href="../reference/group_by.html">group_by()</a></code> does a shallow copy even in the no groups case (<a href="https://github.com/tidyverse/dplyr/issues/4221" class="external-link">#4221</a>).</p></li>
<li><p>Fixed <code><a href="../reference/mutate.html">mutate()</a></code> on rowwise data frames with 0 rows (<a href="https://github.com/tidyverse/dplyr/issues/4224" class="external-link">#4224</a>).</p></li>
<li><p>Fixed handling of bare formulas in colwise verbs (<a href="https://github.com/tidyverse/dplyr/issues/4183" class="external-link">#4183</a>).</p></li>
<li><p>Fixed performance of <code><a href="../reference/n_distinct.html">n_distinct()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/4202" class="external-link">#4202</a>).</p></li>
<li><p><code><a href="../reference/group_data.html">group_indices()</a></code> now ignores empty groups by default for <code>data.frame</code>, which is consistent with the default of <code><a href="../reference/group_by.html">group_by()</a></code> (<a href="https://github.com/yutannihilation" class="external-link">@yutannihilation</a>, <a href="https://github.com/tidyverse/dplyr/issues/4208" class="external-link">#4208</a>).</p></li>
<li><p>Fixed integer overflow in hybrid <code><a href="../reference/ntile.html">ntile()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/4186" class="external-link">#4186</a>).</p></li>
<li><p>colwise functions <code><a href="../reference/summarise_all.html">summarise_at()</a></code> … can rename vars in the case of multiple functions (<a href="https://github.com/tidyverse/dplyr/issues/4180" class="external-link">#4180</a>).</p></li>
<li><p><code><a href="../reference/select_all.html">select_if()</a></code> and <code><a href="../reference/select_all.html">rename_if()</a></code> handle logical vector predicate (<a href="https://github.com/tidyverse/dplyr/issues/4213" class="external-link">#4213</a>).</p></li>
<li><p>hybrid <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min()</a></code> and <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max()</a></code> cast to integer when possible (<a href="https://github.com/tidyverse/dplyr/issues/4258" class="external-link">#4258</a>).</p></li>
<li><p><code><a href="../reference/bind_rows.html">bind_rows()</a></code> correctly handles the cases where there are multiple consecutive <code>NULL</code> (<a href="https://github.com/tidyverse/dplyr/issues/4296" class="external-link">#4296</a>).</p></li>
<li><p>Support for R 3.1.* has been dropped. The minimal R version supported is now 3.2.0. <a href="https://www.tidyverse.org/articles/2019/04/r-version-support/" class="external-link uri">https://www.tidyverse.org/articles/2019/04/r-version-support/</a></p></li>
<li><p><code><a href="../reference/select_all.html">rename_at()</a></code> handles empty selection (<a href="https://github.com/tidyverse/dplyr/issues/4324" class="external-link">#4324</a>).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.8.0.1" id="dplyr-0801-2019-02-15">dplyr 0.8.0.1 (2019-02-15)<a class="anchor" aria-label="anchor" href="#dplyr-0801-2019-02-15"></a></h2><p class="text-muted">CRAN release: 2019-02-15</p>
<ul><li>Fixed integer C/C++ division, forced released by CRAN (<a href="https://github.com/tidyverse/dplyr/issues/4185" class="external-link">#4185</a>).</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.8.0" id="dplyr-080-2019-02-14">dplyr 0.8.0 (2019-02-14)<a class="anchor" aria-label="anchor" href="#dplyr-080-2019-02-14"></a></h2><p class="text-muted">CRAN release: 2019-02-14</p>
<div class="section level3">
<h3 id="breaking-changes-0-8-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-8-0"></a></h3>
<ul><li>
<p>The error <code>could not find function "n"</code> or the warning <code>Calling `n()` without importing or prefixing it is deprecated, use `dplyr::n()`</code></p>
<p>indicates when functions like <code><a href="../reference/context.html">n()</a></code>, <code><a href="../reference/row_number.html">row_number()</a></code>, … are not imported or prefixed.</p>
<p>The easiest fix is to import dplyr with <code>import(dplyr)</code> in your <code>NAMESPACE</code> or <code>#' <a href="https://github.com/import" class="external-link">@import</a> dplyr</code> in a roxygen comment, alternatively such functions can be imported selectively as any other function with <code>importFrom(dplyr, n)</code> in the <code>NAMESPACE</code> or <code>#' <a href="https://github.com/importFrom" class="external-link">@importFrom</a> dplyr n</code> in a roxygen comment. The third option is to prefix them, i.e. use <code><a href="../reference/context.html">dplyr::n()</a></code></p>
</li>
<li>
<p>If you see <code>checking S3 generic/method consistency</code> in R CMD check for your package, note that :</p>
<ul><li>
<code><a href="../reference/sample_n.html">sample_n()</a></code> and <code><a href="../reference/sample_n.html">sample_frac()</a></code> have gained <code>...</code>
</li>
<li>
<code><a href="../reference/filter.html">filter()</a></code> and <code><a href="../reference/slice.html">slice()</a></code> have gained <code>.preserve</code>
</li>
<li>
<code><a href="../reference/group_by.html">group_by()</a></code> has gained <code>.drop</code>
</li>
</ul></li>
<li><p><code>Error: `.data` is a corrupt grouped_df, ...</code> signals code that makes wrong assumptions about the internals of a grouped data frame.</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-functions-0-8-0">New functions<a class="anchor" aria-label="anchor" href="#new-functions-0-8-0"></a></h3>
<ul><li><p>New selection helpers <code><a href="../reference/group_cols.html">group_cols()</a></code>. It can be called in selection contexts such as <code><a href="../reference/select.html">select()</a></code> and matches the grouping variables of grouped tibbles.</p></li>
<li><p><code><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">last_col()</a></code> is re-exported from tidyselect (<a href="https://github.com/tidyverse/dplyr/issues/3584" class="external-link">#3584</a>).</p></li>
<li><p><code><a href="../reference/group_trim.html">group_trim()</a></code> drops unused levels of factors that are used as grouping variables.</p></li>
<li>
<p><code><a href="../reference/nest_join.html">nest_join()</a></code> creates a list column of the matching rows. <code><a href="../reference/nest_join.html">nest_join()</a></code> + <code><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">tidyr::unnest()</a></code> is equivalent to <code>inner_join</code> (<a href="https://github.com/tidyverse/dplyr/issues/3570" class="external-link">#3570</a>).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">band_members</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/nest_join.html">nest_join</a></span><span class="op">(</span><span class="va">band_instruments</span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p><code><a href="../reference/group_nest.html">group_nest()</a></code> is similar to <code><a href="https://tidyr.tidyverse.org/reference/nest.html" class="external-link">tidyr::nest()</a></code> but focusing on the variables to nest by instead of the nested columns.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">species</span>, <span class="va">homeworld</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/group_nest.html">group_nest</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/group_nest.html">group_nest</a></span><span class="op">(</span><span class="va">species</span>, <span class="va">homeworld</span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p><code><a href="../reference/group_split.html">group_split()</a></code> is similar to <code><a href="https://rdrr.io/r/base/split.html" class="external-link">base::split()</a></code> but operating on existing groups when applied to a grouped data frame, or subject to the data mask on ungrouped data frames</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">species</span>, <span class="va">homeworld</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/group_split.html">group_split</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/group_split.html">group_split</a></span><span class="op">(</span><span class="va">species</span>, <span class="va">homeworld</span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p><code><a href="../reference/group_map.html">group_map()</a></code> and <code><a href="../reference/group_map.html">group_walk()</a></code> are purrr-like functions to iterate on groups of a grouped data frame, jointly identified by the data subset (exposed as <code>.x</code>) and the data key (a one row tibble, exposed as <code>.y</code>). <code><a href="../reference/group_map.html">group_map()</a></code> returns a grouped data frame that combines the results of the function, <code><a href="../reference/group_map.html">group_walk()</a></code> is only used for side effects and returns its input invisibly.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/group_map.html">group_map</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">.x</span>, <span class="fl">2L</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</li>
<li><p><code><a href="../reference/group_by_prepare.html">distinct_prepare()</a></code>, previously known as <code>distinct_vars()</code> is exported. This is mostly useful for alternative backends (e.g. <code>dbplyr</code>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="major-changes-0-8-0">Major changes<a class="anchor" aria-label="anchor" href="#major-changes-0-8-0"></a></h3>
<ul><li>
<p><code><a href="../reference/group_by.html">group_by()</a></code> gains the <code>.drop</code> argument. When set to <code>FALSE</code> the groups are generated based on factor levels, hence some groups may be empty (<a href="https://github.com/tidyverse/dplyr/issues/341" class="external-link">#341</a>).</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 3 groups</span></span>
<span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,</span>
<span>  f <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span><span class="op">)</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">f</span>, .drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># the order of the grouping variables matter</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>,</span>
<span>  f <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"a"</span>, <span class="st">"b"</span><span class="op">)</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">f</span>, <span class="va">x</span>, .drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">f</span>, .drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>The default behaviour drops the empty groups as in the previous versions.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,</span>
<span>    f <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span><span class="op">)</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="../reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p><code><a href="../reference/filter.html">filter()</a></code> and <code><a href="../reference/slice.html">slice()</a></code> gain a <code>.preserve</code> argument to control which groups it should keep. The default <code>filter(.preserve = FALSE)</code> recalculates the grouping structure based on the resulting data, otherwise it is kept as is.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>,</span>
<span>  f <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"a"</span>, <span class="st">"b"</span><span class="op">)</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">f</span>, .drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/filter.html">filter</a></span><span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/filter.html">filter</a></span><span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="fl">1</span>, .preserve <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</li>
<li><p>The notion of lazily grouped data frames have disappeared. All dplyr verbs now recalculate immediately the grouping structure, and respect the levels of factors.</p></li>
<li><p>Subsets of columns now properly dispatch to the <code>[</code> or <code>[[</code> method when the column is an object (a vector with a class) instead of making assumptions on how the column should be handled. The <code>[</code> method must handle integer indices, including <code>NA_integer_</code>, i.e. <code>x[NA_integer_]</code> should produce a vector of the same class as <code>x</code> with whatever represents a missing value.</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-changes-0-8-0">Minor changes<a class="anchor" aria-label="anchor" href="#minor-changes-0-8-0"></a></h3>
<ul><li><p><code><a href="../reference/count.html">tally()</a></code> works correctly on non-data frame table sources such as <code>tbl_sql</code> (<a href="https://github.com/tidyverse/dplyr/issues/3075" class="external-link">#3075</a>).</p></li>
<li><p><code><a href="../reference/sample_n.html">sample_n()</a></code> and <code><a href="../reference/sample_n.html">sample_frac()</a></code> can use <code><a href="../reference/context.html">n()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/3527" class="external-link">#3527</a>)</p></li>
<li><p><code><a href="../reference/distinct.html">distinct()</a></code> respects the order of the variables provided (<a href="https://github.com/tidyverse/dplyr/issues/3195" class="external-link">#3195</a>, <a href="https://github.com/foo-bar-baz-qux" class="external-link">@foo-bar-baz-qux</a>) and handles the 0 rows and 0 columns special case (<a href="https://github.com/tidyverse/dplyr/issues/2954" class="external-link">#2954</a>).</p></li>
<li><p><code><a href="../reference/combine.html">combine()</a></code> uses tidy dots (<a href="https://github.com/tidyverse/dplyr/issues/3407" class="external-link">#3407</a>).</p></li>
<li><p><code><a href="../reference/group_data.html">group_indices()</a></code> can be used without argument in expressions in verbs (<a href="https://github.com/tidyverse/dplyr/issues/1185" class="external-link">#1185</a>).</p></li>
<li><p>Using <code><a href="../reference/mutate_all.html">mutate_all()</a></code>, <code><a href="../reference/mutate_all.html">transmute_all()</a></code>, <code><a href="../reference/mutate_all.html">mutate_if()</a></code> and <code><a href="../reference/mutate_all.html">transmute_if()</a></code> with grouped tibbles now informs you that the grouping variables are ignored. In the case of the <code>_all()</code> verbs, the message invites you to use <code>mutate_at(df, vars(-group_cols()))</code> (or the equivalent <code><a href="../reference/mutate_all.html">transmute_at()</a></code> call) instead if you’d like to make it explicit in your code that the operation is not applied on the grouping variables.</p></li>
<li><p>Scoped variants of <code><a href="../reference/arrange.html">arrange()</a></code> respect the <code>.by_group</code> argument (<a href="https://github.com/tidyverse/dplyr/issues/3504" class="external-link">#3504</a>).</p></li>
<li><p><code><a href="../reference/nth.html">first()</a></code> and <code><a href="../reference/nth.html">last()</a></code> hybrid functions fall back to R evaluation when given no arguments (<a href="https://github.com/tidyverse/dplyr/issues/3589" class="external-link">#3589</a>).</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> removes a column when the expression evaluates to <code>NULL</code> for all groups (<a href="https://github.com/tidyverse/dplyr/issues/2945" class="external-link">#2945</a>).</p></li>
<li><p>grouped data frames support <code>[, drop = TRUE]</code> (<a href="https://github.com/tidyverse/dplyr/issues/3714" class="external-link">#3714</a>).</p></li>
<li><p>New low-level constructor <code><a href="../reference/new_grouped_df.html">new_grouped_df()</a></code> and validator <code>validate_grouped_df</code> (<a href="https://github.com/tidyverse/dplyr/issues/3837" class="external-link">#3837</a>).</p></li>
<li><p><code><a href="../reference/glimpse.html">glimpse()</a></code> prints group information on grouped tibbles (<a href="https://github.com/tidyverse/dplyr/issues/3384" class="external-link">#3384</a>).</p></li>
<li><p><code><a href="../reference/sample_n.html">sample_n()</a></code> and <code><a href="../reference/sample_n.html">sample_frac()</a></code> gain <code>...</code> (<a href="https://github.com/tidyverse/dplyr/issues/2888" class="external-link">#2888</a>).</p></li>
<li>
<p>Scoped filter variants now support functions and purrr-like lambdas:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/filter_all.html">filter_at</a></span><span class="op">(</span><span class="fu"><a href="../reference/vars.html">vars</a></span><span class="op">(</span><span class="va">hp</span>, <span class="va">vs</span><span class="op">)</span>, <span class="op">~</span> <span class="va">.</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%%</a></span> <span class="fl">2</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
</li>
</ul></div>
<div class="section level3">
<h3 id="lifecycle-0-8-0">Lifecycle<a class="anchor" aria-label="anchor" href="#lifecycle-0-8-0"></a></h3>
<ul><li><p><code><a href="../reference/do.html">do()</a></code>, <code><a href="../reference/rowwise.html">rowwise()</a></code> and <code><a href="../reference/combine.html">combine()</a></code> are questioning (<a href="https://github.com/tidyverse/dplyr/issues/3494" class="external-link">#3494</a>).</p></li>
<li><p><code><a href="../reference/funs.html">funs()</a></code> is soft-deprecated and will start issuing warnings in a future version.</p></li>
</ul></div>
<div class="section level3">
<h3 id="changes-to-column-wise-functions-0-8-0">Changes to column wise functions<a class="anchor" aria-label="anchor" href="#changes-to-column-wise-functions-0-8-0"></a></h3>
<ul><li><p>Scoped variants for <code><a href="../reference/distinct.html">distinct()</a></code>: <code><a href="../reference/distinct_all.html">distinct_at()</a></code>, <code><a href="../reference/distinct_all.html">distinct_if()</a></code>, <code><a href="../reference/distinct_all.html">distinct_all()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/2948" class="external-link">#2948</a>).</p></li>
<li><p><code><a href="../reference/summarise_all.html">summarise_at()</a></code> excludes the grouping variables (<a href="https://github.com/tidyverse/dplyr/issues/3613" class="external-link">#3613</a>).</p></li>
<li><p><code><a href="../reference/mutate_all.html">mutate_all()</a></code>, <code><a href="../reference/mutate_all.html">mutate_at()</a></code>, <code><a href="../reference/summarise_all.html">summarise_all()</a></code> and <code><a href="../reference/summarise_all.html">summarise_at()</a></code> handle utf-8 names (<a href="https://github.com/tidyverse/dplyr/issues/2967" class="external-link">#2967</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="performance-0-8-0">Performance<a class="anchor" aria-label="anchor" href="#performance-0-8-0"></a></h3>
<ul><li>
<p>R expressions that cannot be handled with native code are now evaluated with unwind-protection when available (on R 3.5 and later). This improves the performance of dplyr on data frames with many groups (and hence many expressions to evaluate). We benchmarked that computing a grouped average is consistently twice as fast with unwind-protection enabled.</p>
<p>Unwind-protection also makes dplyr more robust in corner cases because it ensures the C++ destructors are correctly called in all circumstances (debugger exit, captured condition, restart invocation).</p>
</li>
<li><p><code><a href="../reference/sample_n.html">sample_n()</a></code> and <code><a href="../reference/sample_n.html">sample_frac()</a></code> gain <code>...</code> (<a href="https://github.com/tidyverse/dplyr/issues/2888" class="external-link">#2888</a>).</p></li>
<li><p>Improved performance for wide tibbles (<a href="https://github.com/tidyverse/dplyr/issues/3335" class="external-link">#3335</a>).</p></li>
<li><p>Faster hybrid <code><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum()</a></code>, <code><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean()</a></code>, <code><a href="https://rdrr.io/r/stats/cor.html" class="external-link">var()</a></code> and <code><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd()</a></code> for logical vectors (<a href="https://github.com/tidyverse/dplyr/issues/3189" class="external-link">#3189</a>).</p></li>
<li><p>Hybrid version of <code>sum(na.rm = FALSE)</code> exits early when there are missing values. This considerably improves performance when there are missing values early in the vector (<a href="https://github.com/tidyverse/dplyr/issues/3288" class="external-link">#3288</a>).</p></li>
<li><p><code><a href="../reference/group_by.html">group_by()</a></code> does not trigger the additional <code><a href="../reference/mutate.html">mutate()</a></code> on simple uses of the <code>.data</code> pronoun (<a href="https://github.com/tidyverse/dplyr/issues/3533" class="external-link">#3533</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="internal-0-8-0">Internal<a class="anchor" aria-label="anchor" href="#internal-0-8-0"></a></h3>
<ul><li>
<p>The grouping metadata of grouped data frame has been reorganized in a single tidy tibble, that can be accessed with the new <code><a href="../reference/group_data.html">group_data()</a></code> function. The grouping tibble consists of one column per grouping variable, followed by a list column of the (1-based) indices of the groups. The new <code><a href="../reference/group_data.html">group_rows()</a></code> function retrieves that list of indices (<a href="https://github.com/tidyverse/dplyr/issues/3489" class="external-link">#3489</a>).</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># the grouping metadata, as a tibble</span></span>
<span><span class="fu"><a href="../reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">starwars</span>, <span class="va">homeworld</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/group_data.html">group_data</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># the indices</span></span>
<span><span class="fu"><a href="../reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">starwars</span>, <span class="va">homeworld</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/group_data.html">group_data</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/pull.html">pull</a></span><span class="op">(</span><span class="va">.rows</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">starwars</span>, <span class="va">homeworld</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/group_data.html">group_rows</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</li>
<li><p>Hybrid evaluation has been completely redesigned for better performance and stability.</p></li>
</ul></div>
<div class="section level3">
<h3 id="documentation-0-8-0">Documentation<a class="anchor" aria-label="anchor" href="#documentation-0-8-0"></a></h3>
<ul><li><p>Add documentation example for moving variable to back in <code><a href="../reference/select.html">?select</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/3051" class="external-link">#3051</a>).</p></li>
<li><p>column wise functions are better documented, in particular explaining when grouping variables are included as part of the selection.</p></li>
</ul><div class="section level4">
<h4 id="deprecated-and-defunct-functions-0-8-0">Deprecated and defunct functions<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-functions-0-8-0"></a></h4>
<ul><li>
<code><a href="../reference/summarise_each.html">mutate_each()</a></code> and <code><a href="../reference/summarise_each.html">summarise_each()</a></code> are deprecated.</li>
</ul></div>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.7.6" id="dplyr-076">dplyr 0.7.6<a class="anchor" aria-label="anchor" href="#dplyr-076"></a></h2><p class="text-muted">CRAN release: 2018-06-29</p>
<ul><li><p><code>exprs()</code> is no longer exported to avoid conflicts with <code>Biobase::exprs()</code> (<a href="https://github.com/tidyverse/dplyr/issues/3638" class="external-link">#3638</a>).</p></li>
<li><p>The MASS package is explicitly suggested to fix CRAN warnings on R-devel (<a href="https://github.com/tidyverse/dplyr/issues/3657" class="external-link">#3657</a>).</p></li>
<li><p>Set operations like <code><a href="../reference/setops.html">intersect()</a></code> and <code><a href="../reference/setops.html">setdiff()</a></code> reconstruct groups metadata (<a href="https://github.com/tidyverse/dplyr/issues/3587" class="external-link">#3587</a>) and keep the order of the rows (<a href="https://github.com/tidyverse/dplyr/issues/3839" class="external-link">#3839</a>).</p></li>
<li><p>Using namespaced calls to <code><a href="https://rdrr.io/r/base/sort.html" class="external-link">base::sort()</a></code> and <code><a href="https://rdrr.io/r/base/unique.html" class="external-link">base::unique()</a></code> from C++ code to avoid ambiguities when these functions are overridden (<a href="https://github.com/tidyverse/dplyr/issues/3644" class="external-link">#3644</a>).</p></li>
<li><p>Fix rchk errors (<a href="https://github.com/tidyverse/dplyr/issues/3693" class="external-link">#3693</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.7.5" id="dplyr-075-2018-04-14">dplyr 0.7.5 (2018-04-14)<a class="anchor" aria-label="anchor" href="#dplyr-075-2018-04-14"></a></h2><p class="text-muted">CRAN release: 2018-05-19</p>
<div class="section level3">
<h3 id="breaking-changes-for-package-developers-0-7-5">Breaking changes for package developers<a class="anchor" aria-label="anchor" href="#breaking-changes-for-package-developers-0-7-5"></a></h3>
<ul><li><p>The major change in this version is that dplyr now depends on the selecting backend of the tidyselect package. If you have been linking to <code>dplyr::select_helpers</code> documentation topic, you should update the link to point to <code><a href="https://tidyselect.r-lib.org/reference/language.html" class="external-link">tidyselect::select_helpers</a></code>.</p></li>
<li><p>Another change that causes warnings in packages is that dplyr now exports the <code>exprs()</code> function. This causes a collision with <code>Biobase::exprs()</code>. Either import functions from dplyr selectively rather than in bulk, or do not import <code>Biobase::exprs()</code> and refer to it with a namespace qualifier.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-7-5">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-7-5"></a></h3>
<ul><li><p><code>distinct(data, "string")</code> now returns a one-row data frame again. (The previous behavior was to return the data unchanged.)</p></li>
<li><p><code><a href="../reference/do.html">do()</a></code> operations with more than one named argument can access <code>.</code> (<a href="https://github.com/tidyverse/dplyr/issues/2998" class="external-link">#2998</a>).</p></li>
<li><p>Reindexing grouped data frames (e.g. after <code><a href="../reference/filter.html">filter()</a></code> or <code>..._join()</code>) never updates the <code>"class"</code> attribute. This also avoids unintended updates to the original object (<a href="https://github.com/tidyverse/dplyr/issues/3438" class="external-link">#3438</a>).</p></li>
<li><p>Fixed rare column name clash in <code>..._join()</code> with non-join columns of the same name in both tables (<a href="https://github.com/tidyverse/dplyr/issues/3266" class="external-link">#3266</a>).</p></li>
<li><p>Fix <code><a href="../reference/ntile.html">ntile()</a></code> and <code><a href="../reference/row_number.html">row_number()</a></code> ordering to use the locale-dependent ordering functions in R when dealing with character vectors, rather than always using the C-locale ordering function in C (<a href="https://github.com/tidyverse/dplyr/issues/2792" class="external-link">#2792</a>, <a href="https://github.com/foo-bar-baz-qux" class="external-link">@foo-bar-baz-qux</a>).</p></li>
<li><p>Summaries of summaries (such as <code>summarise(b = sum(a), c = sum(b))</code>) are now computed using standard evaluation for simplicity and correctness, but slightly slower (<a href="https://github.com/tidyverse/dplyr/issues/3233" class="external-link">#3233</a>).</p></li>
<li><p>Fixed <code><a href="../reference/summarise.html">summarise()</a></code> for empty data frames with zero columns (<a href="https://github.com/tidyverse/dplyr/issues/3071" class="external-link">#3071</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="major-changes-0-7-5">Major changes<a class="anchor" aria-label="anchor" href="#major-changes-0-7-5"></a></h3>
<ul><li><p><code><a href="../reference/tidyeval-compat.html">enexpr()</a></code>, <code><a href="../reference/tidyeval-compat.html">expr()</a></code>, <code>exprs()</code>, <code><a href="../reference/tidyeval-compat.html">sym()</a></code> and <code><a href="../reference/tidyeval-compat.html">syms()</a></code> are now exported. <code><a href="../reference/tidyeval-compat.html">sym()</a></code> and <code><a href="../reference/tidyeval-compat.html">syms()</a></code> construct symbols from strings or character vectors. The <code><a href="../reference/tidyeval-compat.html">expr()</a></code> variants are equivalent to <code><a href="../reference/tidyeval-compat.html">quo()</a></code>, <code><a href="../reference/tidyeval-compat.html">quos()</a></code> and <code><a href="../reference/tidyeval-compat.html">enquo()</a></code> but return simple expressions rather than quosures. They support quasiquotation.</p></li>
<li>
<p>dplyr now depends on the new tidyselect package to power <code><a href="../reference/select.html">select()</a></code>, <code><a href="../reference/rename.html">rename()</a></code>, <code><a href="../reference/pull.html">pull()</a></code> and their variants (<a href="https://github.com/tidyverse/dplyr/issues/2896" class="external-link">#2896</a>). Consequently <code><a href="../reference/defunct.html">select_vars()</a></code>, <code><a href="../reference/defunct.html">select_var()</a></code> and <code><a href="../reference/defunct.html">rename_vars()</a></code> are soft-deprecated and will start issuing warnings in a future version.</p>
<p>Following the switch to tidyselect, <code><a href="../reference/select.html">select()</a></code> and <code><a href="../reference/rename.html">rename()</a></code> fully support character vectors. You can now unquote variables like this:</p>
<pre><code><span><span class="va">vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"disp"</span>, <span class="st">"cyl"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/select.html">select</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="op">!</span><span class="op">!</span> <span class="va">vars</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/select.html">select</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="op">-</span><span class="op">(</span><span class="op">!</span><span class="op">!</span> <span class="va">vars</span><span class="op">)</span><span class="op">)</span></span></code></pre>
<p>Note that this only works in selecting functions because in other contexts strings and character vectors are ambiguous. For instance strings are a valid input in mutating operations and <code>mutate(df, "foo")</code> creates a new column by recycling “foo” to the number of rows.</p>
</li>
</ul></div>
<div class="section level3">
<h3 id="minor-changes-0-7-5">Minor changes<a class="anchor" aria-label="anchor" href="#minor-changes-0-7-5"></a></h3>
<ul><li><p>Support for raw vector columns in <code><a href="../reference/arrange.html">arrange()</a></code>, <code><a href="../reference/group_by.html">group_by()</a></code>, <code><a href="../reference/mutate.html">mutate()</a></code>, <code><a href="../reference/summarise.html">summarise()</a></code> and <code>..._join()</code> (minimal <code>raw</code> x <code>raw</code> support initially) (<a href="https://github.com/tidyverse/dplyr/issues/1803" class="external-link">#1803</a>).</p></li>
<li><p><code><a href="../reference/bind_cols.html">bind_cols()</a></code> handles unnamed list (<a href="https://github.com/tidyverse/dplyr/issues/3402" class="external-link">#3402</a>).</p></li>
<li><p><code><a href="../reference/bind_rows.html">bind_rows()</a></code> works around corrupt columns that have the object bit set while having no class attribute (<a href="https://github.com/tidyverse/dplyr/issues/3349" class="external-link">#3349</a>).</p></li>
<li><p><code><a href="../reference/combine.html">combine()</a></code> returns <code><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical()</a></code> when all inputs are <code>NULL</code> (or when there are no inputs) (<a href="https://github.com/tidyverse/dplyr/issues/3365" class="external-link">#3365</a>, <a href="https://github.com/zeehio" class="external-link">@zeehio</a>).</p></li>
<li><p><code><a href="../reference/distinct.html">distinct()</a></code> now supports renaming columns (<a href="https://github.com/tidyverse/dplyr/issues/3234" class="external-link">#3234</a>).</p></li>
<li><p>Hybrid evaluation simplifies <code>dplyr::foo()</code> to <code>foo()</code> (<a href="https://github.com/tidyverse/dplyr/issues/3309" class="external-link">#3309</a>). Hybrid functions can now be masked by regular R functions to turn off hybrid evaluation (<a href="https://github.com/tidyverse/dplyr/issues/3255" class="external-link">#3255</a>). The hybrid evaluator finds functions from dplyr even if dplyr is not attached (<a href="https://github.com/tidyverse/dplyr/issues/3456" class="external-link">#3456</a>).</p></li>
<li><p>In <code><a href="../reference/mutate.html">mutate()</a></code> it is now illegal to use <code>data.frame</code> in the rhs (<a href="https://github.com/tidyverse/dplyr/issues/3298" class="external-link">#3298</a>).</p></li>
<li><p>Support <code>!!!</code> in <code><a href="../reference/recode.html">recode_factor()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/3390" class="external-link">#3390</a>).</p></li>
<li><p><code><a href="../reference/row_number.html">row_number()</a></code> works on empty subsets (<a href="https://github.com/tidyverse/dplyr/issues/3454" class="external-link">#3454</a>).</p></li>
<li><p><code><a href="../reference/select.html">select()</a></code> and <code><a href="../reference/vars.html">vars()</a></code> now treat <code>NULL</code> as empty inputs (<a href="https://github.com/tidyverse/dplyr/issues/3023" class="external-link">#3023</a>).</p></li>
<li><p>Scoped select and rename functions (<code><a href="../reference/select_all.html">select_all()</a></code>, <code><a href="../reference/select_all.html">rename_if()</a></code> etc.) now work with grouped data frames, adapting the grouping as necessary (<a href="https://github.com/tidyverse/dplyr/issues/2947" class="external-link">#2947</a>, <a href="https://github.com/tidyverse/dplyr/issues/3410" class="external-link">#3410</a>). <code><a href="../reference/group_by_all.html">group_by_at()</a></code> can group by an existing grouping variable (<a href="https://github.com/tidyverse/dplyr/issues/3351" class="external-link">#3351</a>). <code><a href="../reference/arrange_all.html">arrange_at()</a></code> can use grouping variables (<a href="https://github.com/tidyverse/dplyr/issues/3332" class="external-link">#3332</a>).</p></li>
<li><p><code><a href="../reference/slice.html">slice()</a></code> no longer enforce tibble classes when input is a simple <code>data.frame</code>, and ignores 0 (<a href="https://github.com/tidyverse/dplyr/issues/3297" class="external-link">#3297</a>, <a href="https://github.com/tidyverse/dplyr/issues/3313" class="external-link">#3313</a>).</p></li>
<li><p><code><a href="../reference/transmute.html">transmute()</a></code> no longer prints a message when including a group variable.</p></li>
</ul></div>
<div class="section level3">
<h3 id="documentation-0-7-5">Documentation<a class="anchor" aria-label="anchor" href="#documentation-0-7-5"></a></h3>
<ul><li>Improved documentation for <code><a href="../reference/funs.html">funs()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/3094" class="external-link">#3094</a>) and set operations (e.g. <code><a href="../reference/setops.html">union()</a></code>) (<a href="https://github.com/tidyverse/dplyr/issues/3238" class="external-link">#3238</a>, <a href="https://github.com/edublancas" class="external-link">@edublancas</a>).</li>
</ul></div>
<div class="section level3">
<h3 id="error-messages-0-7-5">Error messages<a class="anchor" aria-label="anchor" href="#error-messages-0-7-5"></a></h3>
<ul><li><p>Better error message if dbplyr is not installed when accessing database backends (<a href="https://github.com/tidyverse/dplyr/issues/3225" class="external-link">#3225</a>).</p></li>
<li><p><code><a href="../reference/arrange.html">arrange()</a></code> fails gracefully on <code>data.frame</code> columns (<a href="https://github.com/tidyverse/dplyr/issues/3153" class="external-link">#3153</a>).</p></li>
<li><p>Corrected error message when calling <code><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind()</a></code> with an object of wrong length (<a href="https://github.com/tidyverse/dplyr/issues/3085" class="external-link">#3085</a>).</p></li>
<li><p>Add warning with explanation to <code><a href="../reference/distinct.html">distinct()</a></code> if any of the selected columns are of type <code>list</code> (<a href="https://github.com/tidyverse/dplyr/issues/3088" class="external-link">#3088</a>, <a href="https://github.com/foo-bar-baz-qux" class="external-link">@foo-bar-baz-qux</a>), or when used on unknown columns (<a href="https://github.com/tidyverse/dplyr/issues/2867" class="external-link">#2867</a>, <a href="https://github.com/foo-bar-baz-qux" class="external-link">@foo-bar-baz-qux</a>).</p></li>
<li><p>Show clear error message for bad arguments to <code><a href="../reference/funs.html">funs()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/3368" class="external-link">#3368</a>).</p></li>
<li><p>Better error message in <code>..._join()</code> when joining data frames with duplicate or <code>NA</code> column names. Joining such data frames with a semi- or anti-join now gives a warning, which may be converted to an error in future versions (<a href="https://github.com/tidyverse/dplyr/issues/3243" class="external-link">#3243</a>, <a href="https://github.com/tidyverse/dplyr/issues/3417" class="external-link">#3417</a>).</p></li>
<li><p>Dedicated error message when trying to use columns of the <code>Interval</code> or <code>Period</code> classes (<a href="https://github.com/tidyverse/dplyr/issues/2568" class="external-link">#2568</a>).</p></li>
<li><p>Added an <code>.onDetach()</code> hook that allows for plyr to be loaded and attached without the warning message that says functions in dplyr will be masked, since dplyr is no longer attached (<a href="https://github.com/tidyverse/dplyr/issues/3359" class="external-link">#3359</a>, <a href="https://github.com/jwnorman" class="external-link">@jwnorman</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="performance-0-7-5">Performance<a class="anchor" aria-label="anchor" href="#performance-0-7-5"></a></h3>
<ul><li>
<code><a href="../reference/sample_n.html">sample_n()</a></code> and <code><a href="../reference/sample_n.html">sample_frac()</a></code> on grouped data frame are now faster especially for those with large number of groups (<a href="https://github.com/tidyverse/dplyr/issues/3193" class="external-link">#3193</a>, <a href="https://github.com/saurfang" class="external-link">@saurfang</a>).</li>
</ul></div>
<div class="section level3">
<h3 id="internal-0-7-5">Internal<a class="anchor" aria-label="anchor" href="#internal-0-7-5"></a></h3>
<ul><li><p>Compute variable names for joins in R (<a href="https://github.com/tidyverse/dplyr/issues/3430" class="external-link">#3430</a>).</p></li>
<li><p>Bumped Rcpp dependency to 0.12.15 to avoid imperfect detection of <code>NA</code> values in hybrid evaluation fixed in RcppCore/Rcpp#790 (<a href="https://github.com/tidyverse/dplyr/issues/2919" class="external-link">#2919</a>).</p></li>
<li><p>Avoid cleaning the data mask, a temporary environment used to evaluate expressions. If the environment, in which e.g. a <code><a href="../reference/mutate.html">mutate()</a></code> expression is evaluated, is preserved until after the operation, accessing variables from that environment now gives a warning but still returns <code>NULL</code> (<a href="https://github.com/tidyverse/dplyr/issues/3318" class="external-link">#3318</a>).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.7.4" id="dplyr-074">dplyr 0.7.4<a class="anchor" aria-label="anchor" href="#dplyr-074"></a></h2><p class="text-muted">CRAN release: 2017-09-28</p>
<ul><li><p>Fix recent Fedora and ASAN check errors (<a href="https://github.com/tidyverse/dplyr/issues/3098" class="external-link">#3098</a>).</p></li>
<li><p>Avoid dependency on Rcpp 0.12.10 (<a href="https://github.com/tidyverse/dplyr/issues/3106" class="external-link">#3106</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.7.3" id="dplyr-073">dplyr 0.7.3<a class="anchor" aria-label="anchor" href="#dplyr-073"></a></h2><p class="text-muted">CRAN release: 2017-09-09</p>
<ul><li><p>Fixed protection error that occurred when creating a character column using grouped <code><a href="../reference/mutate.html">mutate()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/2971" class="external-link">#2971</a>).</p></li>
<li><p>Fixed a rare problem with accessing variable values in <code><a href="../reference/summarise.html">summarise()</a></code> when all groups have size one (<a href="https://github.com/tidyverse/dplyr/issues/3050" class="external-link">#3050</a>).</p></li>
<li><p><code><a href="../reference/distinct.html">distinct()</a></code> now throws an error when used on unknown columns (<a href="https://github.com/tidyverse/dplyr/issues/2867" class="external-link">#2867</a>, <a href="https://github.com/foo-bar-baz-qux" class="external-link">@foo-bar-baz-qux</a>).</p></li>
<li><p>Fixed rare out-of-bounds memory write in <code><a href="../reference/slice.html">slice()</a></code> when negative indices beyond the number of rows were involved (<a href="https://github.com/tidyverse/dplyr/issues/3073" class="external-link">#3073</a>).</p></li>
<li><p><code><a href="../reference/select.html">select()</a></code>, <code><a href="../reference/rename.html">rename()</a></code> and <code><a href="../reference/summarise.html">summarise()</a></code> no longer change the grouped vars of the original data (<a href="https://github.com/tidyverse/dplyr/issues/3038" class="external-link">#3038</a>).</p></li>
<li><p><code>nth(default = var)</code>, <code>first(default = var)</code> and <code>last(default = var)</code> fall back to standard evaluation in a grouped operation instead of triggering an error (<a href="https://github.com/tidyverse/dplyr/issues/3045" class="external-link">#3045</a>).</p></li>
<li><p><code><a href="../reference/case_when.html">case_when()</a></code> now works if all LHS are atomic (<a href="https://github.com/tidyverse/dplyr/issues/2909" class="external-link">#2909</a>), or when LHS or RHS values are zero-length vectors (<a href="https://github.com/tidyverse/dplyr/issues/3048" class="external-link">#3048</a>).</p></li>
<li><p><code><a href="../reference/case_when.html">case_when()</a></code> accepts <code>NA</code> on the LHS (<a href="https://github.com/tidyverse/dplyr/issues/2927" class="external-link">#2927</a>).</p></li>
<li><p>Semi- and anti-joins now preserve the order of left-hand-side data frame (<a href="https://github.com/tidyverse/dplyr/issues/3089" class="external-link">#3089</a>).</p></li>
<li><p>Improved error message for invalid list arguments to <code><a href="../reference/bind_rows.html">bind_rows()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/3068" class="external-link">#3068</a>).</p></li>
<li><p>Grouping by character vectors is now faster (<a href="https://github.com/tidyverse/dplyr/issues/2204" class="external-link">#2204</a>).</p></li>
<li><p>Fixed a crash that occurred when an unexpected input was supplied to the <code>call</code> argument of <code><a href="../reference/order_by.html">order_by()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/3065" class="external-link">#3065</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.7.2" id="dplyr-072">dplyr 0.7.2<a class="anchor" aria-label="anchor" href="#dplyr-072"></a></h2><p class="text-muted">CRAN release: 2017-07-20</p>
<ul><li>Move build-time vs. run-time checks out of <code>.onLoad()</code> and into <code>dr_dplyr()</code>.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.7.1" id="dplyr-071">dplyr 0.7.1<a class="anchor" aria-label="anchor" href="#dplyr-071"></a></h2><p class="text-muted">CRAN release: 2017-06-22</p>
<ul><li><p>Use new versions of bindrcpp and glue to avoid protection problems. Avoid wrapping arguments to internal error functions (<a href="https://github.com/tidyverse/dplyr/issues/2877" class="external-link">#2877</a>). Fix two protection mistakes found by rchk (<a href="https://github.com/tidyverse/dplyr/issues/2868" class="external-link">#2868</a>).</p></li>
<li><p>Fix C++ error that caused compilation to fail on mac cran (<a href="https://github.com/tidyverse/dplyr/issues/2862" class="external-link">#2862</a>)</p></li>
<li><p>Fix undefined behaviour in <code><a href="../reference/between.html">between()</a></code>, where <code>NA_REAL</code> were assigned instead of <code>NA_LOGICAL</code>. (<a href="https://github.com/tidyverse/dplyr/issues/2855" class="external-link">#2855</a>, <a href="https://github.com/zeehio" class="external-link">@zeehio</a>)</p></li>
<li><p><code><a href="../reference/top_n.html">top_n()</a></code> now executes operations lazily for compatibility with database backends (<a href="https://github.com/tidyverse/dplyr/issues/2848" class="external-link">#2848</a>).</p></li>
<li><p>Reuse of new variables created in ungrouped <code><a href="../reference/mutate.html">mutate()</a></code> possible again, regression introduced in dplyr 0.7.0 (<a href="https://github.com/tidyverse/dplyr/issues/2869" class="external-link">#2869</a>).</p></li>
<li><p>Quosured symbols do not prevent hybrid handling anymore. This should fix many performance issues introduced with tidyeval (<a href="https://github.com/tidyverse/dplyr/issues/2822" class="external-link">#2822</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.7.0" id="dplyr-070">dplyr 0.7.0<a class="anchor" aria-label="anchor" href="#dplyr-070"></a></h2><p class="text-muted">CRAN release: 2017-06-09</p>
<div class="section level3">
<h3 id="new-data-functions-and-features-0-7-0">New data, functions, and features<a class="anchor" aria-label="anchor" href="#new-data-functions-and-features-0-7-0"></a></h3>
<ul><li>
<p>Five new datasets provide some interesting built-in datasets to demonstrate dplyr verbs (<a href="https://github.com/tidyverse/dplyr/issues/2094" class="external-link">#2094</a>):</p>
<ul><li>
<code>starwars</code> dataset about starwars characters; has list columns</li>
<li>
<code>storms</code> has the trajectories of ~200 tropical storms</li>
<li>
<code>band_members</code>, <code>band_instruments</code> and <code>band_instruments2</code> has some simple data to demonstrate joins.</li>
</ul></li>
<li><p>New <code><a href="../reference/count.html">add_count()</a></code> and <code><a href="../reference/count.html">add_tally()</a></code> for adding an <code>n</code> column within groups (<a href="https://github.com/tidyverse/dplyr/issues/2078" class="external-link">#2078</a>, <a href="https://github.com/dgrtwo" class="external-link">@dgrtwo</a>).</p></li>
<li><p><code><a href="../reference/arrange.html">arrange()</a></code> for grouped data frames gains a <code>.by_group</code> argument so you can choose to sort by groups if you want to (defaults to <code>FALSE</code>) (<a href="https://github.com/tidyverse/dplyr/issues/2318" class="external-link">#2318</a>)</p></li>
<li>
<p>New <code><a href="../reference/pull.html">pull()</a></code> generic for extracting a single column either by name or position (either from the left or the right). Thanks to <a href="https://github.com/paulponcet" class="external-link">@paulponcet</a> for the idea (<a href="https://github.com/tidyverse/dplyr/issues/2054" class="external-link">#2054</a>).</p>
<p>This verb is powered with the new <code><a href="../reference/defunct.html">select_var()</a></code> internal helper, which is exported as well. It is like <code><a href="../reference/defunct.html">select_vars()</a></code> but returns a single variable.</p>
</li>
<li><p><code><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble()</a></code> is re-exported from tibble. This is the recommend way to create tibbles from existing data frames. <code><a href="../reference/tbl_df.html">tbl_df()</a></code> has been softly deprecated. <code><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble()</a></code> is now imported from tibble (<a href="https://github.com/tidyverse/dplyr/issues/2336" class="external-link">#2336</a>, <a href="https://github.com/chrMongeau" class="external-link">@chrMongeau</a>); this is now preferred to <code><a href="https://tibble.tidyverse.org/reference/deprecated.html" class="external-link">frame_data()</a></code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-and-defunct-0-7-0">Deprecated and defunct<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-0-7-0"></a></h3>
<ul><li><p>dplyr no longer messages that you need dtplyr to work with data.table (<a href="https://github.com/tidyverse/dplyr/issues/2489" class="external-link">#2489</a>).</p></li>
<li><p>Long deprecated <code>regroup()</code>, <code>mutate_each_q()</code> and <code>summarise_each_q()</code> functions have been removed.</p></li>
<li><p>Deprecated <code><a href="../reference/defunct.html">failwith()</a></code>. I’m not even sure why it was here.</p></li>
<li><p>Soft-deprecated <code><a href="../reference/summarise_each.html">mutate_each()</a></code> and <code><a href="../reference/summarise_each.html">summarise_each()</a></code>, these functions print a message which will be changed to a warning in the next release.</p></li>
<li><p>The <code>.env</code> argument to <code><a href="../reference/sample_n.html">sample_n()</a></code> and <code><a href="../reference/sample_n.html">sample_frac()</a></code> is defunct, passing a value to this argument print a message which will be changed to a warning in the next release.</p></li>
</ul></div>
<div class="section level3">
<h3 id="databases-0-7-0">Databases<a class="anchor" aria-label="anchor" href="#databases-0-7-0"></a></h3>
<p>This version of dplyr includes some major changes to how database connections work. By and large, you should be able to continue using your existing dplyr database code without modification, but there are two big changes that you should be aware of:</p>
<ul><li><p>Almost all database related code has been moved out of dplyr and into a new package, <a href="https://github.com/tidyverse/dbplyr/" class="external-link">dbplyr</a>. This makes dplyr simpler, and will make it easier to release fixes for bugs that only affect databases. <code><a href="../reference/src_dbi.html">src_mysql()</a></code>, <code><a href="../reference/src_dbi.html">src_postgres()</a></code>, and <code><a href="../reference/src_dbi.html">src_sqlite()</a></code> will still live dplyr so your existing code continues to work.</p></li>
<li><p>It is no longer necessary to create a remote “src”. Instead you can work directly with the database connection returned by DBI. This reflects the maturity of the DBI ecosystem. Thanks largely to the work of Kirill Muller (funded by the R Consortium) DBI backends are now much more consistent, comprehensive, and easier to use. That means that there’s no longer a need for a layer in between you and DBI.</p></li>
</ul><p>You can continue to use <code><a href="../reference/src_dbi.html">src_mysql()</a></code>, <code><a href="../reference/src_dbi.html">src_postgres()</a></code>, and <code><a href="../reference/src_dbi.html">src_sqlite()</a></code>, but I recommend a new style that makes the connection to DBI more clear:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span><span class="fu">RSQLite</span><span class="fu">::</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">":memory:"</span><span class="op">)</span></span>
<span><span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">dbWriteTable</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"mtcars"</span>, <span class="va">mtcars</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mtcars2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tbl.html">tbl</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"mtcars"</span><span class="op">)</span></span>
<span><span class="va">mtcars2</span></span></code></pre></div>
<p>This is particularly useful if you want to perform non-SELECT queries as you can do whatever you want with <code><a href="https://dbi.r-dbi.org/reference/dbGetQuery.html" class="external-link">DBI::dbGetQuery()</a></code> and <code><a href="https://dbi.r-dbi.org/reference/dbExecute.html" class="external-link">DBI::dbExecute()</a></code>.</p>
<p>If you’ve implemented a database backend for dplyr, please read the <a href="https://github.com/tidyverse/dbplyr/blob/main/NEWS.md#backends" class="external-link">backend news</a> to see what’s changed from your perspective (not much). If you want to ensure your package works with both the current and previous version of dplyr, see <code><a href="../reference/check_dbplyr.html">wrap_dbplyr_obj()</a></code> for helpers.</p>
</div>
<div class="section level3">
<h3 id="utf-0-7-0">UTF-8<a class="anchor" aria-label="anchor" href="#utf-0-7-0"></a></h3>
<ul><li><p>Internally, column names are always represented as character vectors, and not as language symbols, to avoid encoding problems on Windows (<a href="https://github.com/tidyverse/dplyr/issues/1950" class="external-link">#1950</a>, <a href="https://github.com/tidyverse/dplyr/issues/2387" class="external-link">#2387</a>, <a href="https://github.com/tidyverse/dplyr/issues/2388" class="external-link">#2388</a>).</p></li>
<li><p>Error messages and explanations of data frame inequality are now encoded in UTF-8, also on Windows (<a href="https://github.com/tidyverse/dplyr/issues/2441" class="external-link">#2441</a>).</p></li>
<li><p>Joins now always reencode character columns to UTF-8 if necessary. This gives a nice speedup, because now pointer comparison can be used instead of string comparison, but relies on a proper encoding tag for all strings (<a href="https://github.com/tidyverse/dplyr/issues/2514" class="external-link">#2514</a>).</p></li>
<li><p>Fixed problems when joining factor or character encodings with a mix of native and UTF-8 encoded values (<a href="https://github.com/tidyverse/dplyr/issues/1885" class="external-link">#1885</a>, <a href="https://github.com/tidyverse/dplyr/issues/2118" class="external-link">#2118</a>, <a href="https://github.com/tidyverse/dplyr/issues/2271" class="external-link">#2271</a>, <a href="https://github.com/tidyverse/dplyr/issues/2451" class="external-link">#2451</a>).</p></li>
<li><p>Fix <code><a href="../reference/group_by.html">group_by()</a></code> for data frames that have UTF-8 encoded names (<a href="https://github.com/tidyverse/dplyr/issues/2284" class="external-link">#2284</a>, <a href="https://github.com/tidyverse/dplyr/issues/2382" class="external-link">#2382</a>).</p></li>
<li><p>New <code><a href="../reference/group_data.html">group_vars()</a></code> generic that returns the grouping as character vector, to avoid the potentially lossy conversion to language symbols. The list returned by <code><a href="../reference/group_by_prepare.html">group_by_prepare()</a></code> now has a new <code>group_names</code> component (<a href="https://github.com/tidyverse/dplyr/issues/1950" class="external-link">#1950</a>, <a href="https://github.com/tidyverse/dplyr/issues/2384" class="external-link">#2384</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="colwise-functions-0-7-0">Colwise functions<a class="anchor" aria-label="anchor" href="#colwise-functions-0-7-0"></a></h3>
<ul><li><p><code><a href="../reference/rename.html">rename()</a></code>, <code><a href="../reference/select.html">select()</a></code>, <code><a href="../reference/group_by.html">group_by()</a></code>, <code><a href="../reference/filter.html">filter()</a></code>, <code><a href="../reference/arrange.html">arrange()</a></code> and <code><a href="../reference/transmute.html">transmute()</a></code> now have scoped variants (verbs suffixed with <code>_if()</code>, <code>_at()</code> and <code>_all()</code>). Like <code><a href="../reference/mutate_all.html">mutate_all()</a></code>, <code><a href="../reference/summarise_all.html">summarise_if()</a></code>, etc, these variants apply an operation to a selection of variables.</p></li>
<li><p>The scoped verbs taking predicates (<code><a href="../reference/mutate_all.html">mutate_if()</a></code>, <code><a href="../reference/summarise_all.html">summarise_if()</a></code>, etc) now support S3 objects and lazy tables. S3 objects should implement methods for <code><a href="https://rdrr.io/r/base/length.html" class="external-link">length()</a></code>, <code>[[</code> and <code><a href="../reference/tbl_vars.html">tbl_vars()</a></code>. For lazy tables, the first 100 rows are collected and the predicate is applied on this subset of the data. This is robust for the common case of checking the type of a column (<a href="https://github.com/tidyverse/dplyr/issues/2129" class="external-link">#2129</a>).</p></li>
<li><p>Summarise and mutate colwise functions pass <code>...</code> on to the manipulation functions.</p></li>
<li><p>The performance of colwise verbs like <code><a href="../reference/mutate_all.html">mutate_all()</a></code> is now back to where it was in <code><a href="../reference/summarise_each.html">mutate_each()</a></code>.</p></li>
<li><p><code><a href="../reference/funs.html">funs()</a></code> has better handling of namespaced functions (<a href="https://github.com/tidyverse/dplyr/issues/2089" class="external-link">#2089</a>).</p></li>
<li><p>Fix issue with <code><a href="../reference/mutate_all.html">mutate_if()</a></code> and <code><a href="../reference/summarise_all.html">summarise_if()</a></code> when a predicate function returns a vector of <code>FALSE</code> (<a href="https://github.com/tidyverse/dplyr/issues/1989" class="external-link">#1989</a>, <a href="https://github.com/tidyverse/dplyr/issues/2009" class="external-link">#2009</a>, <a href="https://github.com/tidyverse/dplyr/issues/2011" class="external-link">#2011</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="tidyeval-0-7-0">Tidyeval<a class="anchor" aria-label="anchor" href="#tidyeval-0-7-0"></a></h3>
<p>dplyr has a new approach to non-standard evaluation (NSE) called tidyeval. It is described in detail in <code><a href="../articles/programming.html">vignette("programming")</a></code> but, in brief, gives you the ability to interpolate values in contexts where dplyr usually works with expressions:</p>
<p>```{r} my_var &lt;- quo(homeworld)</p>
<p>starwars %&gt;% group_by(!!my_var) %&gt;% summarise_at(vars(height:mass), mean, na.rm = TRUE) ```</p>
<p>This means that the underscored version of each main verb is no longer needed, and so these functions have been deprecated (but remain around for backward compatibility).</p>
<ul><li><p><code><a href="../reference/order_by.html">order_by()</a></code>, <code><a href="../reference/top_n.html">top_n()</a></code>, <code><a href="../reference/sample_n.html">sample_n()</a></code> and <code><a href="../reference/sample_n.html">sample_frac()</a></code> now use tidyeval to capture their arguments by expression. This makes it possible to use unquoting idioms (see <code><a href="../articles/programming.html">vignette("programming")</a></code>) and fixes scoping issues (<a href="https://github.com/tidyverse/dplyr/issues/2297" class="external-link">#2297</a>).</p></li>
<li><p>Most verbs taking dots now ignore the last argument if empty. This makes it easier to copy lines of code without having to worry about deleting trailing commas (<a href="https://github.com/tidyverse/dplyr/issues/1039" class="external-link">#1039</a>).</p></li>
<li>
<p>[API] The new <code>.data</code> and <code>.env</code> environments can be used inside all verbs that operate on data: <code>.data$column_name</code> accesses the column <code>column_name</code>, whereas <code>.env$var</code> accesses the external variable <code>var</code>. Columns or external variables named <code>.data</code> or <code>.env</code> are shadowed, use <code>.data$...</code> and/or <code>.env$...</code> to access them. (<code>.data</code> implements strict matching also for the <code>$</code> operator (<a href="https://github.com/tidyverse/dplyr/issues/2591" class="external-link">#2591</a>).)</p>
<p>The <code><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column()</a></code> and <code>global()</code> functions have been removed. They were never documented officially. Use the new <code>.data</code> and <code>.env</code> environments instead.</p>
</li>
<li><p>Expressions in verbs are now interpreted correctly in many cases that failed before (e.g., use of <code>$</code>, <code><a href="../reference/case_when.html">case_when()</a></code>, nonstandard evaluation, …). These expressions are now evaluated in a specially constructed temporary environment that retrieves column data on demand with the help of the <code>bindrcpp</code> package (<a href="https://github.com/tidyverse/dplyr/issues/2190" class="external-link">#2190</a>). This temporary environment poses restrictions on assignments using <code>&lt;-</code> inside verbs. To prevent leaking of broken bindings, the temporary environment is cleared after the evaluation (<a href="https://github.com/tidyverse/dplyr/issues/2435" class="external-link">#2435</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="verbs-0-7-0">Verbs<a class="anchor" aria-label="anchor" href="#verbs-0-7-0"></a></h3>
<div class="section level4">
<h4 id="joins-0-7-0">Joins<a class="anchor" aria-label="anchor" href="#joins-0-7-0"></a></h4>
<ul><li><p>[API] <code>xxx_join.tbl_df(na_matches = "never")</code> treats all <code>NA</code> values as different from each other (and from any other value), so that they never match. This corresponds to the behavior of joins for database sources, and of database joins in general. To match <code>NA</code> values, pass <code>na_matches = "na"</code> to the join verbs; this is only supported for data frames. The default is <code>na_matches = "na"</code>, kept for the sake of compatibility to v0.5.0. It can be tweaked by calling <code>pkgconfig::set_config("dplyr::na_matches", "na")</code> (<a href="https://github.com/tidyverse/dplyr/issues/2033" class="external-link">#2033</a>).</p></li>
<li><p><code><a href="../reference/common_by.html">common_by()</a></code> gets a better error message for unexpected inputs (<a href="https://github.com/tidyverse/dplyr/issues/2091" class="external-link">#2091</a>)</p></li>
<li><p>Fix groups when joining grouped data frames with duplicate columns (<a href="https://github.com/tidyverse/dplyr/issues/2330" class="external-link">#2330</a>, <a href="https://github.com/tidyverse/dplyr/issues/2334" class="external-link">#2334</a>, <a href="https://github.com/davidkretch" class="external-link">@davidkretch</a>).</p></li>
<li><p>One of the two join suffixes can now be an empty string, dplyr no longer hangs (<a href="https://github.com/tidyverse/dplyr/issues/2228" class="external-link">#2228</a>, <a href="https://github.com/tidyverse/dplyr/issues/2445" class="external-link">#2445</a>).</p></li>
<li><p>Anti- and semi-joins warn if factor levels are inconsistent (<a href="https://github.com/tidyverse/dplyr/issues/2741" class="external-link">#2741</a>).</p></li>
<li><p>Warnings about join column inconsistencies now contain the column names (<a href="https://github.com/tidyverse/dplyr/issues/2728" class="external-link">#2728</a>).</p></li>
</ul></div>
<div class="section level4">
<h4 id="select-0-7-0">Select<a class="anchor" aria-label="anchor" href="#select-0-7-0"></a></h4>
<ul><li><p>For selecting variables, the first selector decides if it’s an inclusive selection (i.e., the initial column list is empty), or an exclusive selection (i.e., the initial column list contains all columns). This means that <code>select(mtcars, contains("am"), contains("FOO"), contains("vs"))</code> now returns again both <code>am</code> and <code>vs</code> columns like in dplyr 0.4.3 (<a href="https://github.com/tidyverse/dplyr/issues/2275" class="external-link">#2275</a>, <a href="https://github.com/tidyverse/dplyr/issues/2289" class="external-link">#2289</a>, <a href="https://github.com/r2evans" class="external-link">@r2evans</a>).</p></li>
<li><p>Select helpers now throw an error if called when no variables have been set (<a href="https://github.com/tidyverse/dplyr/issues/2452" class="external-link">#2452</a>)</p></li>
<li><p>Helper functions in <code><a href="../reference/select.html">select()</a></code> (and related verbs) are now evaluated in a context where column names do not exist (<a href="https://github.com/tidyverse/dplyr/issues/2184" class="external-link">#2184</a>).</p></li>
<li><p><code><a href="../reference/select.html">select()</a></code> (and the internal function <code><a href="../reference/defunct.html">select_vars()</a></code>) now support column names in addition to column positions. As a result, expressions like <code>select(mtcars, "cyl")</code> are now allowed.</p></li>
</ul></div>
<div class="section level4">
<h4 id="other-0-7-0">Other<a class="anchor" aria-label="anchor" href="#other-0-7-0"></a></h4>
<ul><li><p><code><a href="../reference/recode.html">recode()</a></code>, <code><a href="../reference/case_when.html">case_when()</a></code> and <code><a href="../reference/coalesce.html">coalesce()</a></code> now support splicing of arguments with rlang’s <code>!!!</code> operator.</p></li>
<li><p><code><a href="../reference/count.html">count()</a></code> now preserves the grouping of its input (<a href="https://github.com/tidyverse/dplyr/issues/2021" class="external-link">#2021</a>).</p></li>
<li><p><code><a href="../reference/distinct.html">distinct()</a></code> no longer duplicates variables (<a href="https://github.com/tidyverse/dplyr/issues/2001" class="external-link">#2001</a>).</p></li>
<li><p>Empty <code><a href="../reference/distinct.html">distinct()</a></code> with a grouped data frame works the same way as an empty <code><a href="../reference/distinct.html">distinct()</a></code> on an ungrouped data frame, namely it uses all variables (<a href="https://github.com/tidyverse/dplyr/issues/2476" class="external-link">#2476</a>).</p></li>
<li><p><code><a href="../reference/copy_to.html">copy_to()</a></code> now returns its output invisibly (since you’re often just calling for the side-effect).</p></li>
<li><p><code><a href="../reference/filter.html">filter()</a></code> and <code><a href="../reference/lead-lag.html">lag()</a></code> throw informative error if used with ts objects (<a href="https://github.com/tidyverse/dplyr/issues/2219" class="external-link">#2219</a>)</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> recycles list columns of length 1 (<a href="https://github.com/tidyverse/dplyr/issues/2171" class="external-link">#2171</a>).</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> gives better error message when attempting to add a non-vector column (<a href="https://github.com/tidyverse/dplyr/issues/2319" class="external-link">#2319</a>), or attempting to remove a column with <code>NULL</code> (<a href="https://github.com/tidyverse/dplyr/issues/2187" class="external-link">#2187</a>, <a href="https://github.com/tidyverse/dplyr/issues/2439" class="external-link">#2439</a>).</p></li>
<li><p><code><a href="../reference/summarise.html">summarise()</a></code> now correctly evaluates newly created factors (<a href="https://github.com/tidyverse/dplyr/issues/2217" class="external-link">#2217</a>), and can create ordered factors (<a href="https://github.com/tidyverse/dplyr/issues/2200" class="external-link">#2200</a>).</p></li>
<li><p>Ungrouped <code><a href="../reference/summarise.html">summarise()</a></code> uses summary variables correctly (<a href="https://github.com/tidyverse/dplyr/issues/2404" class="external-link">#2404</a>, <a href="https://github.com/tidyverse/dplyr/issues/2453" class="external-link">#2453</a>).</p></li>
<li><p>Grouped <code><a href="../reference/summarise.html">summarise()</a></code> no longer converts character <code>NA</code> to empty strings (<a href="https://github.com/tidyverse/dplyr/issues/1839" class="external-link">#1839</a>).</p></li>
</ul></div>
</div>
<div class="section level3">
<h3 id="combining-and-comparing-0-7-0">Combining and comparing<a class="anchor" aria-label="anchor" href="#combining-and-comparing-0-7-0"></a></h3>
<ul><li><p><code><a href="../reference/all_equal.html">all_equal()</a></code> now reports multiple problems as a character vector (<a href="https://github.com/tidyverse/dplyr/issues/1819" class="external-link">#1819</a>, <a href="https://github.com/tidyverse/dplyr/issues/2442" class="external-link">#2442</a>).</p></li>
<li><p><code><a href="../reference/all_equal.html">all_equal()</a></code> checks that factor levels are equal (<a href="https://github.com/tidyverse/dplyr/issues/2440" class="external-link">#2440</a>, <a href="https://github.com/tidyverse/dplyr/issues/2442" class="external-link">#2442</a>).</p></li>
<li><p><code><a href="../reference/bind_rows.html">bind_rows()</a></code> and <code><a href="../reference/bind_cols.html">bind_cols()</a></code> give an error for database tables (<a href="https://github.com/tidyverse/dplyr/issues/2373" class="external-link">#2373</a>).</p></li>
<li><p><code><a href="../reference/bind_rows.html">bind_rows()</a></code> works correctly with <code>NULL</code> arguments and an <code>.id</code> argument (<a href="https://github.com/tidyverse/dplyr/issues/2056" class="external-link">#2056</a>), and also for zero-column data frames (<a href="https://github.com/tidyverse/dplyr/issues/2175" class="external-link">#2175</a>).</p></li>
<li><p>Breaking change: <code><a href="../reference/bind_rows.html">bind_rows()</a></code> and <code><a href="../reference/combine.html">combine()</a></code> are more strict when coercing. Logical values are no longer coerced to integer and numeric. Date, POSIXct and other integer or double-based classes are no longer coerced to integer or double as there is chance of attributes or information being lost (<a href="https://github.com/tidyverse/dplyr/issues/2209" class="external-link">#2209</a>, <a href="https://github.com/zeehio" class="external-link">@zeehio</a>).</p></li>
<li><p><code><a href="../reference/bind_cols.html">bind_cols()</a></code> now calls <code><a href="https://tibble.tidyverse.org/reference/name-repair-superseded.html" class="external-link">tibble::repair_names()</a></code> to ensure that all names are unique (<a href="https://github.com/tidyverse/dplyr/issues/2248" class="external-link">#2248</a>).</p></li>
<li><p><code><a href="../reference/bind_cols.html">bind_cols()</a></code> handles empty argument list (<a href="https://github.com/tidyverse/dplyr/issues/2048" class="external-link">#2048</a>).</p></li>
<li><p><code><a href="../reference/bind_cols.html">bind_cols()</a></code> better handles <code>NULL</code> inputs (<a href="https://github.com/tidyverse/dplyr/issues/2303" class="external-link">#2303</a>, <a href="https://github.com/tidyverse/dplyr/issues/2443" class="external-link">#2443</a>).</p></li>
<li><p><code><a href="../reference/bind_rows.html">bind_rows()</a></code> explicitly rejects columns containing data frames (<a href="https://github.com/tidyverse/dplyr/issues/2015" class="external-link">#2015</a>, <a href="https://github.com/tidyverse/dplyr/issues/2446" class="external-link">#2446</a>).</p></li>
<li><p><code><a href="../reference/bind_rows.html">bind_rows()</a></code> and <code><a href="../reference/bind_cols.html">bind_cols()</a></code> now accept vectors. They are treated as rows by the former and columns by the latter. Rows require inner names like <code>c(col1 = 1, col2 = 2)</code>, while columns require outer names: <code>col1 = c(1, 2)</code>. Lists are still treated as data frames but can be spliced explicitly with <code>!!!</code>, e.g. <code>bind_rows(!!! x)</code> (<a href="https://github.com/tidyverse/dplyr/issues/1676" class="external-link">#1676</a>).</p></li>
<li><p><code>rbind_list()</code> and <code>rbind_all()</code> now call <code><a href="https://rdrr.io/r/base/Deprecated.html" class="external-link">.Deprecated()</a></code>, they will be removed in the next CRAN release. Please use <code><a href="../reference/bind_rows.html">bind_rows()</a></code> instead.</p></li>
<li><p><code><a href="../reference/combine.html">combine()</a></code> accepts <code>NA</code> values (<a href="https://github.com/tidyverse/dplyr/issues/2203" class="external-link">#2203</a>, <a href="https://github.com/zeehio" class="external-link">@zeehio</a>)</p></li>
<li><p><code><a href="../reference/combine.html">combine()</a></code> and <code><a href="../reference/bind_rows.html">bind_rows()</a></code> with character and factor types now always warn about the coercion to character (<a href="https://github.com/tidyverse/dplyr/issues/2317" class="external-link">#2317</a>, <a href="https://github.com/zeehio" class="external-link">@zeehio</a>)</p></li>
<li><p><code><a href="../reference/combine.html">combine()</a></code> and <code><a href="../reference/bind_rows.html">bind_rows()</a></code> accept <code>difftime</code> objects.</p></li>
<li><p><code>mutate</code> coerces results from grouped dataframes accepting combinable data types (such as <code>integer</code> and <code>numeric</code>). (<a href="https://github.com/tidyverse/dplyr/issues/1892" class="external-link">#1892</a>, <a href="https://github.com/zeehio" class="external-link">@zeehio</a>)</p></li>
</ul></div>
<div class="section level3">
<h3 id="vector-functions-0-7-0">Vector functions<a class="anchor" aria-label="anchor" href="#vector-functions-0-7-0"></a></h3>
<ul><li><p><code>%in%</code> gets new hybrid handler (<a href="https://github.com/tidyverse/dplyr/issues/126" class="external-link">#126</a>).</p></li>
<li><p><code><a href="../reference/between.html">between()</a></code> returns NA if <code>left</code> or <code>right</code> is <code>NA</code> (fixes <a href="https://github.com/tidyverse/dplyr/issues/2562" class="external-link">#2562</a>).</p></li>
<li><p><code><a href="../reference/case_when.html">case_when()</a></code> supports <code>NA</code> values (<a href="https://github.com/tidyverse/dplyr/issues/2000" class="external-link">#2000</a>, <a href="https://github.com/tjmahr" class="external-link">@tjmahr</a>).</p></li>
<li><p><code><a href="../reference/nth.html">first()</a></code>, <code><a href="../reference/nth.html">last()</a></code>, and <code><a href="../reference/nth.html">nth()</a></code> have better default values for factor, Dates, POSIXct, and data frame inputs (<a href="https://github.com/tidyverse/dplyr/issues/2029" class="external-link">#2029</a>).</p></li>
<li><p>Fixed segmentation faults in hybrid evaluation of <code><a href="../reference/nth.html">first()</a></code>, <code><a href="../reference/nth.html">last()</a></code>, <code><a href="../reference/nth.html">nth()</a></code>, <code><a href="../reference/lead-lag.html">lead()</a></code>, and <code><a href="../reference/lead-lag.html">lag()</a></code>. These functions now always fall back to the R implementation if called with arguments that the hybrid evaluator cannot handle (<a href="https://github.com/tidyverse/dplyr/issues/948" class="external-link">#948</a>, <a href="https://github.com/tidyverse/dplyr/issues/1980" class="external-link">#1980</a>).</p></li>
<li><p><code><a href="../reference/n_distinct.html">n_distinct()</a></code> gets larger hash tables given slightly better performance (<a href="https://github.com/tidyverse/dplyr/issues/977" class="external-link">#977</a>).</p></li>
<li><p><code><a href="../reference/nth.html">nth()</a></code> and <code><a href="../reference/ntile.html">ntile()</a></code> are more careful about proper data types of their return values (<a href="https://github.com/tidyverse/dplyr/issues/2306" class="external-link">#2306</a>).</p></li>
<li><p><code><a href="../reference/ntile.html">ntile()</a></code> ignores <code>NA</code> when computing group membership (<a href="https://github.com/tidyverse/dplyr/issues/2564" class="external-link">#2564</a>).</p></li>
<li><p><code><a href="../reference/lead-lag.html">lag()</a></code> enforces integer <code>n</code> (<a href="https://github.com/tidyverse/dplyr/issues/2162" class="external-link">#2162</a>, <a href="https://github.com/kevinushey" class="external-link">@kevinushey</a>).</p></li>
<li><p>hybrid <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min()</a></code> and <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max()</a></code> now always return a <code>numeric</code> and work correctly in edge cases (empty input, all <code>NA</code>, …) (<a href="https://github.com/tidyverse/dplyr/issues/2305" class="external-link">#2305</a>, <a href="https://github.com/tidyverse/dplyr/issues/2436" class="external-link">#2436</a>).</p></li>
<li><p><code>min_rank("string")</code> no longer segfaults in hybrid evaluation (<a href="https://github.com/tidyverse/dplyr/issues/2279" class="external-link">#2279</a>, <a href="https://github.com/tidyverse/dplyr/issues/2444" class="external-link">#2444</a>).</p></li>
<li><p><code><a href="../reference/recode.html">recode()</a></code> can now recode a factor to other types (<a href="https://github.com/tidyverse/dplyr/issues/2268" class="external-link">#2268</a>)</p></li>
<li><p><code><a href="../reference/recode.html">recode()</a></code> gains <code>.dots</code> argument to support passing replacements as list (<a href="https://github.com/tidyverse/dplyr/issues/2110" class="external-link">#2110</a>, <a href="https://github.com/jlegewie" class="external-link">@jlegewie</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="other-minor-changes-and-bug-fixes-0-7-0">Other minor changes and bug fixes<a class="anchor" aria-label="anchor" href="#other-minor-changes-and-bug-fixes-0-7-0"></a></h3>
<ul><li><p>Many error messages are more helpful by referring to a column name or a position in the argument list (<a href="https://github.com/tidyverse/dplyr/issues/2448" class="external-link">#2448</a>).</p></li>
<li><p>New <code><a href="../reference/grouped_df.html">is_grouped_df()</a></code> alias to <code><a href="../reference/grouped_df.html">is.grouped_df()</a></code>.</p></li>
<li><p><code><a href="../reference/tbl_vars.html">tbl_vars()</a></code> now has a <code>group_vars</code> argument set to <code>TRUE</code> by default. If <code>FALSE</code>, group variables are not returned.</p></li>
<li><p>Fixed segmentation fault after calling <code><a href="../reference/rename.html">rename()</a></code> on an invalid grouped data frame (<a href="https://github.com/tidyverse/dplyr/issues/2031" class="external-link">#2031</a>).</p></li>
<li><p><code><a href="../reference/defunct.html">rename_vars()</a></code> gains a <code>strict</code> argument to control if an error is thrown when you try and rename a variable that doesn’t exist.</p></li>
<li><p>Fixed undefined behavior for <code><a href="../reference/slice.html">slice()</a></code> on a zero-column data frame (<a href="https://github.com/tidyverse/dplyr/issues/2490" class="external-link">#2490</a>).</p></li>
<li><p>Fixed very rare case of false match during join (<a href="https://github.com/tidyverse/dplyr/issues/2515" class="external-link">#2515</a>).</p></li>
<li><p>Restricted workaround for <code><a href="https://rdrr.io/r/base/match.html" class="external-link">match()</a></code> to R 3.3.0. (<a href="https://github.com/tidyverse/dplyr/issues/1858" class="external-link">#1858</a>).</p></li>
<li><p>dplyr now warns on load when the version of R or Rcpp during installation is different to the currently installed version (<a href="https://github.com/tidyverse/dplyr/issues/2514" class="external-link">#2514</a>).</p></li>
<li><p>Fixed improper reuse of attributes when creating a list column in <code><a href="../reference/summarise.html">summarise()</a></code> and perhaps <code><a href="../reference/mutate.html">mutate()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/2231" class="external-link">#2231</a>).</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> and <code><a href="../reference/summarise.html">summarise()</a></code> always strip the <code>names</code> attribute from new or updated columns, even for ungrouped operations (<a href="https://github.com/tidyverse/dplyr/issues/1689" class="external-link">#1689</a>).</p></li>
<li><p>Fixed rare error that could lead to a segmentation fault in <code>all_equal(ignore_col_order = FALSE)</code> (<a href="https://github.com/tidyverse/dplyr/issues/2502" class="external-link">#2502</a>).</p></li>
<li><p>The “dim” and “dimnames” attributes are always stripped when copying a vector (<a href="https://github.com/tidyverse/dplyr/issues/1918" class="external-link">#1918</a>, <a href="https://github.com/tidyverse/dplyr/issues/2049" class="external-link">#2049</a>).</p></li>
<li><p><code>grouped_df</code> and <code>rowwise</code> are registered officially as S3 classes. This makes them easier to use with S4 (<a href="https://github.com/tidyverse/dplyr/issues/2276" class="external-link">#2276</a>, <a href="https://github.com/joranE" class="external-link">@joranE</a>, <a href="https://github.com/tidyverse/dplyr/issues/2789" class="external-link">#2789</a>).</p></li>
<li><p>All operations that return tibbles now include the <code>"tbl"</code> class. This is important for correct printing with tibble 1.3.1 (<a href="https://github.com/tidyverse/dplyr/issues/2789" class="external-link">#2789</a>).</p></li>
<li><p>Makeflags uses PKG_CPPFLAGS for defining preprocessor macros.</p></li>
<li><p>astyle formatting for C++ code, tested but not changed as part of the tests (<a href="https://github.com/tidyverse/dplyr/issues/2086" class="external-link">#2086</a>, <a href="https://github.com/tidyverse/dplyr/issues/2103" class="external-link">#2103</a>).</p></li>
<li><p>Update RStudio project settings to install tests (<a href="https://github.com/tidyverse/dplyr/issues/1952" class="external-link">#1952</a>).</p></li>
<li><p>Using <code>Rcpp::interfaces()</code> to register C callable interfaces, and registering all native exported functions via <code>R_registerRoutines()</code> and <code>useDynLib(.registration = TRUE)</code> (<a href="https://github.com/tidyverse/dplyr/issues/2146" class="external-link">#2146</a>).</p></li>
<li><p>Formatting of grouped data frames now works by overriding the <code><a href="https://pillar.r-lib.org/reference/tbl_sum.html" class="external-link">tbl_sum()</a></code> generic instead of <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code>. This means that the output is more consistent with tibble, and that <code><a href="https://rdrr.io/r/base/format.html" class="external-link">format()</a></code> is now supported also for SQL sources (<a href="https://github.com/tidyverse/dplyr/issues/2781" class="external-link">#2781</a>).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.5.0" id="dplyr-050">dplyr 0.5.0<a class="anchor" aria-label="anchor" href="#dplyr-050"></a></h2><p class="text-muted">CRAN release: 2016-06-24</p>
<div class="section level3">
<h3 id="breaking-changes-0-5-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-5-0"></a></h3>
<div class="section level4">
<h4 id="existing-functions-0-5-0">Existing functions<a class="anchor" aria-label="anchor" href="#existing-functions-0-5-0"></a></h4>
<ul><li><p><code><a href="../reference/arrange.html">arrange()</a></code> once again ignores grouping (<a href="https://github.com/tidyverse/dplyr/issues/1206" class="external-link">#1206</a>).</p></li>
<li><p><code><a href="../reference/distinct.html">distinct()</a></code> now only keeps the distinct variables. If you want to return all variables (using the first row for non-distinct values) use <code>.keep_all = TRUE</code> (<a href="https://github.com/tidyverse/dplyr/issues/1110" class="external-link">#1110</a>). For SQL sources, <code>.keep_all = FALSE</code> is implemented using <code>GROUP BY</code>, and <code>.keep_all = TRUE</code> raises an error (<a href="https://github.com/tidyverse/dplyr/issues/1937" class="external-link">#1937</a>, <a href="https://github.com/tidyverse/dplyr/issues/1942" class="external-link">#1942</a>, <a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>). (The default behaviour of using all variables when none are specified remains - this note only applies if you select some variables).</p></li>
<li><p>The select helper functions <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with()</a></code>, <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">ends_with()</a></code> etc are now real exported functions. This means that you’ll need to import those functions if you’re using from a package where dplyr is not attached. i.e. <code>dplyr::select(mtcars, starts_with("m"))</code> used to work, but now you’ll need <code>dplyr::select(mtcars, dplyr::starts_with("m"))</code>.</p></li>
</ul></div>
<div class="section level4">
<h4 id="deprecated-and-defunct-functions-0-5-0">Deprecated and defunct functions<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-functions-0-5-0"></a></h4>
<ul><li><p>The long deprecated <code>chain()</code>, <code>chain_q()</code> and <code>%.%</code> have been removed. Please use <code>%&gt;%</code> instead.</p></li>
<li><p><code><a href="../reference/defunct.html">id()</a></code> has been deprecated. Please use <code><a href="../reference/group_data.html">group_indices()</a></code> instead (<a href="https://github.com/tidyverse/dplyr/issues/808" class="external-link">#808</a>).</p></li>
<li><p><code>rbind_all()</code> and <code>rbind_list()</code> are formally deprecated. Please use <code><a href="../reference/bind_rows.html">bind_rows()</a></code> instead (<a href="https://github.com/tidyverse/dplyr/issues/803" class="external-link">#803</a>).</p></li>
<li><p>Outdated benchmarking demos have been removed (<a href="https://github.com/tidyverse/dplyr/issues/1487" class="external-link">#1487</a>).</p></li>
<li><p>Code related to starting and signalling clusters has been moved out to <a href="https://github.com/tidyverse/multidplyr" class="external-link">multidplyr</a>.</p></li>
</ul></div>
</div>
<div class="section level3">
<h3 id="new-functions-0-5-0">New functions<a class="anchor" aria-label="anchor" href="#new-functions-0-5-0"></a></h3>
<ul><li><p><code><a href="../reference/coalesce.html">coalesce()</a></code> finds the first non-missing value from a set of vectors. (<a href="https://github.com/tidyverse/dplyr/issues/1666" class="external-link">#1666</a>, thanks to <a href="https://github.com/krlmlr" class="external-link">@krlmlr</a> for initial implementation).</p></li>
<li><p><code><a href="../reference/case_when.html">case_when()</a></code> is a general vectorised if + else if (<a href="https://github.com/tidyverse/dplyr/issues/631" class="external-link">#631</a>).</p></li>
<li><p><code><a href="../reference/if_else.html">if_else()</a></code> is a vectorised if statement: it’s a stricter (type-safe), faster, and more predictable version of <code><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse()</a></code>. In SQL it is translated to a <code>CASE</code> statement.</p></li>
<li><p><code><a href="../reference/na_if.html">na_if()</a></code> makes it easy to replace a certain value with an <code>NA</code> (<a href="https://github.com/tidyverse/dplyr/issues/1707" class="external-link">#1707</a>). In SQL it is translated to <code>NULL_IF</code>.</p></li>
<li><p><code>near(x, y)</code> is a helper for <code>abs(x - y) &lt; tol</code> (<a href="https://github.com/tidyverse/dplyr/issues/1607" class="external-link">#1607</a>).</p></li>
<li><p><code><a href="../reference/recode.html">recode()</a></code> is vectorised equivalent to <code><a href="https://rdrr.io/r/base/switch.html" class="external-link">switch()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/1710" class="external-link">#1710</a>).</p></li>
<li><p><code><a href="../reference/setops.html">union_all()</a></code> method. Maps to <code>UNION ALL</code> for SQL sources, <code><a href="../reference/bind_rows.html">bind_rows()</a></code> for data frames/tbl_dfs, and <code><a href="../reference/combine.html">combine()</a></code> for vectors (<a href="https://github.com/tidyverse/dplyr/issues/1045" class="external-link">#1045</a>).</p></li>
<li><p>A new family of functions replace <code><a href="../reference/summarise_each.html">summarise_each()</a></code> and <code><a href="../reference/summarise_each.html">mutate_each()</a></code> (which will thus be deprecated in a future release). <code><a href="../reference/summarise_all.html">summarise_all()</a></code> and <code><a href="../reference/mutate_all.html">mutate_all()</a></code> apply a function to all columns while <code><a href="../reference/summarise_all.html">summarise_at()</a></code> and <code><a href="../reference/mutate_all.html">mutate_at()</a></code> operate on a subset of columns. These columns are selected with either a character vector of columns names, a numeric vector of column positions, or a column specification with <code><a href="../reference/select.html">select()</a></code> semantics generated by the new <code>columns()</code> helper. In addition, <code><a href="../reference/summarise_all.html">summarise_if()</a></code> and <code><a href="../reference/mutate_all.html">mutate_if()</a></code> take a predicate function or a logical vector (these verbs currently require local sources). All these functions can now take ordinary functions instead of a list of functions generated by <code><a href="../reference/funs.html">funs()</a></code> (though this is only useful for local sources). (<a href="https://github.com/tidyverse/dplyr/issues/1845" class="external-link">#1845</a>, <a href="https://github.com/lionel-" class="external-link">@lionel-</a>)</p></li>
<li><p><code><a href="../reference/select_all.html">select_if()</a></code> lets you select columns with a predicate function. Only compatible with local sources. (<a href="https://github.com/tidyverse/dplyr/issues/497" class="external-link">#497</a>, <a href="https://github.com/tidyverse/dplyr/issues/1569" class="external-link">#1569</a>, <a href="https://github.com/lionel-" class="external-link">@lionel-</a>)</p></li>
</ul></div>
<div class="section level3">
<h3 id="local-backends-0-5-0">Local backends<a class="anchor" aria-label="anchor" href="#local-backends-0-5-0"></a></h3>
<div class="section level4">
<h4 id="dtplyr-0-5-0">dtplyr<a class="anchor" aria-label="anchor" href="#dtplyr-0-5-0"></a></h4>
<p>All data table related code has been separated out in to a new dtplyr package. This decouples the development of the data.table interface from the development of the dplyr package. If both data.table and dplyr are loaded, you’ll get a message reminding you to load dtplyr.</p>
</div>
<div class="section level4">
<h4 id="tibble-0-5-0">Tibble<a class="anchor" aria-label="anchor" href="#tibble-0-5-0"></a></h4>
<p>Functions related to the creation and coercion of <code>tbl_df</code>s, now live in their own package: <a href="https://posit.co/blog/tibble-1-0-0/" class="external-link">tibble</a>. See <code><a href="https://tibble.tidyverse.org/articles/tibble.html" class="external-link">vignette("tibble")</a></code> for more details.</p>
<ul><li><p><code>$</code> and <code>[[</code> methods that never do partial matching (<a href="https://github.com/tidyverse/dplyr/issues/1504" class="external-link">#1504</a>), and throw an error if the variable does not exist.</p></li>
<li><p><code><a href="../reference/all_equal.html">all_equal()</a></code> allows to compare data frames ignoring row and column order, and optionally ignoring minor differences in type (e.g. int vs. double) (<a href="https://github.com/tidyverse/dplyr/issues/821" class="external-link">#821</a>). The test handles the case where the df has 0 columns (<a href="https://github.com/tidyverse/dplyr/issues/1506" class="external-link">#1506</a>). The test fails fails when convert is <code>FALSE</code> and types don’t match (<a href="https://github.com/tidyverse/dplyr/issues/1484" class="external-link">#1484</a>).</p></li>
<li><p><code><a href="../reference/all_equal.html">all_equal()</a></code> shows better error message when comparing raw values or when types are incompatible and <code>convert = TRUE</code> (<a href="https://github.com/tidyverse/dplyr/issues/1820" class="external-link">#1820</a>, <a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>).</p></li>
<li><p><code><a href="https://tibble.tidyverse.org/reference/add_row.html" class="external-link">add_row()</a></code> makes it easy to add a new row to data frame (<a href="https://github.com/tidyverse/dplyr/issues/1021" class="external-link">#1021</a>)</p></li>
<li><p><code><a href="https://tibble.tidyverse.org/reference/deprecated.html" class="external-link">as_data_frame()</a></code> is now an S3 generic with methods for lists (the old <code><a href="https://tibble.tidyverse.org/reference/deprecated.html" class="external-link">as_data_frame()</a></code>), data frames (trivial), and matrices (with efficient C++ implementation) (<a href="https://github.com/tidyverse/dplyr/issues/876" class="external-link">#876</a>). It no longer strips subclasses.</p></li>
<li><p>The internals of <code><a href="https://tibble.tidyverse.org/reference/deprecated.html" class="external-link">data_frame()</a></code> and <code><a href="https://tibble.tidyverse.org/reference/deprecated.html" class="external-link">as_data_frame()</a></code> have been aligned, so <code><a href="https://tibble.tidyverse.org/reference/deprecated.html" class="external-link">as_data_frame()</a></code> will now automatically recycle length-1 vectors. Both functions give more informative error messages if you attempting to create an invalid data frame. You can no longer create a data frame with duplicated names (<a href="https://github.com/tidyverse/dplyr/issues/820" class="external-link">#820</a>). Both check for <code>POSIXlt</code> columns, and tell you to use <code>POSIXct</code> instead (<a href="https://github.com/tidyverse/dplyr/issues/813" class="external-link">#813</a>).</p></li>
<li><p><code><a href="https://tibble.tidyverse.org/reference/deprecated.html" class="external-link">frame_data()</a></code> properly constructs rectangular tables (<a href="https://github.com/tidyverse/dplyr/issues/1377" class="external-link">#1377</a>, <a href="https://github.com/kevinushey" class="external-link">@kevinushey</a>), and supports list-cols.</p></li>
<li><p><code><a href="../reference/glimpse.html">glimpse()</a></code> is now a generic. The default method dispatches to <code><a href="https://rdrr.io/r/utils/str.html" class="external-link">str()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/1325" class="external-link">#1325</a>). It now (invisibly) returns its first argument (<a href="https://github.com/tidyverse/dplyr/issues/1570" class="external-link">#1570</a>).</p></li>
<li><p><code><a href="https://tibble.tidyverse.org/reference/lst.html" class="external-link">lst()</a></code> and <code><a href="https://tibble.tidyverse.org/reference/deprecated.html" class="external-link">lst_()</a></code> which create lists in the same way that <code><a href="https://tibble.tidyverse.org/reference/deprecated.html" class="external-link">data_frame()</a></code> and <code><a href="https://tibble.tidyverse.org/reference/deprecated.html" class="external-link">data_frame_()</a></code> create data frames (<a href="https://github.com/tidyverse/dplyr/issues/1290" class="external-link">#1290</a>).</p></li>
<li><p><code>print.tbl_df()</code> is considerably faster if you have very wide data frames. It will now also only list the first 100 additional variables not already on screen - control this with the new <code>n_extra</code> parameter to <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/1161" class="external-link">#1161</a>). When printing a grouped data frame the number of groups is now printed with thousands separators (<a href="https://github.com/tidyverse/dplyr/issues/1398" class="external-link">#1398</a>). The type of list columns is correctly printed (<a href="https://github.com/tidyverse/dplyr/issues/1379" class="external-link">#1379</a>)</p></li>
<li><p>Package includes <code>setOldClass(c("tbl_df", "tbl", "data.frame"))</code> to help with S4 dispatch (<a href="https://github.com/tidyverse/dplyr/issues/969" class="external-link">#969</a>).</p></li>
<li><p><code>tbl_df</code> automatically generates column names (<a href="https://github.com/tidyverse/dplyr/issues/1606" class="external-link">#1606</a>).</p></li>
</ul></div>
<div class="section level4">
<h4 id="tbl_cube-0-5-0">tbl_cube<a class="anchor" aria-label="anchor" href="#tbl_cube-0-5-0"></a></h4>
<ul><li><p>new <code>as_data_frame.tbl_cube()</code> (<a href="https://github.com/tidyverse/dplyr/issues/1563" class="external-link">#1563</a>, <a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>).</p></li>
<li><p><code>tbl_cube</code>s are now constructed correctly from data frames, duplicate dimension values are detected, missing dimension values are filled with <code>NA</code>. The construction from data frames now guesses the measure variables by default, and allows specification of dimension and/or measure variables (<a href="https://github.com/tidyverse/dplyr/issues/1568" class="external-link">#1568</a>, <a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>).</p></li>
<li><p>Swap order of <code>dim_names</code> and <code>met_name</code> arguments in <code>as.tbl_cube</code> (for <code>array</code>, <code>table</code> and <code>matrix</code>) for consistency with <code>tbl_cube</code> and <code>as.tbl_cube.data.frame</code>. Also, the <code>met_name</code> argument to <code>as.tbl_cube.table</code> now defaults to <code>"Freq"</code> for consistency with <code>as.data.frame.table</code> (<a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>, <a href="https://github.com/tidyverse/dplyr/issues/1374" class="external-link">#1374</a>).</p></li>
</ul></div>
</div>
<div class="section level3">
<h3 id="remote-backends-0-5-0">Remote backends<a class="anchor" aria-label="anchor" href="#remote-backends-0-5-0"></a></h3>
<ul><li><p><code><a href="https://tibble.tidyverse.org/reference/deprecated.html" class="external-link">as_data_frame()</a></code> on SQL sources now returns all rows (<a href="https://github.com/tidyverse/dplyr/issues/1752" class="external-link">#1752</a>, <a href="https://github.com/tidyverse/dplyr/issues/1821" class="external-link">#1821</a>, <a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>).</p></li>
<li><p><code><a href="../reference/compute.html">compute()</a></code> gets new parameters <code>indexes</code> and <code>unique_indexes</code> that make it easier to add indexes (<a href="https://github.com/tidyverse/dplyr/issues/1499" class="external-link">#1499</a>, <a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>).</p></li>
<li><p><code><a href="../reference/backend_dbplyr.html">db_explain()</a></code> gains a default method for DBIConnections (<a href="https://github.com/tidyverse/dplyr/issues/1177" class="external-link">#1177</a>).</p></li>
<li><p>The backend testing system has been improved. This lead to the removal of <code>temp_srcs()</code>. In the unlikely event that you were using this function, you can instead use <code>test_register_src()</code>, <code>test_load()</code>, and <code>test_frame()</code>.</p></li>
<li><p>You can now use <code><a href="../reference/mutate-joins.html">right_join()</a></code> and <code><a href="../reference/mutate-joins.html">full_join()</a></code> with remote tables (<a href="https://github.com/tidyverse/dplyr/issues/1172" class="external-link">#1172</a>).</p></li>
</ul><div class="section level4">
<h4 id="sqlite-0-5-0">SQLite<a class="anchor" aria-label="anchor" href="#sqlite-0-5-0"></a></h4>
<ul><li><p><code>src_memdb()</code> is a session-local in-memory SQLite database. <code>memdb_frame()</code> works like <code><a href="https://tibble.tidyverse.org/reference/deprecated.html" class="external-link">data_frame()</a></code>, but creates a new table in that database.</p></li>
<li><p><code><a href="../reference/src_dbi.html">src_sqlite()</a></code> now uses a stricter quoting character, <code>`</code>, instead of <code>"</code>. SQLite “helpfully” will convert <code>"x"</code> into a string if there is no identifier called x in the current scope (<a href="https://github.com/tidyverse/dplyr/issues/1426" class="external-link">#1426</a>).</p></li>
<li><p><code><a href="../reference/src_dbi.html">src_sqlite()</a></code> throws errors if you try and use it with window functions (<a href="https://github.com/tidyverse/dplyr/issues/907" class="external-link">#907</a>).</p></li>
</ul></div>
<div class="section level4">
<h4 id="sql-translation-0-5-0">SQL translation<a class="anchor" aria-label="anchor" href="#sql-translation-0-5-0"></a></h4>
<ul><li><p><code>filter.tbl_sql()</code> now puts parens around each argument (<a href="https://github.com/tidyverse/dplyr/issues/934" class="external-link">#934</a>).</p></li>
<li><p>Unary <code>-</code> is better translated (<a href="https://github.com/tidyverse/dplyr/issues/1002" class="external-link">#1002</a>).</p></li>
<li><p><code>escape.POSIXt()</code> method makes it easier to use date times. The date is rendered in ISO 8601 format in UTC, which should work in most databases (<a href="https://github.com/tidyverse/dplyr/issues/857" class="external-link">#857</a>).</p></li>
<li><p><code><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na()</a></code> gets a missing space (<a href="https://github.com/tidyverse/dplyr/issues/1695" class="external-link">#1695</a>).</p></li>
<li><p><code>if</code>, <code><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na()</a></code>, and <code><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null()</a></code> get extra parens to make precedence more clear (<a href="https://github.com/tidyverse/dplyr/issues/1695" class="external-link">#1695</a>).</p></li>
<li><p><code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmin()</a></code> and <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmax()</a></code> are translated to <code>MIN()</code> and <code>MAX()</code> (<a href="https://github.com/tidyverse/dplyr/issues/1711" class="external-link">#1711</a>).</p></li>
<li>
<p>Window functions:</p>
<ul><li><p>Work on ungrouped data (<a href="https://github.com/tidyverse/dplyr/issues/1061" class="external-link">#1061</a>).</p></li>
<li><p>Warning if order is not set on cumulative window functions.</p></li>
<li><p>Multiple partitions or ordering variables in windowed functions no longer generate extra parentheses, so should work for more databases (<a href="https://github.com/tidyverse/dplyr/issues/1060" class="external-link">#1060</a>)</p></li>
</ul></li>
</ul></div>
<div class="section level4">
<h4 id="internals-0-5-0">Internals<a class="anchor" aria-label="anchor" href="#internals-0-5-0"></a></h4>
<p>This version includes an almost total rewrite of how dplyr verbs are translated into SQL. Previously, I used a rather ad-hoc approach, which tried to guess when a new subquery was needed. Unfortunately this approach was fraught with bugs, so in this version I’ve implemented a much richer internal data model. Now there is a three step process:</p>
<ol style="list-style-type: decimal"><li><p>When applied to a <code>tbl_lazy</code>, each dplyr verb captures its inputs and stores in a <code>op</code> (short for operation) object.</p></li>
<li><p><code>sql_build()</code> iterates through the operations building to build up an object that represents a SQL query. These objects are convenient for testing as they are lists, and are backend agnostics.</p></li>
<li><p><code>sql_render()</code> iterates through the queries and generates the SQL, using generics (like <code><a href="../reference/backend_dbplyr.html">sql_select()</a></code>) that can vary based on the backend.</p></li>
</ol><p>In the short-term, this increased abstraction is likely to lead to some minor performance decreases, but the chance of dplyr generating correct SQL is much much higher. In the long-term, these abstractions will make it possible to write a query optimiser/compiler in dplyr, which would make it possible to generate much more succinct queries.</p>
<p>If you have written a dplyr backend, you’ll need to make some minor changes to your package:</p>
<ul><li><p><code><a href="../reference/backend_dbplyr.html">sql_join()</a></code> has been considerably simplified - it is now only responsible for generating the join query, not for generating the intermediate selects that rename the variable. Similarly for <code><a href="../reference/backend_dbplyr.html">sql_semi_join()</a></code>. If you’ve provided new methods in your backend, you’ll need to rewrite.</p></li>
<li><p><code>select_query()</code> gains a distinct argument which is used for generating queries for <code><a href="../reference/distinct.html">distinct()</a></code>. It loses the <code>offset</code> argument which was never used (and hence never tested).</p></li>
<li><p><code>src_translate_env()</code> has been replaced by <code><a href="../reference/backend_dbplyr.html">sql_translate_env()</a></code> which should have methods for the connection object.</p></li>
</ul><p>There were two other tweaks to the exported API, but these are less likely to affect anyone.</p>
<ul><li><p><code>translate_sql()</code> and <code>partial_eval()</code> got a new API: now use connection + variable names, rather than a <code>tbl</code>. This makes testing considerably easier. <code>translate_sql_q()</code> has been renamed to <code>translate_sql_()</code>.</p></li>
<li><p>Also note that the sql generation generics now have a default method, instead methods for DBIConnection and NULL.</p></li>
</ul></div>
</div>
<div class="section level3">
<h3 id="minor-improvements-and-bug-fixes-0-5-0">Minor improvements and bug fixes<a class="anchor" aria-label="anchor" href="#minor-improvements-and-bug-fixes-0-5-0"></a></h3>
<div class="section level4">
<h4 id="single-table-verbs-0-5-0">Single table verbs<a class="anchor" aria-label="anchor" href="#single-table-verbs-0-5-0"></a></h4>
<ul><li><p>Avoiding segfaults in presence of <code>raw</code> columns (<a href="https://github.com/tidyverse/dplyr/issues/1803" class="external-link">#1803</a>, <a href="https://github.com/tidyverse/dplyr/issues/1817" class="external-link">#1817</a>, <a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>).</p></li>
<li><p><code><a href="../reference/arrange.html">arrange()</a></code> fails gracefully on list columns (<a href="https://github.com/tidyverse/dplyr/issues/1489" class="external-link">#1489</a>) and matrices (<a href="https://github.com/tidyverse/dplyr/issues/1870" class="external-link">#1870</a>, <a href="https://github.com/tidyverse/dplyr/issues/1945" class="external-link">#1945</a>, <a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>).</p></li>
<li><p><code><a href="../reference/count.html">count()</a></code> now adds additional grouping variables, rather than overriding existing (<a href="https://github.com/tidyverse/dplyr/issues/1703" class="external-link">#1703</a>). <code><a href="../reference/count.html">tally()</a></code> and <code><a href="../reference/count.html">count()</a></code> can now count a variable called <code>n</code> (<a href="https://github.com/tidyverse/dplyr/issues/1633" class="external-link">#1633</a>). Weighted <code><a href="../reference/count.html">count()</a></code>/<code><a href="../reference/count.html">tally()</a></code> ignore <code>NA</code>s (<a href="https://github.com/tidyverse/dplyr/issues/1145" class="external-link">#1145</a>).</p></li>
<li><p>The progress bar in <code><a href="../reference/do.html">do()</a></code> is now updated at most 20 times per second, avoiding unnecessary redraws (<a href="https://github.com/tidyverse/dplyr/issues/1734" class="external-link">#1734</a>, <a href="https://github.com/mkuhn" class="external-link">@mkuhn</a>)</p></li>
<li><p><code><a href="../reference/distinct.html">distinct()</a></code> doesn’t crash when given a 0-column data frame (<a href="https://github.com/tidyverse/dplyr/issues/1437" class="external-link">#1437</a>).</p></li>
<li><p><code><a href="../reference/filter.html">filter()</a></code> throws an error if you supply an named arguments. This is usually a type: <code>filter(df, x = 1)</code> instead of <code>filter(df, x == 1)</code> (<a href="https://github.com/tidyverse/dplyr/issues/1529" class="external-link">#1529</a>).</p></li>
<li><p><code><a href="../reference/summarise.html">summarise()</a></code> correctly coerces factors with different levels (<a href="https://github.com/tidyverse/dplyr/issues/1678" class="external-link">#1678</a>), handles min/max of already summarised variable (<a href="https://github.com/tidyverse/dplyr/issues/1622" class="external-link">#1622</a>), and supports data frames as columns (<a href="https://github.com/tidyverse/dplyr/issues/1425" class="external-link">#1425</a>).</p></li>
<li>
<p><code><a href="../reference/select.html">select()</a></code> now informs you that it adds missing grouping variables (<a href="https://github.com/tidyverse/dplyr/issues/1511" class="external-link">#1511</a>). It works even if the grouping variable has a non-syntactic name (<a href="https://github.com/tidyverse/dplyr/issues/1138" class="external-link">#1138</a>). Negating a failed match (e.g. <code>select(mtcars, -contains("x"))</code>) returns all columns, instead of no columns (<a href="https://github.com/tidyverse/dplyr/issues/1176" class="external-link">#1176</a>)</p>
<p>The <code><a href="../reference/select.html">select()</a></code> helpers are now exported and have their own documentation (<a href="https://github.com/tidyverse/dplyr/issues/1410" class="external-link">#1410</a>). <code><a href="https://tidyselect.r-lib.org/reference/one_of.html" class="external-link">one_of()</a></code> gives a useful error message if variables names are not found in data frame (<a href="https://github.com/tidyverse/dplyr/issues/1407" class="external-link">#1407</a>).</p>
</li>
<li><p>The naming behaviour of <code><a href="../reference/summarise_each.html">summarise_each()</a></code> and <code><a href="../reference/summarise_each.html">mutate_each()</a></code> has been tweaked so that you can force inclusion of both the function and the variable name: <code>summarise_each(mtcars, funs(mean = mean), everything())</code> (<a href="https://github.com/tidyverse/dplyr/issues/442" class="external-link">#442</a>).</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> handles factors that are all <code>NA</code> (<a href="https://github.com/tidyverse/dplyr/issues/1645" class="external-link">#1645</a>), or have different levels in different groups (<a href="https://github.com/tidyverse/dplyr/issues/1414" class="external-link">#1414</a>). It disambiguates <code>NA</code> and <code>NaN</code> (<a href="https://github.com/tidyverse/dplyr/issues/1448" class="external-link">#1448</a>), and silently promotes groups that only contain <code>NA</code> (<a href="https://github.com/tidyverse/dplyr/issues/1463" class="external-link">#1463</a>). It deep copies data in list columns (<a href="https://github.com/tidyverse/dplyr/issues/1643" class="external-link">#1643</a>), and correctly fails on incompatible columns (<a href="https://github.com/tidyverse/dplyr/issues/1641" class="external-link">#1641</a>). <code><a href="../reference/mutate.html">mutate()</a></code> on a grouped data no longer groups grouping attributes (<a href="https://github.com/tidyverse/dplyr/issues/1120" class="external-link">#1120</a>). <code><a href="../reference/rowwise.html">rowwise()</a></code> mutate gives expected results (<a href="https://github.com/tidyverse/dplyr/issues/1381" class="external-link">#1381</a>).</p></li>
<li><p><code><a href="https://tidyselect.r-lib.org/reference/one_of.html" class="external-link">one_of()</a></code> tolerates unknown variables in <code>vars</code>, but warns (<a href="https://github.com/tidyverse/dplyr/issues/1848" class="external-link">#1848</a>, <a href="https://github.com/jennybc" class="external-link">@jennybc</a>).</p></li>
<li><p><code>print.grouped_df()</code> passes on <code>...</code> to <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/1893" class="external-link">#1893</a>).</p></li>
<li><p><code><a href="../reference/slice.html">slice()</a></code> correctly handles grouped attributes (<a href="https://github.com/tidyverse/dplyr/issues/1405" class="external-link">#1405</a>).</p></li>
<li><p><code><a href="../reference/group_by.html">ungroup()</a></code> generic gains <code>...</code> (<a href="https://github.com/tidyverse/dplyr/issues/922" class="external-link">#922</a>).</p></li>
</ul></div>
<div class="section level4">
<h4 id="dual-table-verbs-0-5-0">Dual table verbs<a class="anchor" aria-label="anchor" href="#dual-table-verbs-0-5-0"></a></h4>
<ul><li><p><code><a href="../reference/bind_cols.html">bind_cols()</a></code> matches the behaviour of <code><a href="../reference/bind_rows.html">bind_rows()</a></code> and ignores <code>NULL</code> inputs (<a href="https://github.com/tidyverse/dplyr/issues/1148" class="external-link">#1148</a>). It also handles <code>POSIXct</code>s with integer base type (<a href="https://github.com/tidyverse/dplyr/issues/1402" class="external-link">#1402</a>).</p></li>
<li><p><code><a href="../reference/bind_rows.html">bind_rows()</a></code> handles 0-length named lists (<a href="https://github.com/tidyverse/dplyr/issues/1515" class="external-link">#1515</a>), promotes factors to characters (<a href="https://github.com/tidyverse/dplyr/issues/1538" class="external-link">#1538</a>), and warns when binding factor and character (<a href="https://github.com/tidyverse/dplyr/issues/1485" class="external-link">#1485</a>). bind_rows()` is more flexible in the way it can accept data frames, lists, list of data frames, and list of lists (<a href="https://github.com/tidyverse/dplyr/issues/1389" class="external-link">#1389</a>).</p></li>
<li><p><code><a href="../reference/bind_rows.html">bind_rows()</a></code> rejects <code>POSIXlt</code> columns (<a href="https://github.com/tidyverse/dplyr/issues/1875" class="external-link">#1875</a>, <a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>).</p></li>
<li><p>Both <code><a href="../reference/bind_cols.html">bind_cols()</a></code> and <code><a href="../reference/bind_rows.html">bind_rows()</a></code> infer classes and grouping information from the first data frame (<a href="https://github.com/tidyverse/dplyr/issues/1692" class="external-link">#1692</a>).</p></li>
<li><p><code><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind()</a></code> and <code><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind()</a></code> get <code><a href="../reference/grouped_df.html">grouped_df()</a></code> methods that make it harder to create corrupt data frames (<a href="https://github.com/tidyverse/dplyr/issues/1385" class="external-link">#1385</a>). You should still prefer <code><a href="../reference/bind_rows.html">bind_rows()</a></code> and <code><a href="../reference/bind_cols.html">bind_cols()</a></code>.</p></li>
<li><p>Joins now use correct class when joining on <code>POSIXct</code> columns (<a href="https://github.com/tidyverse/dplyr/issues/1582" class="external-link">#1582</a>, <a href="https://github.com/joel23888" class="external-link">@joel23888</a>), and consider time zones (<a href="https://github.com/tidyverse/dplyr/issues/819" class="external-link">#819</a>). Joins handle a <code>by</code> that is empty (<a href="https://github.com/tidyverse/dplyr/issues/1496" class="external-link">#1496</a>), or has duplicates (<a href="https://github.com/tidyverse/dplyr/issues/1192" class="external-link">#1192</a>). Suffixes grow progressively to avoid creating repeated column names (<a href="https://github.com/tidyverse/dplyr/issues/1460" class="external-link">#1460</a>). Joins on string columns should be substantially faster (<a href="https://github.com/tidyverse/dplyr/issues/1386" class="external-link">#1386</a>). Extra attributes are ok if they are identical (<a href="https://github.com/tidyverse/dplyr/issues/1636" class="external-link">#1636</a>). Joins work correct when factor levels not equal (<a href="https://github.com/tidyverse/dplyr/issues/1712" class="external-link">#1712</a>, <a href="https://github.com/tidyverse/dplyr/issues/1559" class="external-link">#1559</a>). Anti- and semi-joins give correct result when by variable is a factor (<a href="https://github.com/tidyverse/dplyr/issues/1571" class="external-link">#1571</a>), but warn if factor levels are inconsistent (<a href="https://github.com/tidyverse/dplyr/issues/2741" class="external-link">#2741</a>). A clear error message is given for joins where an explicit <code>by</code> contains unavailable columns (<a href="https://github.com/tidyverse/dplyr/issues/1928" class="external-link">#1928</a>, <a href="https://github.com/tidyverse/dplyr/issues/1932" class="external-link">#1932</a>). Warnings about join column inconsistencies now contain the column names (<a href="https://github.com/tidyverse/dplyr/issues/2728" class="external-link">#2728</a>).</p></li>
<li><p><code><a href="../reference/mutate-joins.html">inner_join()</a></code>, <code><a href="../reference/mutate-joins.html">left_join()</a></code>, <code><a href="../reference/mutate-joins.html">right_join()</a></code>, and <code><a href="../reference/mutate-joins.html">full_join()</a></code> gain a <code>suffix</code> argument which allows you to control what suffix duplicated variable names receive (<a href="https://github.com/tidyverse/dplyr/issues/1296" class="external-link">#1296</a>).</p></li>
<li><p>Set operations (<code><a href="../reference/setops.html">intersect()</a></code>, <code><a href="../reference/setops.html">union()</a></code> etc) respect coercion rules (<a href="https://github.com/tidyverse/dplyr/issues/799" class="external-link">#799</a>). <code><a href="../reference/setops.html">setdiff()</a></code> handles factors with <code>NA</code> levels (<a href="https://github.com/tidyverse/dplyr/issues/1526" class="external-link">#1526</a>).</p></li>
<li><p>There were a number of fixes to enable joining of data frames that don’t have the same encoding of column names (<a href="https://github.com/tidyverse/dplyr/issues/1513" class="external-link">#1513</a>), including working around bug 16885 regarding <code><a href="https://rdrr.io/r/base/match.html" class="external-link">match()</a></code> in R 3.3.0 (<a href="https://github.com/tidyverse/dplyr/issues/1806" class="external-link">#1806</a>, <a href="https://github.com/tidyverse/dplyr/issues/1810" class="external-link">#1810</a>, <a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>).</p></li>
</ul></div>
<div class="section level4">
<h4 id="vector-functions-0-5-0">Vector functions<a class="anchor" aria-label="anchor" href="#vector-functions-0-5-0"></a></h4>
<ul><li><p><code><a href="../reference/combine.html">combine()</a></code> silently drops <code>NULL</code> inputs (<a href="https://github.com/tidyverse/dplyr/issues/1596" class="external-link">#1596</a>).</p></li>
<li><p>Hybrid <code><a href="../reference/cumall.html">cummean()</a></code> is more stable against floating point errors (<a href="https://github.com/tidyverse/dplyr/issues/1387" class="external-link">#1387</a>).</p></li>
<li><p>Hybrid <code><a href="../reference/lead-lag.html">lead()</a></code> and <code><a href="../reference/lead-lag.html">lag()</a></code> received a considerable overhaul. They are more careful about more complicated expressions (<a href="https://github.com/tidyverse/dplyr/issues/1588" class="external-link">#1588</a>), and falls back more readily to pure R evaluation (<a href="https://github.com/tidyverse/dplyr/issues/1411" class="external-link">#1411</a>). They behave correctly in <code><a href="../reference/summarise.html">summarise()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/1434" class="external-link">#1434</a>). and handle default values for string columns.</p></li>
<li><p>Hybrid <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min()</a></code> and <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max()</a></code> handle empty sets (<a href="https://github.com/tidyverse/dplyr/issues/1481" class="external-link">#1481</a>).</p></li>
<li><p><code><a href="../reference/n_distinct.html">n_distinct()</a></code> uses multiple arguments for data frames (<a href="https://github.com/tidyverse/dplyr/issues/1084" class="external-link">#1084</a>), falls back to R evaluation when needed (<a href="https://github.com/tidyverse/dplyr/issues/1657" class="external-link">#1657</a>), reverting decision made in (<a href="https://github.com/tidyverse/dplyr/issues/567" class="external-link">#567</a>). Passing no arguments gives an error (<a href="https://github.com/tidyverse/dplyr/issues/1957" class="external-link">#1957</a>, <a href="https://github.com/tidyverse/dplyr/issues/1959" class="external-link">#1959</a>, <a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>).</p></li>
<li><p><code><a href="../reference/nth.html">nth()</a></code> now supports negative indices to select from end, e.g. <code>nth(x, -2)</code> selects the 2nd value from the end of <code>x</code> (<a href="https://github.com/tidyverse/dplyr/issues/1584" class="external-link">#1584</a>).</p></li>
<li><p><code><a href="../reference/top_n.html">top_n()</a></code> can now also select bottom <code>n</code> values by passing a negative value to <code>n</code> (<a href="https://github.com/tidyverse/dplyr/issues/1008" class="external-link">#1008</a>, <a href="https://github.com/tidyverse/dplyr/issues/1352" class="external-link">#1352</a>).</p></li>
<li><p>Hybrid evaluation leaves formulas untouched (<a href="https://github.com/tidyverse/dplyr/issues/1447" class="external-link">#1447</a>).</p></li>
</ul></div>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.4.3" id="dplyr-043">dplyr 0.4.3<a class="anchor" aria-label="anchor" href="#dplyr-043"></a></h2><p class="text-muted">CRAN release: 2015-09-01</p>
<div class="section level3">
<h3 id="improved-encoding-support-0-4-3">Improved encoding support<a class="anchor" aria-label="anchor" href="#improved-encoding-support-0-4-3"></a></h3>
<p>Until now, dplyr’s support for non-UTF8 encodings has been rather shaky. This release brings a number of improvement to fix these problems: it’s probably not perfect, but should be a lot better than the previously version. This includes fixes to <code><a href="../reference/arrange.html">arrange()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/1280" class="external-link">#1280</a>), <code><a href="../reference/bind_rows.html">bind_rows()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/1265" class="external-link">#1265</a>), <code><a href="../reference/distinct.html">distinct()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/1179" class="external-link">#1179</a>), and joins (<a href="https://github.com/tidyverse/dplyr/issues/1315" class="external-link">#1315</a>). <code>print.tbl_df()</code> also received a fix for strings with invalid encodings (<a href="https://github.com/tidyverse/dplyr/issues/851" class="external-link">#851</a>).</p>
</div>
<div class="section level3">
<h3 id="other-minor-improvements-and-bug-fixes-0-4-3">Other minor improvements and bug fixes<a class="anchor" aria-label="anchor" href="#other-minor-improvements-and-bug-fixes-0-4-3"></a></h3>
<ul><li><p><code><a href="https://tibble.tidyverse.org/reference/deprecated.html" class="external-link">frame_data()</a></code> provides a means for constructing <code>data_frame</code>s using a simple row-wise language. (<a href="https://github.com/tidyverse/dplyr/issues/1358" class="external-link">#1358</a>, <a href="https://github.com/kevinushey" class="external-link">@kevinushey</a>)</p></li>
<li><p><code><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal()</a></code> no longer runs all outputs together (<a href="https://github.com/tidyverse/dplyr/issues/1130" class="external-link">#1130</a>).</p></li>
<li><p><code><a href="https://tibble.tidyverse.org/reference/deprecated.html" class="external-link">as_data_frame()</a></code> gives better error message with NA column names (<a href="https://github.com/tidyverse/dplyr/issues/1101" class="external-link">#1101</a>).</p></li>
<li><p><code>[.tbl_df</code> is more careful about subsetting column names (<a href="https://github.com/tidyverse/dplyr/issues/1245" class="external-link">#1245</a>).</p></li>
<li><p><code><a href="../reference/arrange.html">arrange()</a></code> and <code><a href="../reference/mutate.html">mutate()</a></code> work on empty data frames (<a href="https://github.com/tidyverse/dplyr/issues/1142" class="external-link">#1142</a>).</p></li>
<li><p><code><a href="../reference/arrange.html">arrange()</a></code>, <code><a href="../reference/filter.html">filter()</a></code>, <code><a href="../reference/slice.html">slice()</a></code>, and <code><a href="../reference/summarise.html">summarise()</a></code> preserve data frame meta attributes (<a href="https://github.com/tidyverse/dplyr/issues/1064" class="external-link">#1064</a>).</p></li>
<li><p><code><a href="../reference/bind_rows.html">bind_rows()</a></code> and <code><a href="../reference/bind_cols.html">bind_cols()</a></code> accept lists (<a href="https://github.com/tidyverse/dplyr/issues/1104" class="external-link">#1104</a>): during initial data cleaning you no longer need to convert lists to data frames, but can instead feed them to <code><a href="../reference/bind_rows.html">bind_rows()</a></code> directly.</p></li>
<li><p><code><a href="../reference/bind_rows.html">bind_rows()</a></code> gains a <code>.id</code> argument. When supplied, it creates a new column that gives the name of each data frame (<a href="https://github.com/tidyverse/dplyr/issues/1337" class="external-link">#1337</a>, <a href="https://github.com/lionel-" class="external-link">@lionel-</a>).</p></li>
<li><p><code><a href="../reference/bind_rows.html">bind_rows()</a></code> respects the <code>ordered</code> attribute of factors (<a href="https://github.com/tidyverse/dplyr/issues/1112" class="external-link">#1112</a>), and does better at comparing <code>POSIXct</code>s (<a href="https://github.com/tidyverse/dplyr/issues/1125" class="external-link">#1125</a>). The <code>tz</code> attribute is ignored when determining if two <code>POSIXct</code> vectors are comparable. If the <code>tz</code> of all inputs is the same, it’s used, otherwise its set to <code>UTC</code>.</p></li>
<li><p><code><a href="https://tibble.tidyverse.org/reference/deprecated.html" class="external-link">data_frame()</a></code> always produces a <code>tbl_df</code> (<a href="https://github.com/tidyverse/dplyr/issues/1151" class="external-link">#1151</a>, <a href="https://github.com/kevinushey" class="external-link">@kevinushey</a>)</p></li>
<li><p><code>filter(x, TRUE, TRUE)</code> now just returns <code>x</code> (<a href="https://github.com/tidyverse/dplyr/issues/1210" class="external-link">#1210</a>), it doesn’t internally modify the first argument (<a href="https://github.com/tidyverse/dplyr/issues/971" class="external-link">#971</a>), and it now works with rowwise data (<a href="https://github.com/tidyverse/dplyr/issues/1099" class="external-link">#1099</a>). It once again works with data tables (<a href="https://github.com/tidyverse/dplyr/issues/906" class="external-link">#906</a>).</p></li>
<li><p><code><a href="../reference/glimpse.html">glimpse()</a></code> also prints out the number of variables in addition to the number of observations (<a href="https://github.com/ilarischeinin" class="external-link">@ilarischeinin</a>, <a href="https://github.com/tidyverse/dplyr/issues/988" class="external-link">#988</a>).</p></li>
<li><p>Joins handles matrix columns better (<a href="https://github.com/tidyverse/dplyr/issues/1230" class="external-link">#1230</a>), and can join <code>Date</code> objects with heterogeneous representations (some <code>Date</code>s are integers, while other are numeric). This also improves <code><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/1204" class="external-link">#1204</a>).</p></li>
<li><p>Fixed <code><a href="../reference/percent_rank.html">percent_rank()</a></code> and <code><a href="../reference/percent_rank.html">cume_dist()</a></code> so that missing values no longer affect denominator (<a href="https://github.com/tidyverse/dplyr/issues/1132" class="external-link">#1132</a>).</p></li>
<li><p><code>print.tbl_df()</code> now displays the class for all variables, not just those that don’t fit on the screen (<a href="https://github.com/tidyverse/dplyr/issues/1276" class="external-link">#1276</a>). It also displays duplicated column names correctly (<a href="https://github.com/tidyverse/dplyr/issues/1159" class="external-link">#1159</a>).</p></li>
<li><p><code>print.grouped_df()</code> now tells you how many groups there are.</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> can set to <code>NULL</code> the first column (used to segfault, <a href="https://github.com/tidyverse/dplyr/issues/1329" class="external-link">#1329</a>) and it better protects intermediary results (avoiding random segfaults, <a href="https://github.com/tidyverse/dplyr/issues/1231" class="external-link">#1231</a>).</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> on grouped data handles the special case where for the first few groups, the result consists of a <code>logical</code> vector with only <code>NA</code>. This can happen when the condition of an <code>ifelse</code> is an all <code>NA</code> logical vector (<a href="https://github.com/tidyverse/dplyr/issues/958" class="external-link">#958</a>).</p></li>
<li><p><code>mutate.rowwise_df()</code> handles factors (<a href="https://github.com/tidyverse/dplyr/issues/886" class="external-link">#886</a>) and correctly handles 0-row inputs (<a href="https://github.com/tidyverse/dplyr/issues/1300" class="external-link">#1300</a>).</p></li>
<li><p><code><a href="../reference/n_distinct.html">n_distinct()</a></code> gains an <code>na_rm</code> argument (<a href="https://github.com/tidyverse/dplyr/issues/1052" class="external-link">#1052</a>).</p></li>
<li><p>The <code>Progress</code> bar used by <code><a href="../reference/do.html">do()</a></code> now respects global option <code>dplyr.show_progress</code> (default is TRUE) so you can turn it off globally (<a href="https://github.com/jimhester" class="external-link">@jimhester</a> <a href="https://github.com/tidyverse/dplyr/issues/1264" class="external-link">#1264</a>, <a href="https://github.com/tidyverse/dplyr/issues/1226" class="external-link">#1226</a>).</p></li>
<li><p><code><a href="../reference/summarise.html">summarise()</a></code> handles expressions that returning heterogenous outputs, e.g. <code><a href="https://rdrr.io/r/stats/median.html" class="external-link">median()</a></code>, which that sometimes returns an integer, and other times a numeric (<a href="https://github.com/tidyverse/dplyr/issues/893" class="external-link">#893</a>).</p></li>
<li><p><code><a href="../reference/slice.html">slice()</a></code> silently drops columns corresponding to an NA (<a href="https://github.com/tidyverse/dplyr/issues/1235" class="external-link">#1235</a>).</p></li>
<li><p><code>ungroup.rowwise_df()</code> gives a <code>tbl_df</code> (<a href="https://github.com/tidyverse/dplyr/issues/936" class="external-link">#936</a>).</p></li>
<li><p>More explicit duplicated column name error message (<a href="https://github.com/tidyverse/dplyr/issues/996" class="external-link">#996</a>).</p></li>
<li><p>When “,” is already being used as the decimal point (<code>getOption("OutDec")</code>), use “.” as the thousands separator when printing out formatted numbers (<a href="https://github.com/ilarischeinin" class="external-link">@ilarischeinin</a>, <a href="https://github.com/tidyverse/dplyr/issues/988" class="external-link">#988</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="databases-0-4-3">Databases<a class="anchor" aria-label="anchor" href="#databases-0-4-3"></a></h3>
<ul><li><p><code>db_query_fields.SQLiteConnection</code> uses <code>build_sql</code> rather than <code>paste0</code> (<a href="https://github.com/tidyverse/dplyr/issues/926" class="external-link">#926</a>, <a href="https://github.com/NikNakk" class="external-link">@NikNakk</a>)</p></li>
<li><p>Improved handling of <code><a href="https://rdrr.io/r/base/Log.html" class="external-link">log()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/1330" class="external-link">#1330</a>).</p></li>
<li><p><code>n_distinct(x)</code> is translated to <code>COUNT(DISTINCT(x))</code> (<a href="https://github.com/skparkes" class="external-link">@skparkes</a>, <a href="https://github.com/tidyverse/dplyr/issues/873" class="external-link">#873</a>).</p></li>
<li><p><code>print(n = Inf)</code> now works for remote sources (<a href="https://github.com/tidyverse/dplyr/issues/1310" class="external-link">#1310</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="hybrid-evaluation-0-4-3">Hybrid evaluation<a class="anchor" aria-label="anchor" href="#hybrid-evaluation-0-4-3"></a></h3>
<ul><li><p>Hybrid evaluation does not take place for objects with a class (<a href="https://github.com/tidyverse/dplyr/issues/1237" class="external-link">#1237</a>).</p></li>
<li><p>Improved <code>$</code> handling (<a href="https://github.com/tidyverse/dplyr/issues/1134" class="external-link">#1134</a>).</p></li>
<li><p>Simplified code for <code><a href="../reference/lead-lag.html">lead()</a></code> and <code><a href="../reference/lead-lag.html">lag()</a></code> and make sure they work properly on factors (<a href="https://github.com/tidyverse/dplyr/issues/955" class="external-link">#955</a>). Both respect the <code>default</code> argument (<a href="https://github.com/tidyverse/dplyr/issues/915" class="external-link">#915</a>).</p></li>
<li><p><code>mutate</code> can set to <code>NULL</code> the first column (used to segfault, <a href="https://github.com/tidyverse/dplyr/issues/1329" class="external-link">#1329</a>).</p></li>
<li><p><code>filter</code> on grouped data handles indices correctly (<a href="https://github.com/tidyverse/dplyr/issues/880" class="external-link">#880</a>).</p></li>
<li><p><code><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum()</a></code> issues a warning about integer overflow (<a href="https://github.com/tidyverse/dplyr/issues/1108" class="external-link">#1108</a>).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.4.2" id="dplyr-042">dplyr 0.4.2<a class="anchor" aria-label="anchor" href="#dplyr-042"></a></h2><p class="text-muted">CRAN release: 2015-06-16</p>
<p>This is a minor release containing fixes for a number of crashes and issues identified by R CMD CHECK. There is one new “feature”: dplyr no longer complains about unrecognised attributes, and instead just copies them over to the output.</p>
<ul><li><p><code><a href="../reference/lead-lag.html">lag()</a></code> and <code><a href="../reference/lead-lag.html">lead()</a></code> for grouped data were confused about indices and therefore produced wrong results (<a href="https://github.com/tidyverse/dplyr/issues/925" class="external-link">#925</a>, <a href="https://github.com/tidyverse/dplyr/issues/937" class="external-link">#937</a>). <code><a href="../reference/lead-lag.html">lag()</a></code> once again overrides <code><a href="../reference/lead-lag.html">lag()</a></code> instead of just the default method <code>lag.default()</code>. This is necessary due to changes in R CMD check. To use the lag function provided by another package, use <code>pkg::lag</code>.</p></li>
<li><p>Fixed a number of memory issues identified by valgrind.</p></li>
<li><p>Improved performance when working with large number of columns (<a href="https://github.com/tidyverse/dplyr/issues/879" class="external-link">#879</a>).</p></li>
<li><p>Lists-cols that contain data frames now print a slightly nicer summary (<a href="https://github.com/tidyverse/dplyr/issues/1147" class="external-link">#1147</a>)</p></li>
<li><p>Set operations give more useful error message on incompatible data frames (<a href="https://github.com/tidyverse/dplyr/issues/903" class="external-link">#903</a>).</p></li>
<li><p><code><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal()</a></code> gives the correct result when <code>ignore_row_order</code> is <code>TRUE</code> (<a href="https://github.com/tidyverse/dplyr/issues/1065" class="external-link">#1065</a>) and <code><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal()</a></code> correctly handles character missing values (<a href="https://github.com/tidyverse/dplyr/issues/1095" class="external-link">#1095</a>).</p></li>
<li><p><code><a href="../reference/bind_cols.html">bind_cols()</a></code> always produces a <code>tbl_df</code> (<a href="https://github.com/tidyverse/dplyr/issues/779" class="external-link">#779</a>).</p></li>
<li><p><code><a href="../reference/bind_rows.html">bind_rows()</a></code> gains a test for a form of data frame corruption (<a href="https://github.com/tidyverse/dplyr/issues/1074" class="external-link">#1074</a>).</p></li>
<li><p><code><a href="../reference/bind_rows.html">bind_rows()</a></code> and <code><a href="../reference/summarise.html">summarise()</a></code> now handles complex columns (<a href="https://github.com/tidyverse/dplyr/issues/933" class="external-link">#933</a>).</p></li>
<li><p>Workaround for using the constructor of <code>DataFrame</code> on an unprotected object (<a href="https://github.com/tidyverse/dplyr/issues/998" class="external-link">#998</a>)</p></li>
<li><p>Improved performance when working with large number of columns (<a href="https://github.com/tidyverse/dplyr/issues/879" class="external-link">#879</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.4.1" id="dplyr-041">dplyr 0.4.1<a class="anchor" aria-label="anchor" href="#dplyr-041"></a></h2><p class="text-muted">CRAN release: 2015-01-14</p>
<ul><li>Don’t assume that RPostgreSQL is available.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.4.0" id="dplyr-040">dplyr 0.4.0<a class="anchor" aria-label="anchor" href="#dplyr-040"></a></h2><p class="text-muted">CRAN release: 2015-01-08</p>
<div class="section level3">
<h3 id="new-features-0-4-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-4-0"></a></h3>
<ul><li><p><code><a href="../reference/add_rownames.html">add_rownames()</a></code> turns row names into an explicit variable (<a href="https://github.com/tidyverse/dplyr/issues/639" class="external-link">#639</a>).</p></li>
<li><p><code><a href="https://tibble.tidyverse.org/reference/deprecated.html" class="external-link">as_data_frame()</a></code> efficiently coerces a list into a data frame (<a href="https://github.com/tidyverse/dplyr/issues/749" class="external-link">#749</a>).</p></li>
<li><p><code><a href="../reference/bind_rows.html">bind_rows()</a></code> and <code><a href="../reference/bind_cols.html">bind_cols()</a></code> efficiently bind a list of data frames by row or column. <code><a href="../reference/combine.html">combine()</a></code> applies the same coercion rules to vectors (it works like <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code> or <code><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist()</a></code> but is consistent with the <code><a href="../reference/bind_rows.html">bind_rows()</a></code> rules).</p></li>
<li><p><code><a href="../reference/mutate-joins.html">right_join()</a></code> (include all rows in <code>y</code>, and matching rows in <code>x</code>) and <code><a href="../reference/mutate-joins.html">full_join()</a></code> (include all rows in <code>x</code> and <code>y</code>) complete the family of mutating joins (<a href="https://github.com/tidyverse/dplyr/issues/96" class="external-link">#96</a>).</p></li>
<li><p><code><a href="../reference/group_data.html">group_indices()</a></code> computes a unique integer id for each group (<a href="https://github.com/tidyverse/dplyr/issues/771" class="external-link">#771</a>). It can be called on a grouped_df without any arguments or on a data frame with same arguments as <code><a href="../reference/group_by.html">group_by()</a></code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-vignettes-0-4-0">New vignettes<a class="anchor" aria-label="anchor" href="#new-vignettes-0-4-0"></a></h3>
<ul><li><p><code>vignette("data_frames")</code> describes dplyr functions that make it easier and faster to create and coerce data frames. It subsumes the old <code>memory</code> vignette.</p></li>
<li><p><code><a href="../articles/two-table.html">vignette("two-table")</a></code> describes how two-table verbs work in dplyr.</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-0-4-0">Minor improvements<a class="anchor" aria-label="anchor" href="#minor-improvements-0-4-0"></a></h3>
<ul><li><p><code><a href="https://tibble.tidyverse.org/reference/deprecated.html" class="external-link">data_frame()</a></code> (and <code><a href="https://tibble.tidyverse.org/reference/deprecated.html" class="external-link">as_data_frame()</a></code> &amp; <code><a href="../reference/tbl_df.html">tbl_df()</a></code>) now explicitly forbid columns that are data frames or matrices (<a href="https://github.com/tidyverse/dplyr/issues/775" class="external-link">#775</a>). All columns must be either a 1d atomic vector or a 1d list.</p></li>
<li><p><code><a href="../reference/do.html">do()</a></code> uses lazyeval to correctly evaluate its arguments in the correct environment (<a href="https://github.com/tidyverse/dplyr/issues/744" class="external-link">#744</a>), and new <code><a href="../reference/se-deprecated.html">do_()</a></code> is the SE equivalent of <code><a href="../reference/do.html">do()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/718" class="external-link">#718</a>). You can modify grouped data in place: this is probably a bad idea but it’s sometimes convenient (<a href="https://github.com/tidyverse/dplyr/issues/737" class="external-link">#737</a>). <code><a href="../reference/do.html">do()</a></code> on grouped data tables now passes in all columns (not all columns except grouping vars) (<a href="https://github.com/tidyverse/dplyr/issues/735" class="external-link">#735</a>, thanks to <a href="https://github.com/kismsu" class="external-link">@kismsu</a>). <code><a href="../reference/do.html">do()</a></code> with database tables no longer potentially includes grouping variables twice (<a href="https://github.com/tidyverse/dplyr/issues/673" class="external-link">#673</a>). Finally, <code><a href="../reference/do.html">do()</a></code> gives more consistent outputs when there are no rows or no groups (<a href="https://github.com/tidyverse/dplyr/issues/625" class="external-link">#625</a>).</p></li>
<li><p><code><a href="../reference/nth.html">first()</a></code> and <code><a href="../reference/nth.html">last()</a></code> preserve factors, dates and times (<a href="https://github.com/tidyverse/dplyr/issues/509" class="external-link">#509</a>).</p></li>
<li><p>Overhaul of single table verbs for data.table backend. They now all use a consistent (and simpler) code base. This ensures that (e.g.) <code><a href="../reference/context.html">n()</a></code> now works in all verbs (<a href="https://github.com/tidyverse/dplyr/issues/579" class="external-link">#579</a>).</p></li>
<li><p>In <code>*_join()</code>, you can now name only those variables that are different between the two tables, e.g. <code>inner_join(x, y, c("a", "b", "c" = "d"))</code> (<a href="https://github.com/tidyverse/dplyr/issues/682" class="external-link">#682</a>). If non-join columns are the same, dplyr will add <code>.x</code> and <code>.y</code> suffixes to distinguish the source (<a href="https://github.com/tidyverse/dplyr/issues/655" class="external-link">#655</a>).</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> handles complex vectors (<a href="https://github.com/tidyverse/dplyr/issues/436" class="external-link">#436</a>) and forbids <code>POSIXlt</code> results (instead of crashing) (<a href="https://github.com/tidyverse/dplyr/issues/670" class="external-link">#670</a>).</p></li>
<li><p><code><a href="../reference/select.html">select()</a></code> now implements a more sophisticated algorithm so if you’re doing multiples includes and excludes with and without names, you’re more likely to get what you expect (<a href="https://github.com/tidyverse/dplyr/issues/644" class="external-link">#644</a>). You’ll also get a better error message if you supply an input that doesn’t resolve to an integer column position (<a href="https://github.com/tidyverse/dplyr/issues/643" class="external-link">#643</a>).</p></li>
<li>
<p>Printing has received a number of small tweaks. All <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> methods invisibly return their input so you can interleave <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> statements into a pipeline to see interim results. <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> will column names of 0 row data frames (<a href="https://github.com/tidyverse/dplyr/issues/652" class="external-link">#652</a>), and will never print more 20 rows (i.e. <code>options(dplyr.print_max)</code> is now 20), not 100 (<a href="https://github.com/tidyverse/dplyr/issues/710" class="external-link">#710</a>). Row names are no never printed since no dplyr method is guaranteed to preserve them (<a href="https://github.com/tidyverse/dplyr/issues/669" class="external-link">#669</a>).</p>
<p><code><a href="../reference/glimpse.html">glimpse()</a></code> prints the number of observations (<a href="https://github.com/tidyverse/dplyr/issues/692" class="external-link">#692</a>)</p>
<p><code><a href="https://pillar.r-lib.org/reference/type_sum.html" class="external-link">type_sum()</a></code> gains a data frame method.</p>
</li>
<li><p><code><a href="../reference/summarise.html">summarise()</a></code> handles list output columns (<a href="https://github.com/tidyverse/dplyr/issues/832" class="external-link">#832</a>)</p></li>
<li><p><code><a href="../reference/slice.html">slice()</a></code> works for data tables (<a href="https://github.com/tidyverse/dplyr/issues/717" class="external-link">#717</a>). Documentation clarifies that slice can’t work with relational databases, and the examples show how to achieve the same results using <code><a href="../reference/filter.html">filter()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/720" class="external-link">#720</a>).</p></li>
<li><p>dplyr now requires RSQLite &gt;= 1.0. This shouldn’t affect your code in any way (except that RSQLite now doesn’t need to be attached) but does simplify the internals (<a href="https://github.com/tidyverse/dplyr/issues/622" class="external-link">#622</a>).</p></li>
<li>
<p>Functions that need to combine multiple results into a single column (e.g. <code><a href="../reference/mutate-joins.html">join()</a></code>, <code><a href="../reference/bind_rows.html">bind_rows()</a></code> and <code><a href="../reference/summarise.html">summarise()</a></code>) are more careful about coercion.</p>
<p>Joining factors with the same levels in the same order preserves the original levels (<a href="https://github.com/tidyverse/dplyr/issues/675" class="external-link">#675</a>). Joining factors with non-identical levels generates a warning and coerces to character (<a href="https://github.com/tidyverse/dplyr/issues/684" class="external-link">#684</a>). Joining a character to a factor (or vice versa) generates a warning and coerces to character. Avoid these warnings by ensuring your data is compatible before joining.</p>
<p><code>rbind_list()</code> will throw an error if you attempt to combine an integer and factor (<a href="https://github.com/tidyverse/dplyr/issues/751" class="external-link">#751</a>). <code><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind()</a></code>ing a column full of <code>NA</code>s is allowed and just collects the appropriate missing value for the column type being collected (<a href="https://github.com/tidyverse/dplyr/issues/493" class="external-link">#493</a>).</p>
<p><code><a href="../reference/summarise.html">summarise()</a></code> is more careful about <code>NA</code>, e.g. the decision on the result type will be delayed until the first non NA value is returned (<a href="https://github.com/tidyverse/dplyr/issues/599" class="external-link">#599</a>). It will complain about loss of precision coercions, which can happen for expressions that return integers for some groups and a doubles for others (<a href="https://github.com/tidyverse/dplyr/issues/599" class="external-link">#599</a>).</p>
</li>
<li>
<p>A number of functions gained new or improved hybrid handlers: <code><a href="../reference/nth.html">first()</a></code>, <code><a href="../reference/nth.html">last()</a></code>, <code><a href="../reference/nth.html">nth()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/626" class="external-link">#626</a>), <code><a href="../reference/lead-lag.html">lead()</a></code> &amp; <code><a href="../reference/lead-lag.html">lag()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/683" class="external-link">#683</a>), <code>%in%</code> (<a href="https://github.com/tidyverse/dplyr/issues/126" class="external-link">#126</a>). That means when you use these functions in a dplyr verb, we handle them in C++, rather than calling back to R, and hence improving performance.</p>
<p>Hybrid <code><a href="../reference/row_number.html">min_rank()</a></code> correctly handles <code>NaN</code> values (<a href="https://github.com/tidyverse/dplyr/issues/726" class="external-link">#726</a>). Hybrid implementation of <code><a href="../reference/nth.html">nth()</a></code> falls back to R evaluation when <code>n</code> is not a length one integer or numeric, e.g. when it’s an expression (<a href="https://github.com/tidyverse/dplyr/issues/734" class="external-link">#734</a>).</p>
<p>Hybrid <code><a href="../reference/row_number.html">dense_rank()</a></code>, <code><a href="../reference/row_number.html">min_rank()</a></code>, <code><a href="../reference/percent_rank.html">cume_dist()</a></code>, <code><a href="../reference/ntile.html">ntile()</a></code>, <code><a href="../reference/row_number.html">row_number()</a></code> and <code><a href="../reference/percent_rank.html">percent_rank()</a></code> now preserve NAs (<a href="https://github.com/tidyverse/dplyr/issues/774" class="external-link">#774</a>)</p>
</li>
<li><p><code>filter</code> returns its input when it has no rows or no columns (<a href="https://github.com/tidyverse/dplyr/issues/782" class="external-link">#782</a>).</p></li>
<li><p>Join functions keep attributes (e.g. time zone information) from the left argument for <code>POSIXct</code> and <code>Date</code> objects (<a href="https://github.com/tidyverse/dplyr/issues/819" class="external-link">#819</a>), and only only warn once about each incompatibility (<a href="https://github.com/tidyverse/dplyr/issues/798" class="external-link">#798</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-4-0">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-4-0"></a></h3>
<ul><li><p><code>[.tbl_df</code> correctly computes row names for 0-column data frames, avoiding problems with xtable (<a href="https://github.com/tidyverse/dplyr/issues/656" class="external-link">#656</a>). <code>[.grouped_df</code> will silently drop grouping if you don’t include the grouping columns (<a href="https://github.com/tidyverse/dplyr/issues/733" class="external-link">#733</a>).</p></li>
<li><p><code><a href="https://tibble.tidyverse.org/reference/deprecated.html" class="external-link">data_frame()</a></code> now acts correctly if the first argument is a vector to be recycled. (<a href="https://github.com/tidyverse/dplyr/issues/680" class="external-link">#680</a> thanks <a href="https://github.com/jimhester" class="external-link">@jimhester</a>)</p></li>
<li><p><code>filter.data.table()</code> works if the table has a variable called “V1” (<a href="https://github.com/tidyverse/dplyr/issues/615" class="external-link">#615</a>).</p></li>
<li><p><code>*_join()</code> keeps columns in original order (<a href="https://github.com/tidyverse/dplyr/issues/684" class="external-link">#684</a>). Joining a factor to a character vector doesn’t segfault (<a href="https://github.com/tidyverse/dplyr/issues/688" class="external-link">#688</a>). <code>*_join</code> functions can now deal with multiple encodings (<a href="https://github.com/tidyverse/dplyr/issues/769" class="external-link">#769</a>), and correctly name results (<a href="https://github.com/tidyverse/dplyr/issues/855" class="external-link">#855</a>).</p></li>
<li><p><code>*_join.data.table()</code> works when data.table isn’t attached (<a href="https://github.com/tidyverse/dplyr/issues/786" class="external-link">#786</a>).</p></li>
<li><p><code><a href="../reference/group_by.html">group_by()</a></code> on a data table preserves original order of the rows (<a href="https://github.com/tidyverse/dplyr/issues/623" class="external-link">#623</a>). <code><a href="../reference/group_by.html">group_by()</a></code> supports variables with more than 39 characters thanks to a fix in lazyeval (<a href="https://github.com/tidyverse/dplyr/issues/705" class="external-link">#705</a>). It gives meaningful error message when a variable is not found in the data frame (<a href="https://github.com/tidyverse/dplyr/issues/716" class="external-link">#716</a>).</p></li>
<li><p><code><a href="../reference/grouped_df.html">grouped_df()</a></code> requires <code>vars</code> to be a list of symbols (<a href="https://github.com/tidyverse/dplyr/issues/665" class="external-link">#665</a>).</p></li>
<li><p><code>min(.,na.rm = TRUE)</code> works with <code>Date</code>s built on numeric vectors (<a href="https://github.com/tidyverse/dplyr/issues/755" class="external-link">#755</a>).</p></li>
<li><p><code><a href="../reference/se-deprecated.html">rename_()</a></code> generic gets missing <code>.dots</code> argument (<a href="https://github.com/tidyverse/dplyr/issues/708" class="external-link">#708</a>).</p></li>
<li><p><code><a href="../reference/row_number.html">row_number()</a></code>, <code><a href="../reference/row_number.html">min_rank()</a></code>, <code><a href="../reference/percent_rank.html">percent_rank()</a></code>, <code><a href="../reference/row_number.html">dense_rank()</a></code>, <code><a href="../reference/ntile.html">ntile()</a></code> and <code><a href="../reference/percent_rank.html">cume_dist()</a></code> handle data frames with 0 rows (<a href="https://github.com/tidyverse/dplyr/issues/762" class="external-link">#762</a>). They all preserve missing values (<a href="https://github.com/tidyverse/dplyr/issues/774" class="external-link">#774</a>). <code><a href="../reference/row_number.html">row_number()</a></code> doesn’t segfault when giving an external variable with the wrong number of variables (<a href="https://github.com/tidyverse/dplyr/issues/781" class="external-link">#781</a>).</p></li>
<li><p><code>group_indices</code> handles the edge case when there are no variables (<a href="https://github.com/tidyverse/dplyr/issues/867" class="external-link">#867</a>).</p></li>
<li><p>Removed bogus <code>NAs introduced by coercion to integer range</code> on 32-bit Windows (<a href="https://github.com/tidyverse/dplyr/issues/2708" class="external-link">#2708</a>).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.0.1" id="dplyr-0301">dplyr 0.3.0.1<a class="anchor" aria-label="anchor" href="#dplyr-0301"></a></h2><p class="text-muted">CRAN release: 2014-10-08</p>
<ul><li>Fixed problem with test script on Windows.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3" id="dplyr-03">dplyr 0.3<a class="anchor" aria-label="anchor" href="#dplyr-03"></a></h2><p class="text-muted">CRAN release: 2014-10-04</p>
<div class="section level3">
<h3 id="new-functions-0-3">New functions<a class="anchor" aria-label="anchor" href="#new-functions-0-3"></a></h3>
<ul><li><p><code><a href="../reference/between.html">between()</a></code> vector function efficiently determines if numeric values fall in a range, and is translated to special form for SQL (<a href="https://github.com/tidyverse/dplyr/issues/503" class="external-link">#503</a>).</p></li>
<li><p><code><a href="../reference/count.html">count()</a></code> makes it even easier to do (weighted) counts (<a href="https://github.com/tidyverse/dplyr/issues/358" class="external-link">#358</a>).</p></li>
<li><p><code><a href="https://tibble.tidyverse.org/reference/deprecated.html" class="external-link">data_frame()</a></code> by <a href="https://github.com/kevinushey" class="external-link">@kevinushey</a> is a nicer way of creating data frames. It never coerces column types (no more <code>stringsAsFactors = FALSE</code>!), never munges column names, and never adds row names. You can use previously defined columns to compute new columns (<a href="https://github.com/tidyverse/dplyr/issues/376" class="external-link">#376</a>).</p></li>
<li><p><code><a href="../reference/distinct.html">distinct()</a></code> returns distinct (unique) rows of a tbl (<a href="https://github.com/tidyverse/dplyr/issues/97" class="external-link">#97</a>). Supply additional variables to return the first row for each unique combination of variables.</p></li>
<li><p>Set operations, <code><a href="../reference/setops.html">intersect()</a></code>, <code><a href="../reference/setops.html">union()</a></code> and <code><a href="../reference/setops.html">setdiff()</a></code> now have methods for data frames, data tables and SQL database tables (<a href="https://github.com/tidyverse/dplyr/issues/93" class="external-link">#93</a>). They pass their arguments down to the base functions, which will ensure they raise errors if you pass in two many arguments.</p></li>
<li><p>Joins (e.g. <code><a href="../reference/mutate-joins.html">left_join()</a></code>, <code><a href="../reference/mutate-joins.html">inner_join()</a></code>, <code><a href="../reference/filter-joins.html">semi_join()</a></code>, <code><a href="../reference/filter-joins.html">anti_join()</a></code>) now allow you to join on different variables in <code>x</code> and <code>y</code> tables by supplying a named vector to <code>by</code>. For example, <code>by = c("a" = "b")</code> joins <code>x.a</code> to <code>y.b</code>.</p></li>
<li><p><code><a href="../reference/group_data.html">n_groups()</a></code> function tells you how many groups in a tbl. It returns 1 for ungrouped data. (<a href="https://github.com/tidyverse/dplyr/issues/477" class="external-link">#477</a>)</p></li>
<li><p><code><a href="../reference/transmute.html">transmute()</a></code> works like <code><a href="../reference/mutate.html">mutate()</a></code> but drops all variables that you didn’t explicitly refer to (<a href="https://github.com/tidyverse/dplyr/issues/302" class="external-link">#302</a>).</p></li>
<li><p><code><a href="../reference/rename.html">rename()</a></code> makes it easy to rename variables - it works similarly to <code><a href="../reference/select.html">select()</a></code> but it preserves columns that you didn’t otherwise touch.</p></li>
<li><p><code><a href="../reference/slice.html">slice()</a></code> allows you to selecting rows by position (<a href="https://github.com/tidyverse/dplyr/issues/226" class="external-link">#226</a>). It includes positive integers, drops negative integers and you can use expression like <code><a href="../reference/context.html">n()</a></code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="programming-with-dplyr-non-standard-evaluation-0-3">Programming with dplyr (non-standard evaluation)<a class="anchor" aria-label="anchor" href="#programming-with-dplyr-non-standard-evaluation-0-3"></a></h3>
<ul><li><p>You can now program with dplyr - every function that does non-standard evaluation (NSE) has a standard evaluation (SE) version ending in <code>_</code>. This is powered by the new lazyeval package which provides all the tools needed to implement NSE consistently and correctly.</p></li>
<li><p>See <code>vignette("nse")</code> for full details.</p></li>
<li><p><code>regroup()</code> is deprecated. Please use the more flexible <code><a href="../reference/se-deprecated.html">group_by_()</a></code> instead.</p></li>
<li><p><code>summarise_each_q()</code> and <code>mutate_each_q()</code> are deprecated. Please use <code><a href="../reference/summarise_each.html">summarise_each_()</a></code> and <code><a href="../reference/summarise_each.html">mutate_each_()</a></code> instead.</p></li>
<li><p><code>funs_q</code> has been replaced with <code>funs_</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="removed-and-deprecated-features-0-3">Removed and deprecated features<a class="anchor" aria-label="anchor" href="#removed-and-deprecated-features-0-3"></a></h3>
<ul><li><p><code>%.%</code> has been deprecated: please use <code>%&gt;%</code> instead. <code>chain()</code> is defunct. (<a href="https://github.com/tidyverse/dplyr/issues/518" class="external-link">#518</a>)</p></li>
<li><p><code>filter.numeric()</code> removed. Need to figure out how to reimplement with new lazy eval system.</p></li>
<li><p>The <code>Progress</code> refclass is no longer exported to avoid conflicts with shiny. Instead use <code><a href="../reference/progress_estimated.html">progress_estimated()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/535" class="external-link">#535</a>).</p></li>
<li><p><code>src_monetdb()</code> is now implemented in MonetDB.R, not dplyr.</p></li>
<li><p><code>show_sql()</code> and <code>explain_sql()</code> and matching global options <code>dplyr.show_sql</code> and <code>dplyr.explain_sql</code> have been removed. Instead use <code><a href="../reference/explain.html">show_query()</a></code> and <code><a href="../reference/explain.html">explain()</a></code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-and-bug-fixes-0-3">Minor improvements and bug fixes<a class="anchor" aria-label="anchor" href="#minor-improvements-and-bug-fixes-0-3"></a></h3>
<ul><li><p>Main verbs now have individual documentation pages (<a href="https://github.com/tidyverse/dplyr/issues/519" class="external-link">#519</a>).</p></li>
<li><p><code>%&gt;%</code> is simply re-exported from magrittr, instead of creating a local copy (<a href="https://github.com/tidyverse/dplyr/issues/496" class="external-link">#496</a>, thanks to <a href="https://github.com/jimhester" class="external-link">@jimhester</a>)</p></li>
<li><p>Examples now use <code>nycflights13</code> instead of <code>hflights</code> because it the variables have better names and there are a few interlinked tables (<a href="https://github.com/tidyverse/dplyr/issues/562" class="external-link">#562</a>). <code>Lahman</code> and <code>nycflights13</code> are (once again) suggested packages. This means many examples will not work unless you explicitly install them with <code>install.packages(c("Lahman", "nycflights13"))</code> (<a href="https://github.com/tidyverse/dplyr/issues/508" class="external-link">#508</a>). dplyr now depends on Lahman 3.0.1. A number of examples have been updated to reflect modified field names (<a href="https://github.com/tidyverse/dplyr/issues/586" class="external-link">#586</a>).</p></li>
<li><p><code><a href="../reference/do.html">do()</a></code> now displays the progress bar only when used in interactive prompts and not when knitting (<a href="https://github.com/tidyverse/dplyr/issues/428" class="external-link">#428</a>, <a href="https://github.com/jimhester" class="external-link">@jimhester</a>).</p></li>
<li><p><code><a href="../reference/glimpse.html">glimpse()</a></code> now prints a trailing new line (<a href="https://github.com/tidyverse/dplyr/issues/590" class="external-link">#590</a>).</p></li>
<li><p><code><a href="../reference/group_by.html">group_by()</a></code> has more consistent behaviour when grouping by constants: it creates a new column with that value (<a href="https://github.com/tidyverse/dplyr/issues/410" class="external-link">#410</a>). It renames grouping variables (<a href="https://github.com/tidyverse/dplyr/issues/410" class="external-link">#410</a>). The first argument is now <code>.data</code> so you can create new groups with name x (<a href="https://github.com/tidyverse/dplyr/issues/534" class="external-link">#534</a>).</p></li>
<li><p>Now instead of overriding <code><a href="../reference/lead-lag.html">lag()</a></code>, dplyr overrides <code>lag.default()</code>, which should avoid clobbering lag methods added by other packages. (<a href="https://github.com/tidyverse/dplyr/issues/277" class="external-link">#277</a>).</p></li>
<li><p><code>mutate(data, a = NULL)</code> removes the variable <code>a</code> from the returned dataset (<a href="https://github.com/tidyverse/dplyr/issues/462" class="external-link">#462</a>).</p></li>
<li><p><code><a href="https://tibble.tidyverse.org/reference/trunc_mat.html" class="external-link">trunc_mat()</a></code> and hence <code>print.tbl_df()</code> and friends gets a <code>width</code> argument to control the default output width. Set <code>options(dplyr.width = Inf)</code> to always show all columns (<a href="https://github.com/tidyverse/dplyr/issues/589" class="external-link">#589</a>).</p></li>
<li><p><code><a href="../reference/select.html">select()</a></code> gains <code><a href="https://tidyselect.r-lib.org/reference/one_of.html" class="external-link">one_of()</a></code> selector: this allows you to select variables provided by a character vector (<a href="https://github.com/tidyverse/dplyr/issues/396" class="external-link">#396</a>). It fails immediately if you give an empty pattern to <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with()</a></code>, <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">ends_with()</a></code>, <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains()</a></code> or <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/481" class="external-link">#481</a>, <a href="https://github.com/leondutoit" class="external-link">@leondutoit</a>). Fixed buglet in <code><a href="../reference/select.html">select()</a></code> so that you can now create variables called <code>val</code> (<a href="https://github.com/tidyverse/dplyr/issues/564" class="external-link">#564</a>).</p></li>
<li><p>Switched from RC to R6.</p></li>
<li><p><code><a href="../reference/count.html">tally()</a></code> and <code><a href="../reference/top_n.html">top_n()</a></code> work consistently: neither accidentally evaluates the <code>wt</code> param. (<a href="https://github.com/tidyverse/dplyr/issues/426" class="external-link">#426</a>, <a href="https://github.com/mnel" class="external-link">@mnel</a>)</p></li>
<li><p><code>rename</code> handles grouped data (<a href="https://github.com/tidyverse/dplyr/issues/640" class="external-link">#640</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-and-bug-fixes-by-backend-0-3">Minor improvements and bug fixes by backend<a class="anchor" aria-label="anchor" href="#minor-improvements-and-bug-fixes-by-backend-0-3"></a></h3>
<div class="section level4">
<h4 id="databases-0-3">Databases<a class="anchor" aria-label="anchor" href="#databases-0-3"></a></h4>
<ul><li><p>Correct SQL generation for <code><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste()</a></code> when used with the collapse parameter targeting a Postgres database. (<a href="https://github.com/rbdixon" class="external-link">@rbdixon</a>, <a href="https://github.com/tidyverse/dplyr/issues/1357" class="external-link">#1357</a>)</p></li>
<li><p>The db backend system has been completely overhauled in order to make it possible to add backends in other packages, and to support a much wider range of databases. See <code>vignette("new-sql-backend")</code> for instruction on how to create your own (<a href="https://github.com/tidyverse/dplyr/issues/568" class="external-link">#568</a>).</p></li>
<li><p><code><a href="../reference/src_dbi.html">src_mysql()</a></code> gains a method for <code><a href="../reference/explain.html">explain()</a></code>.</p></li>
<li><p>When <code><a href="../reference/mutate.html">mutate()</a></code> creates a new variable that uses a window function, automatically wrap the result in a subquery (<a href="https://github.com/tidyverse/dplyr/issues/484" class="external-link">#484</a>).</p></li>
<li><p>Correct SQL generation for <code><a href="../reference/nth.html">first()</a></code> and <code><a href="../reference/nth.html">last()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/531" class="external-link">#531</a>).</p></li>
<li><p><code><a href="../reference/order_by.html">order_by()</a></code> now works in conjunction with window functions in databases that support them.</p></li>
</ul></div>
<div class="section level4">
<h4 id="data-framestbl_df-0-3">Data frames/<code>tbl_df</code>
<a class="anchor" aria-label="anchor" href="#data-framestbl_df-0-3"></a></h4>
<ul><li><p>All verbs now understand how to work with <code><a href="https://rdrr.io/r/base/difftime.html" class="external-link">difftime()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/390" class="external-link">#390</a>) and <code>AsIs</code> (<a href="https://github.com/tidyverse/dplyr/issues/453" class="external-link">#453</a>) objects. They all check that colnames are unique (<a href="https://github.com/tidyverse/dplyr/issues/483" class="external-link">#483</a>), and are more robust when columns are not present (<a href="https://github.com/tidyverse/dplyr/issues/348" class="external-link">#348</a>, <a href="https://github.com/tidyverse/dplyr/issues/569" class="external-link">#569</a>, <a href="https://github.com/tidyverse/dplyr/issues/600" class="external-link">#600</a>).</p></li>
<li>
<p>Hybrid evaluation bugs fixed:</p>
<ul><li><p>Call substitution stopped too early when a sub expression contained a <code>$</code> (<a href="https://github.com/tidyverse/dplyr/issues/502" class="external-link">#502</a>).</p></li>
<li><p>Handle <code>::</code> and <code>:::</code> (<a href="https://github.com/tidyverse/dplyr/issues/412" class="external-link">#412</a>).</p></li>
<li><p><code><a href="../reference/cumall.html">cumany()</a></code> and <code><a href="../reference/cumall.html">cumall()</a></code> properly handle <code>NA</code> (<a href="https://github.com/tidyverse/dplyr/issues/408" class="external-link">#408</a>).</p></li>
<li><p><code><a href="../reference/nth.html">nth()</a></code> now correctly preserve the class when using dates, times and factors (<a href="https://github.com/tidyverse/dplyr/issues/509" class="external-link">#509</a>).</p></li>
<li><p>no longer substitutes within <code><a href="../reference/order_by.html">order_by()</a></code> because <code><a href="../reference/order_by.html">order_by()</a></code> needs to do its own NSE (<a href="https://github.com/tidyverse/dplyr/issues/169" class="external-link">#169</a>).</p></li>
</ul></li>
<li><p><code>[.tbl_df</code> always returns a tbl_df (i.e. <code>drop = FALSE</code> is the default) (<a href="https://github.com/tidyverse/dplyr/issues/587" class="external-link">#587</a>, <a href="https://github.com/tidyverse/dplyr/issues/610" class="external-link">#610</a>). <code>[.grouped_df</code> preserves important output attributes (<a href="https://github.com/tidyverse/dplyr/issues/398" class="external-link">#398</a>).</p></li>
<li><p><code><a href="../reference/arrange.html">arrange()</a></code> keeps the grouping structure of grouped data (<a href="https://github.com/tidyverse/dplyr/issues/491" class="external-link">#491</a>, <a href="https://github.com/tidyverse/dplyr/issues/605" class="external-link">#605</a>), and preserves input classes (<a href="https://github.com/tidyverse/dplyr/issues/563" class="external-link">#563</a>).</p></li>
<li><p><code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains()</a></code> accidentally matched regular expressions, now it passes <code>fixed = TRUE</code> to <code><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/608" class="external-link">#608</a>).</p></li>
<li><p><code><a href="../reference/filter.html">filter()</a></code> asserts all variables are white listed (<a href="https://github.com/tidyverse/dplyr/issues/566" class="external-link">#566</a>).</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> makes a <code>rowwise_df</code> when given a <code>rowwise_df</code> (<a href="https://github.com/tidyverse/dplyr/issues/463" class="external-link">#463</a>).</p></li>
<li><p><code>rbind_all()</code> creates <code>tbl_df</code> objects instead of raw <code>data.frame</code>s.</p></li>
<li><p>If <code><a href="../reference/select.html">select()</a></code> doesn’t match any variables, it returns a 0-column data frame, instead of the original (<a href="https://github.com/tidyverse/dplyr/issues/498" class="external-link">#498</a>). It no longer fails when if some columns are not named (<a href="https://github.com/tidyverse/dplyr/issues/492" class="external-link">#492</a>)</p></li>
<li><p><code><a href="../reference/sample_n.html">sample_n()</a></code> and <code><a href="../reference/sample_n.html">sample_frac()</a></code> methods for data.frames exported. (<a href="https://github.com/tidyverse/dplyr/issues/405" class="external-link">#405</a>, <a href="https://github.com/alyst" class="external-link">@alyst</a>)</p></li>
<li><p>A grouped data frame may have 0 groups (<a href="https://github.com/tidyverse/dplyr/issues/486" class="external-link">#486</a>). Grouped df objects gain some basic validity checking, which should prevent some crashes related to corrupt <code>grouped_df</code> objects made by <code><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/606" class="external-link">#606</a>).</p></li>
<li><p>More coherence when joining columns of compatible but different types, e.g. when joining a character vector and a factor (<a href="https://github.com/tidyverse/dplyr/issues/455" class="external-link">#455</a>), or a numeric and integer (<a href="https://github.com/tidyverse/dplyr/issues/450" class="external-link">#450</a>)</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> works for on zero-row grouped data frame, and with list columns (<a href="https://github.com/tidyverse/dplyr/issues/555" class="external-link">#555</a>).</p></li>
<li><p><code>LazySubset</code> was confused about input data size (<a href="https://github.com/tidyverse/dplyr/issues/452" class="external-link">#452</a>).</p></li>
<li><p>Internal <code><a href="../reference/n_distinct.html">n_distinct()</a></code> is stricter about its inputs: it requires one symbol which must be from the data frame (<a href="https://github.com/tidyverse/dplyr/issues/567" class="external-link">#567</a>).</p></li>
<li><p><code>rbind_*()</code> handle data frames with 0 rows (<a href="https://github.com/tidyverse/dplyr/issues/597" class="external-link">#597</a>). They fill character vector columns with <code>NA</code> instead of blanks (<a href="https://github.com/tidyverse/dplyr/issues/595" class="external-link">#595</a>). They work with list columns (<a href="https://github.com/tidyverse/dplyr/issues/463" class="external-link">#463</a>).</p></li>
<li><p>Improved handling of encoding for column names (<a href="https://github.com/tidyverse/dplyr/issues/636" class="external-link">#636</a>).</p></li>
<li><p>Improved handling of hybrid evaluation re $ and @ (<a href="https://github.com/tidyverse/dplyr/issues/645" class="external-link">#645</a>).</p></li>
</ul></div>
<div class="section level4">
<h4 id="data-tables-0-3">Data tables<a class="anchor" aria-label="anchor" href="#data-tables-0-3"></a></h4>
<ul><li><p>Fix major omission in <code>tbl_dt()</code> and <code>grouped_dt()</code> methods - I was accidentally doing a deep copy on every result :(</p></li>
<li><p><code><a href="../reference/summarise.html">summarise()</a></code> and <code><a href="../reference/group_by.html">group_by()</a></code> now retain over-allocation when working with data.tables (<a href="https://github.com/tidyverse/dplyr/issues/475" class="external-link">#475</a>, <a href="https://github.com/arunsrinivasan" class="external-link">@arunsrinivasan</a>).</p></li>
<li><p>joining two data.tables now correctly dispatches to data table methods, and result is a data table (<a href="https://github.com/tidyverse/dplyr/issues/470" class="external-link">#470</a>)</p></li>
</ul></div>
<div class="section level4">
<h4 id="cubes-0-3">Cubes<a class="anchor" aria-label="anchor" href="#cubes-0-3"></a></h4>
<ul><li>
<code>summarise.tbl_cube()</code> works with single grouping variable (<a href="https://github.com/tidyverse/dplyr/issues/480" class="external-link">#480</a>).</li>
</ul></div>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2" id="dplyr-02">dplyr 0.2<a class="anchor" aria-label="anchor" href="#dplyr-02"></a></h2><p class="text-muted">CRAN release: 2014-05-21</p>
<div class="section level3">
<h3 id="piping-0-2">Piping<a class="anchor" aria-label="anchor" href="#piping-0-2"></a></h3>
<p>dplyr now imports <code>%&gt;%</code> from magrittr (<a href="https://github.com/tidyverse/dplyr/issues/330" class="external-link">#330</a>). I recommend that you use this instead of <code>%.%</code> because it is easier to type (since you can hold down the shift key) and is more flexible. With you <code>%&gt;%</code>, you can control which argument on the RHS receives the LHS by using the pronoun <code>.</code>. This makes <code>%&gt;%</code> more useful with base R functions because they don’t always take the data frame as the first argument. For example you could pipe <code>mtcars</code> to <code><a href="https://rdrr.io/r/stats/xtabs.html" class="external-link">xtabs()</a></code> with:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> <span class="fu">xtabs</span>( <span class="sc">~</span> cyl <span class="sc">+</span> vs, <span class="at">data =</span> .)</span></code></pre></div>
<p>Thanks to <a href="https://github.com/smbache" class="external-link">@smbache</a> for the excellent magrittr package. dplyr only provides <code>%&gt;%</code> from magrittr, but it contains many other useful functions. To use them, load <code>magrittr</code> explicitly: <code><a href="https://magrittr.tidyverse.org" class="external-link">library(magrittr)</a></code>. For more details, see <code>vignette("magrittr")</code>.</p>
<p><code>%.%</code> will be deprecated in a future version of dplyr, but it won’t happen for a while. I’ve also deprecated <code>chain()</code> to encourage a single style of dplyr usage: please use <code>%&gt;%</code> instead.</p>
</div>
<div class="section level3">
<h3 id="do-0-2">Do<a class="anchor" aria-label="anchor" href="#do-0-2"></a></h3>
<p><code><a href="../reference/do.html">do()</a></code> has been completely overhauled. There are now two ways to use it, either with multiple named arguments or a single unnamed arguments. <code><a href="../reference/group_by.html">group_by()</a></code> + <code><a href="../reference/do.html">do()</a></code> is equivalent to <code>plyr::dlply</code>, except it always returns a data frame.</p>
<p>If you use named arguments, each argument becomes a list-variable in the output. A list-variable can contain any arbitrary R object so it’s particularly well suited for storing models.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>models <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span> <span class="fu">do</span>(<span class="at">lm =</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt, <span class="at">data =</span> .))</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>models <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">rsq =</span> <span class="fu">summary</span>(lm)<span class="sc">$</span>r.squared)</span></code></pre></div>
<p>If you use an unnamed argument, the result should be a data frame. This allows you to apply arbitrary functions to each group.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span> <span class="fu">do</span>(<span class="fu">head</span>(., <span class="dv">1</span>))</span></code></pre></div>
<p>Note the use of the <code>.</code> pronoun to refer to the data in the current group.</p>
<p><code><a href="../reference/do.html">do()</a></code> also has an automatic progress bar. It appears if the computation takes longer than 5 seconds and lets you know (approximately) how much longer the job will take to complete.</p>
</div>
<div class="section level3">
<h3 id="new-verbs-0-2">New verbs<a class="anchor" aria-label="anchor" href="#new-verbs-0-2"></a></h3>
<p>dplyr 0.2 adds three new verbs:</p>
<ul><li><p><code><a href="../reference/glimpse.html">glimpse()</a></code> makes it possible to see all the columns in a tbl, displaying as much data for each variable as can be fit on a single line.</p></li>
<li><p><code><a href="../reference/sample_n.html">sample_n()</a></code> randomly samples a fixed number of rows from a tbl; <code><a href="../reference/sample_n.html">sample_frac()</a></code> randomly samples a fixed fraction of rows. Only works for local data frames and data tables (<a href="https://github.com/tidyverse/dplyr/issues/202" class="external-link">#202</a>).</p></li>
<li><p><code><a href="../reference/summarise_each.html">summarise_each()</a></code> and <code><a href="../reference/summarise_each.html">mutate_each()</a></code> make it easy to apply one or more functions to multiple columns in a tbl (<a href="https://github.com/tidyverse/dplyr/issues/178" class="external-link">#178</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-0-2">Minor improvements<a class="anchor" aria-label="anchor" href="#minor-improvements-0-2"></a></h3>
<ul><li><p>If you load plyr after dplyr, you’ll get a message suggesting that you load plyr first (<a href="https://github.com/tidyverse/dplyr/issues/347" class="external-link">#347</a>).</p></li>
<li><p><code>as.tbl_cube()</code> gains a method for matrices (<a href="https://github.com/tidyverse/dplyr/issues/359" class="external-link">#359</a>, <a href="https://github.com/paulstaab" class="external-link">@paulstaab</a>)</p></li>
<li><p><code><a href="../reference/compute.html">compute()</a></code> gains <code>temporary</code> argument so you can control whether the results are temporary or permanent (<a href="https://github.com/tidyverse/dplyr/issues/382" class="external-link">#382</a>, <a href="https://github.com/cpsievert" class="external-link">@cpsievert</a>)</p></li>
<li><p><code><a href="../reference/group_by.html">group_by()</a></code> now defaults to <code>add = FALSE</code> so that it sets the grouping variables rather than adding to the existing list. I think this is how most people expected <code>group_by</code> to work anyway, so it’s unlikely to cause problems (<a href="https://github.com/tidyverse/dplyr/issues/385" class="external-link">#385</a>).</p></li>
<li><p>Support for <a href="http://www.monetdb.org" class="external-link">MonetDB</a> tables with <code>src_monetdb()</code> (<a href="https://github.com/tidyverse/dplyr/issues/8" class="external-link">#8</a>, thanks to <a href="https://github.com/hannesmuehleisen" class="external-link">@hannesmuehleisen</a>).</p></li>
<li>
<p>New vignettes:</p>
<ul><li><p><code>memory</code> vignette which discusses how dplyr minimises memory usage for local data frames (<a href="https://github.com/tidyverse/dplyr/issues/198" class="external-link">#198</a>).</p></li>
<li><p><code>new-sql-backend</code> vignette which discusses how to add a new SQL backend/source to dplyr.</p></li>
</ul></li>
<li><p><code><a href="../reference/defunct.html">changes()</a></code> output more clearly distinguishes which columns were added or deleted.</p></li>
<li><p><code><a href="../reference/explain.html">explain()</a></code> is now generic.</p></li>
<li><p>dplyr is more careful when setting the keys of data tables, so it never accidentally modifies an object that it doesn’t own. It also avoids unnecessary key setting which negatively affected performance. (<a href="https://github.com/tidyverse/dplyr/issues/193" class="external-link">#193</a>, <a href="https://github.com/tidyverse/dplyr/issues/255" class="external-link">#255</a>).</p></li>
<li><p><code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> methods for <code>tbl_df</code>, <code>tbl_dt</code> and <code>tbl_sql</code> gain <code>n</code> argument to control the number of rows printed (<a href="https://github.com/tidyverse/dplyr/issues/362" class="external-link">#362</a>). They also works better when you have columns containing lists of complex objects.</p></li>
<li><p><code><a href="../reference/row_number.html">row_number()</a></code> can be called without arguments, in which case it returns the same as <code>1:n()</code> (<a href="https://github.com/tidyverse/dplyr/issues/303" class="external-link">#303</a>).</p></li>
<li><p><code>"comment"</code> attribute is allowed (white listed) as well as names (<a href="https://github.com/tidyverse/dplyr/issues/346" class="external-link">#346</a>).</p></li>
<li><p>hybrid versions of <code>min</code>, <code>max</code>, <code>mean</code>, <code>var</code>, <code>sd</code> and <code>sum</code> handle the <code>na.rm</code> argument (<a href="https://github.com/tidyverse/dplyr/issues/168" class="external-link">#168</a>). This should yield substantial performance improvements for those functions.</p></li>
<li><p>Special case for call to <code><a href="../reference/arrange.html">arrange()</a></code> on a grouped data frame with no arguments. (<a href="https://github.com/tidyverse/dplyr/issues/369" class="external-link">#369</a>)</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-2">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-2"></a></h3>
<ul><li><p>Code adapted to Rcpp &gt; 0.11.1</p></li>
<li><p>internal <code>DataDots</code> class protects against missing variables in verbs (<a href="https://github.com/tidyverse/dplyr/issues/314" class="external-link">#314</a>), including the case where <code>...</code> is missing. (<a href="https://github.com/tidyverse/dplyr/issues/338" class="external-link">#338</a>)</p></li>
<li><p><code>all.equal.data.frame</code> from base is no longer bypassed. we now have <code>all.equal.tbl_df</code> and <code>all.equal.tbl_dt</code> methods (<a href="https://github.com/tidyverse/dplyr/issues/332" class="external-link">#332</a>).</p></li>
<li><p><code><a href="../reference/arrange.html">arrange()</a></code> correctly handles NA in numeric vectors (<a href="https://github.com/tidyverse/dplyr/issues/331" class="external-link">#331</a>) and 0 row data frames (<a href="https://github.com/tidyverse/dplyr/issues/289" class="external-link">#289</a>).</p></li>
<li><p><code>copy_to.src_mysql()</code> now works on windows (<a href="https://github.com/tidyverse/dplyr/issues/323" class="external-link">#323</a>)</p></li>
<li><p><code>*_join()</code> doesn’t reorder column names (<a href="https://github.com/tidyverse/dplyr/issues/324" class="external-link">#324</a>).</p></li>
<li><p><code>rbind_all()</code> is stricter and only accepts list of data frames (<a href="https://github.com/tidyverse/dplyr/issues/288" class="external-link">#288</a>)</p></li>
<li><p><code>rbind_*</code> propagates time zone information for <code>POSIXct</code> columns (<a href="https://github.com/tidyverse/dplyr/issues/298" class="external-link">#298</a>).</p></li>
<li><p><code>rbind_*</code> is less strict about type promotion. The numeric <code>Collecter</code> allows collection of integer and logical vectors. The integer <code>Collecter</code> also collects logical values (<a href="https://github.com/tidyverse/dplyr/issues/321" class="external-link">#321</a>).</p></li>
<li><p>internal <code>sum</code> correctly handles integer (under/over)flow (<a href="https://github.com/tidyverse/dplyr/issues/308" class="external-link">#308</a>).</p></li>
<li><p><code><a href="../reference/summarise.html">summarise()</a></code> checks consistency of outputs (<a href="https://github.com/tidyverse/dplyr/issues/300" class="external-link">#300</a>) and drops <code>names</code> attribute of output columns (<a href="https://github.com/tidyverse/dplyr/issues/357" class="external-link">#357</a>).</p></li>
<li><p>join functions throw error instead of crashing when there are no common variables between the data frames, and also give a better error message when only one data frame has a by variable (<a href="https://github.com/tidyverse/dplyr/issues/371" class="external-link">#371</a>).</p></li>
<li><p><code><a href="../reference/top_n.html">top_n()</a></code> returns <code>n</code> rows instead of <code>n - 1</code> (<a href="https://github.com/leondutoit" class="external-link">@leondutoit</a>, <a href="https://github.com/tidyverse/dplyr/issues/367" class="external-link">#367</a>).</p></li>
<li><p>SQL translation always evaluates subsetting operators (<code>$</code>, <code>[</code>, <code>[[</code>) locally. (<a href="https://github.com/tidyverse/dplyr/issues/318" class="external-link">#318</a>).</p></li>
<li><p><code><a href="../reference/select.html">select()</a></code> now renames variables in remote sql tbls (<a href="https://github.com/tidyverse/dplyr/issues/317" class="external-link">#317</a>) and implicitly adds grouping variables (<a href="https://github.com/tidyverse/dplyr/issues/170" class="external-link">#170</a>).</p></li>
<li><p>internal <code>grouped_df_impl</code> function errors if there are no variables to group by (<a href="https://github.com/tidyverse/dplyr/issues/398" class="external-link">#398</a>).</p></li>
<li><p><code>n_distinct</code> did not treat NA correctly in the numeric case <a href="https://github.com/tidyverse/dplyr/issues/384" class="external-link">#384</a>.</p></li>
<li><p>Some compiler warnings triggered by -Wall or -pedantic have been eliminated.</p></li>
<li><p><code>group_by</code> only creates one group for NA (<a href="https://github.com/tidyverse/dplyr/issues/401" class="external-link">#401</a>).</p></li>
<li><p>Hybrid evaluator did not evaluate expression in correct environment (<a href="https://github.com/tidyverse/dplyr/issues/403" class="external-link">#403</a>).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.3" id="dplyr-013">dplyr 0.1.3<a class="anchor" aria-label="anchor" href="#dplyr-013"></a></h2><p class="text-muted">CRAN release: 2014-03-15</p>
<div class="section level3">
<h3 id="bug-fixes-0-1-3">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-1-3"></a></h3>
<ul><li><p><code><a href="../reference/select.html">select()</a></code> actually renames columns in a data table (<a href="https://github.com/tidyverse/dplyr/issues/284" class="external-link">#284</a>).</p></li>
<li><p><code>rbind_all()</code> and <code>rbind_list()</code> now handle missing values in factors (<a href="https://github.com/tidyverse/dplyr/issues/279" class="external-link">#279</a>).</p></li>
<li><p>SQL joins now work better if names duplicated in both x and y tables (<a href="https://github.com/tidyverse/dplyr/issues/310" class="external-link">#310</a>).</p></li>
<li><p>Builds against Rcpp 0.11.1</p></li>
<li><p><code><a href="../reference/select.html">select()</a></code> correctly works with the vars attribute (<a href="https://github.com/tidyverse/dplyr/issues/309" class="external-link">#309</a>).</p></li>
<li><p>Internal code is stricter when deciding if a data frame is grouped (<a href="https://github.com/tidyverse/dplyr/issues/308" class="external-link">#308</a>): this avoids a number of situations which previously caused problems.</p></li>
<li><p>More data frame joins work with missing values in keys (<a href="https://github.com/tidyverse/dplyr/issues/306" class="external-link">#306</a>).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.2" id="dplyr-012">dplyr 0.1.2<a class="anchor" aria-label="anchor" href="#dplyr-012"></a></h2><p class="text-muted">CRAN release: 2014-02-24</p>
<div class="section level3">
<h3 id="new-features-0-1-2">New features<a class="anchor" aria-label="anchor" href="#new-features-0-1-2"></a></h3>
<ul><li><p><code><a href="../reference/select.html">select()</a></code> is substantially more powerful. You can use named arguments to rename existing variables, and new functions <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with()</a></code>, <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">ends_with()</a></code>, <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains()</a></code>, <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches()</a></code> and <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">num_range()</a></code> to select variables based on their names. It now also makes a shallow copy, substantially reducing its memory impact (<a href="https://github.com/tidyverse/dplyr/issues/158" class="external-link">#158</a>, <a href="https://github.com/tidyverse/dplyr/issues/172" class="external-link">#172</a>, <a href="https://github.com/tidyverse/dplyr/issues/192" class="external-link">#192</a>, <a href="https://github.com/tidyverse/dplyr/issues/232" class="external-link">#232</a>).</p></li>
<li><p><code><a href="../reference/summarise.html">summarize()</a></code> added as alias for <code><a href="../reference/summarise.html">summarise()</a></code> for people from countries that don’t don’t spell things correctly ;) (<a href="https://github.com/tidyverse/dplyr/issues/245" class="external-link">#245</a>)</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-1-2">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-1-2"></a></h3>
<ul><li><p><code><a href="../reference/filter.html">filter()</a></code> now fails when given anything other than a logical vector, and correctly handles missing values (<a href="https://github.com/tidyverse/dplyr/issues/249" class="external-link">#249</a>). <code>filter.numeric()</code> proxies <code><a href="https://rdrr.io/r/stats/filter.html" class="external-link">stats::filter()</a></code> so you can continue to use <code><a href="../reference/filter.html">filter()</a></code> function with numeric inputs (<a href="https://github.com/tidyverse/dplyr/issues/264" class="external-link">#264</a>).</p></li>
<li><p><code><a href="../reference/summarise.html">summarise()</a></code> correctly uses newly created variables (<a href="https://github.com/tidyverse/dplyr/issues/259" class="external-link">#259</a>).</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> correctly propagates attributes (<a href="https://github.com/tidyverse/dplyr/issues/265" class="external-link">#265</a>) and <code><a href="../reference/mutate.html">mutate.data.frame()</a></code> correctly mutates the same variable repeatedly (<a href="https://github.com/tidyverse/dplyr/issues/243" class="external-link">#243</a>).</p></li>
<li><p><code><a href="../reference/lead-lag.html">lead()</a></code> and <code><a href="../reference/lead-lag.html">lag()</a></code> preserve attributes, so they now work with dates, times and factors (<a href="https://github.com/tidyverse/dplyr/issues/166" class="external-link">#166</a>).</p></li>
<li><p><code><a href="../reference/context.html">n()</a></code> never accepts arguments (<a href="https://github.com/tidyverse/dplyr/issues/223" class="external-link">#223</a>).</p></li>
<li><p><code><a href="../reference/row_number.html">row_number()</a></code> gives correct results (<a href="https://github.com/tidyverse/dplyr/issues/227" class="external-link">#227</a>).</p></li>
<li><p><code>rbind_all()</code> silently ignores data frames with 0 rows or 0 columns (<a href="https://github.com/tidyverse/dplyr/issues/274" class="external-link">#274</a>).</p></li>
<li><p><code><a href="../reference/group_by.html">group_by()</a></code> orders the result (<a href="https://github.com/tidyverse/dplyr/issues/242" class="external-link">#242</a>). It also checks that columns are of supported types (<a href="https://github.com/tidyverse/dplyr/issues/233" class="external-link">#233</a>, <a href="https://github.com/tidyverse/dplyr/issues/276" class="external-link">#276</a>).</p></li>
<li><p>The hybrid evaluator did not handle some expressions correctly, for example in <code>if(n() &gt; 5) 1 else 2</code> the subexpression <code><a href="../reference/context.html">n()</a></code> was not substituted correctly. It also correctly processes <code>$</code> (<a href="https://github.com/tidyverse/dplyr/issues/278" class="external-link">#278</a>).</p></li>
<li><p><code><a href="../reference/arrange.html">arrange()</a></code> checks that all columns are of supported types (<a href="https://github.com/tidyverse/dplyr/issues/266" class="external-link">#266</a>). It also handles list columns (<a href="https://github.com/tidyverse/dplyr/issues/282" class="external-link">#282</a>).</p></li>
<li><p>Working towards Solaris compatibility.</p></li>
<li><p>Benchmarking vignette temporarily disabled due to microbenchmark problems reported by BDR.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.1" id="dplyr-011">dplyr 0.1.1<a class="anchor" aria-label="anchor" href="#dplyr-011"></a></h2><p class="text-muted">CRAN release: 2014-01-29</p>
<div class="section level3">
<h3 id="improvements-0-1-1">Improvements<a class="anchor" aria-label="anchor" href="#improvements-0-1-1"></a></h3>
<ul><li><p>new <code><a href="../reference/defunct.html">location()</a></code> and <code><a href="../reference/defunct.html">changes()</a></code> functions which provide more information about how data frames are stored in memory so that you can see what gets copied.</p></li>
<li><p>renamed <code>explain_tbl()</code> to <code><a href="../reference/explain.html">explain()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/182" class="external-link">#182</a>).</p></li>
<li><p><code><a href="../reference/count.html">tally()</a></code> gains <code>sort</code> argument to sort output so highest counts come first (<a href="https://github.com/tidyverse/dplyr/issues/173" class="external-link">#173</a>).</p></li>
<li><p><code>ungroup.grouped_df()</code>, <code><a href="../reference/tbl_df.html">tbl_df()</a></code>, <code>as.data.frame.tbl_df()</code> now only make shallow copies of their inputs (<a href="https://github.com/tidyverse/dplyr/issues/191" class="external-link">#191</a>).</p></li>
<li><p>The <code>benchmark-baseball</code> vignette now contains fairer (including grouping times) comparisons with <code>data.table</code>. (<a href="https://github.com/tidyverse/dplyr/issues/222" class="external-link">#222</a>)</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-1-1">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-1-1"></a></h3>
<ul><li><p><code><a href="../reference/filter.html">filter()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/221" class="external-link">#221</a>) and <code><a href="../reference/summarise.html">summarise()</a></code> (<a href="https://github.com/tidyverse/dplyr/issues/194" class="external-link">#194</a>) correctly propagate attributes.</p></li>
<li><p><code><a href="../reference/summarise.html">summarise()</a></code> throws an error when asked to summarise an unknown variable instead of crashing (<a href="https://github.com/tidyverse/dplyr/issues/208" class="external-link">#208</a>).</p></li>
<li><p><code><a href="../reference/group_by.html">group_by()</a></code> handles factors with missing values (<a href="https://github.com/tidyverse/dplyr/issues/183" class="external-link">#183</a>).</p></li>
<li><p><code><a href="../reference/filter.html">filter()</a></code> handles scalar results (<a href="https://github.com/tidyverse/dplyr/issues/217" class="external-link">#217</a>) and better handles scoping, e.g. <code>filter(., variable)</code> where <code>variable</code> is defined in the function that calls <code>filter</code>. It also handles <code>T</code> and <code>F</code> as aliases to <code>TRUE</code> and <code>FALSE</code> if there are no <code>T</code> or <code>F</code> variables in the data or in the scope.</p></li>
<li><p><code>select.grouped_df</code> fails when the grouping variables are not included in the selected variables (<a href="https://github.com/tidyverse/dplyr/issues/170" class="external-link">#170</a>)</p></li>
<li><p><code>all.equal.data.frame()</code> handles a corner case where the data frame has <code>NULL</code> names (<a href="https://github.com/tidyverse/dplyr/issues/217" class="external-link">#217</a>)</p></li>
<li><p><code><a href="../reference/mutate.html">mutate()</a></code> gives informative error message on unsupported types (<a href="https://github.com/tidyverse/dplyr/issues/179" class="external-link">#179</a>)</p></li>
<li><p>dplyr source package no longer includes pandas benchmark, reducing download size from 2.8 MB to 0.5 MB.</p></li>
</ul></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://github.com/romainfrancois" class="external-link">Romain François</a>, <a href="https://github.com/lionel-" class="external-link">Lionel Henry</a>, <a href="https://krlmlr.info" class="external-link">Kirill Müller</a>, <a href="https://github.com/DavisVaughan" class="external-link">Davis Vaughan</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer></body></html>

